import*as e from"cherry-cljs/cljs.core.js";import*as F from"rpub.admin.impl";import*as y from"rpub.lib.dag";var p=function(t,l){const n=l,a=e.__destructure_map.call(null,n),r=e.get.call(null,a,e.keyword("content-types")),o=F.index_by.call(null,e.keyword("id"),r);return e.array_map(e.keyword("model/content-types-index"),o)},c=(()=>{const t=function(l){switch(e.alength.call(null,arguments)){case 1:return t.cljs$core$IFn$_invoke$arity$1(arguments[0]);case 2:return t.cljs$core$IFn$_invoke$arity$2(arguments[0],arguments[1]);default:throw new Error(e.str.call(null,"Invalid arity: ",e.alength.call(null,arguments)))}};return t.cljs$core$IFn$_invoke$arity$1=function(l){return c.call(null,l,e.keys.call(null,e.keyword("inputs").call(null,l)))},t.cljs$core$IFn$_invoke$arity$2=function(l,n){return e.update_vals.call(null,e.select_keys.call(null,e.keyword("inputs").call(null,l),n),e.keyword("value"))},t.cljs$lang$maxFixedArity=2,t})(),u=function(t){return e.merge.call(null,e.keyword("settings").call(null,t),c.call(null,t))},i=function(t,l){const n=l,a=e.nth.call(null,n,0,null),r=e.nth.call(null,n,1,null);return e.assoc_in.call(null,t,e.vector(e.keyword("inputs"),a,e.keyword("value")),r)},d=function(t,l){return e.update.call(null,e.assoc.call(null,t,e.keyword("plugins-page/needs-restart"),!0),e.keyword("plugins-page/activated-plugins"),e.fnil.call(null,e.conj,e.hash_set()),l)},g=function(t,l){return e.update.call(null,e.assoc.call(null,t,e.keyword("plugins-page/needs-restart"),!0),e.keyword("plugins-page/activated-plugins"),e.disj,l)},k=function(t){return e.assoc.call(null,t,e.keyword("plugins-page/restarted"),!0)},w=function(t){return e.assoc.call(null,t,e.keyword("settings-page/submitting"),!0)},_=function(t){return e.assoc.call(null,t,e.keyword("settings-page/submitting"),!1)},m=function(t,l){return e.assoc.call(null,t,e.keyword("themes-page/current-theme-name-setting"),e.array_map(e.keyword("value"),l))},v=function(t,l){const n=l,a=e.__destructure_map.call(null,n),r=e.get.call(null,a,e.keyword("content-type")),o=e.array_map(e.keyword("content-type"),e.select_keys.call(null,r,e.vector(e.keyword("id"))));return e.assoc.call(null,t,e.keyword("all-content-types-page/selection"),o)},f=function(t,l){const n=l,a=e.__destructure_map.call(null,n),r=e.get.call(null,a,e.keyword("content-type")),o=e.get.call(null,a,e.keyword("content-type-field")),s=e.array_map(e.keyword("content-type"),e.select_keys.call(null,r,e.vector(e.keyword("id"))),e.keyword("content-type-field"),e.select_keys.call(null,o,e.vector(e.keyword("id"))));return e.assoc.call(null,t,e.keyword("all-content-types-page/selection"),s)},h=function(t){return e.dissoc.call(null,t,e.keyword("all-content-types-page/selection"))},$=function(t){const l=e.get.call(null,t,e.keyword("all-content-types-page/selection")),n=e.get_in.call(null,l,e.vector(e.keyword("content-type"),e.keyword("id"))),a=e.get_in.call(null,l,e.vector(e.keyword("content-type-field"),e.keyword("id"))),r=e.get_in.call(null,t,e.vector(e.keyword("model/content-types-index"),n)),o=null,s=e.truth_.call(null,e.keyword("content-type").call(null,l))?e.assoc.call(null,o,e.keyword("content-type"),r):o;return e.truth_.call(null,e.keyword("content-type-field").call(null,l))?e.assoc.call(null,s,e.keyword("content-type-field"),e.first.call(null,e.filter.call(null,function(x){return e._EQ_.call(null,e.keyword("id").call(null,x),a)},e.keyword("fields").call(null,r)))):s},b=e.array_map(e.keyword("nodes"),e.hash_map(e.keyword("all-content-types-page/selection"),e.array_map(e.keyword("calc"),$),e.keyword("themes-page/current-theme-name-setting"),e.array_map(e.keyword("calc"),e.keyword("themes-page/current-theme-name-setting")),e.keyword("init"),e.array_map(e.keyword("push"),p),e.keyword("plugins-page/restart-server"),e.array_map(e.keyword("push"),k),e.keyword("settings-page/submitting"),e.array_map(e.keyword("calc"),e.keyword("settings-page/submitting")),e.keyword("themes-page/activate-theme"),e.array_map(e.keyword("push"),m),e.keyword("all-content-types-page/select-content-type"),e.array_map(e.keyword("push"),v),e.keyword("plugins-page/activated-plugins"),e.array_map(e.keyword("calc"),e.keyword("plugins-page/activated-plugins")),e.keyword("all-content-types-page/clear-selection"),e.array_map(e.keyword("push"),h),e.keyword("settings-page/change-input"),e.array_map(e.keyword("push"),i),e.keyword("settings-page/update-settings"),e.array_map(e.keyword("push"),i),e.keyword("model/settings"),e.array_map(e.keyword("calc"),u),e.keyword("plugins-page/deactivate-plugin"),e.array_map(e.keyword("push"),g),e.keyword("settings-page/submit-start"),e.array_map(e.keyword("push"),w),e.keyword("model/site-url"),e.array_map(e.keyword("calc"),e.comp.call(null,e.keyword("site-url"),e.keyword("settings"))),e.keyword("plugins-page/activate-plugin"),e.array_map(e.keyword("push"),d),e.keyword("all-content-types-page/select-content-type-field"),e.array_map(e.keyword("push"),f),e.keyword("plugins-page/needs-restart"),e.array_map(e.keyword("calc"),e.keyword("plugins-page/needs-restart")),e.keyword("settings-page/submit-error"),e.array_map(e.keyword("push"),_),e.keyword("settings-page/field-values"),e.array_map(e.keyword("calc"),c)),e.keyword("edges"),e.vector(e.vector(e.keyword("all-content-types-page/clear-selection"),e.keyword("all-content-types-page/selection")),e.vector(e.keyword("all-content-types-page/select-content-type"),e.keyword("all-content-types-page/selection")),e.vector(e.keyword("all-content-types-page/select-content-type-field"),e.keyword("all-content-types-page/selection")),e.vector(e.keyword("init"),e.keyword("model/settings")),e.vector(e.keyword("model/settings"),e.keyword("model/site-url")),e.vector(e.keyword("model/settings"),e.keyword("settings-page/field-values")),e.vector(e.keyword("plugins-page/activate-plugin"),e.keyword("plugins-page/needs-restart")),e.vector(e.keyword("plugins-page/activate-plugin"),e.keyword("plugins-page/activated-plugins")),e.vector(e.keyword("plugins-page/deactivate-plugin"),e.keyword("plugins-page/needs-restart")),e.vector(e.keyword("plugins-page/deactivate-plugin"),e.keyword("plugins-page/activated-plugins")),e.vector(e.keyword("settings-page/change-input"),e.keyword("settings-page/field-values")),e.vector(e.keyword("settings-page/submit-error"),e.keyword("settings-page/submitting")),e.vector(e.keyword("settings-page/submit-start"),e.keyword("settings-page/submitting")),e.vector(e.keyword("settings-page/update-settings"),e.keyword("model/settings")),e.vector(e.keyword("themes-page/activate-theme"),e.keyword("themes-page/current-theme-name-setting"))));if(!(typeof j<"u"))var j=e.atom.call(null,y.add_tracing.call(null,y.__GT_dag.call(null,b)));export{d as activate_plugin,m as activate_theme,i as change_input,h as clear_selection,j as dag_atom,b as dag_config,g as deactivate_plugin,c as field_values,p as init,u as model_settings,k as restart_server,v as select_content_type,f as select_content_type_field,$ as selection,_ as submit_error,w as submit_start};
