import*as e from"cherry-cljs/cljs.core.js";import*as I from"rpub.admin.impl";import*as p from"rpub.lib.dag";var u=function(t,l){const n=l,r=e.__destructure_map.call(null,n),a=e.get.call(null,r,e.keyword("content-types")),o=I.index_by.call(null,e.keyword("id"),a);return e.array_map(e.keyword("model/content-types-index"),o)},d=(()=>{const t=function(l){switch(e.alength.call(null,arguments)){case 1:return t.cljs$core$IFn$_invoke$arity$1(arguments[0]);case 2:return t.cljs$core$IFn$_invoke$arity$2(arguments[0],arguments[1]);default:throw new Error(e.str.call(null,"Invalid arity: ",e.alength.call(null,arguments)))}};return t.cljs$core$IFn$_invoke$arity$1=function(l){return d.call(null,l,e.keys.call(null,e.keyword("inputs").call(null,l)))},t.cljs$core$IFn$_invoke$arity$2=function(l,n){return e.update_vals.call(null,e.select_keys.call(null,e.keyword("inputs").call(null,l),n),e.keyword("value"))},t.cljs$lang$maxFixedArity=2,t})(),i=function(t){return e.merge.call(null,e.keyword("settings").call(null,t),d.call(null,t))},y=function(t,l){const n=l,r=e.nth.call(null,n,0,null),a=e.nth.call(null,n,1,null);return e.assoc_in.call(null,t,e.vector(e.keyword("inputs"),r,e.keyword("value")),a)},g=function(t,l){return e.update.call(null,e.assoc.call(null,t,e.keyword("plugins-page/needs-restart"),!0),e.keyword("plugins-page/activated-plugins"),e.fnil.call(null,e.conj,e.hash_set()),l)},k=function(t,l){return e.update.call(null,e.assoc.call(null,t,e.keyword("plugins-page/needs-restart"),!0),e.keyword("plugins-page/activated-plugins"),e.disj,l)},w=function(t){return e.assoc.call(null,t,e.keyword("plugins-page/restarted"),!0)},_=function(t){return e.assoc.call(null,t,e.keyword("settings-page/submitting"),!0)},m=function(t){return e.assoc.call(null,t,e.keyword("settings-page/submitting"),!1)},v=function(t,l){return e.assoc.call(null,t,e.keyword("themes-page/current-theme-name-setting"),e.array_map(e.keyword("value"),l))},f=function(t,l){const n=l,r=e.__destructure_map.call(null,n),a=e.get.call(null,r,e.keyword("content-type")),o=e.array_map(e.keyword("content-type"),e.select_keys.call(null,a,e.vector(e.keyword("id"))));return e.assoc.call(null,t,e.keyword("all-content-types-page/selection"),o)},h=function(t,l){const n=l,r=e.__destructure_map.call(null,n),a=e.get.call(null,r,e.keyword("content-type")),o=e.get.call(null,r,e.keyword("content-type-field")),c=e.array_map(e.keyword("content-type"),e.select_keys.call(null,a,e.vector(e.keyword("id"))),e.keyword("content-type-field"),e.select_keys.call(null,o,e.vector(e.keyword("id"))));return e.assoc.call(null,t,e.keyword("all-content-types-page/selection"),c)},$=function(t){return e.dissoc.call(null,t,e.keyword("all-content-types-page/selection"))},b=function(t){const l=e.get.call(null,t,e.keyword("all-content-types-page/selection")),n=e.get_in.call(null,l,e.vector(e.keyword("content-type"),e.keyword("id"))),r=e.get_in.call(null,l,e.vector(e.keyword("content-type-field"),e.keyword("id"))),a=e.get_in.call(null,t,e.vector(e.keyword("model/content-types-index"),n)),o=null,c=e.truth_.call(null,e.keyword("content-type").call(null,l))?e.assoc.call(null,o,e.keyword("content-type"),a):o;return e.truth_.call(null,e.keyword("content-type-field").call(null,l))?e.assoc.call(null,c,e.keyword("content-type-field"),e.first.call(null,e.filter.call(null,function(s){return e._EQ_.call(null,e.keyword("id").call(null,s),r)},e.keyword("fields").call(null,a)))):c},x=function(t,l){return e.assoc.call(null,t,e.keyword("all-content-types-page/drag-source"),l)},j=function(t,l){const n=l,r=e.__destructure_map.call(null,n),a=e.get.call(null,r,e.keyword("content-type")),o=t,c=e.__destructure_map.call(null,o),s=e.get.call(null,c,e.keyword("all-content-types-page/drag-source"));return e.update_in.call(null,e.dissoc.call(null,t,e.keyword("all-content-types-page/drag-source")),e.vector(e.keyword("model/content-types-index"),e.keyword("id").call(null,a),e.keyword("fields")),e.conj,e.array_map(e.keyword("id"),e.random_uuid.call(null),e.keyword("name"),e.str.call(null,"New ",e.keyword("label").call(null,s)),e.keyword("type"),e.keyword("type").call(null,s),e.keyword("created-at"),new Date,e.keyword("created-by"),e.uuid.call(null,"00000000-0000-0000-0000-000000000000"),e.keyword("rank"),e.apply.call(null,e.max,e.map.call(null,e.keyword("rank"),e.keyword("fields").call(null,a)))+1))},F=e.array_map(e.keyword("nodes"),e.hash_map(e.keyword("all-content-types-page/selection"),e.array_map(e.keyword("calc"),b),e.keyword("themes-page/current-theme-name-setting"),e.array_map(e.keyword("calc"),e.keyword("themes-page/current-theme-name-setting")),e.keyword("model/content-types-index"),e.array_map(e.keyword("calc"),e.keyword("model/content-types-index")),e.keyword("init"),e.array_map(e.keyword("push"),u),e.keyword("plugins-page/restart-server"),e.array_map(e.keyword("push"),w),e.keyword("all-content-types-page/drag-drop"),e.array_map(e.keyword("push"),j),e.keyword("settings-page/submitting"),e.array_map(e.keyword("calc"),e.keyword("settings-page/submitting")),e.keyword("themes-page/activate-theme"),e.array_map(e.keyword("push"),v),e.keyword("all-content-types-page/select-content-type"),e.array_map(e.keyword("push"),f),e.keyword("plugins-page/activated-plugins"),e.array_map(e.keyword("calc"),e.keyword("plugins-page/activated-plugins")),e.keyword("all-content-types-page/clear-selection"),e.array_map(e.keyword("push"),$),e.keyword("settings-page/change-input"),e.array_map(e.keyword("push"),y),e.keyword("settings-page/update-settings"),e.array_map(e.keyword("push"),y),e.keyword("model/settings"),e.array_map(e.keyword("calc"),i),e.keyword("plugins-page/deactivate-plugin"),e.array_map(e.keyword("push"),k),e.keyword("settings-page/submit-start"),e.array_map(e.keyword("push"),_),e.keyword("model/site-url"),e.array_map(e.keyword("calc"),e.comp.call(null,e.keyword("site-url"),e.keyword("settings"))),e.keyword("plugins-page/activate-plugin"),e.array_map(e.keyword("push"),g),e.keyword("all-content-types-page/drag-start"),e.array_map(e.keyword("push"),x),e.keyword("all-content-types-page/select-content-type-field"),e.array_map(e.keyword("push"),h),e.keyword("plugins-page/needs-restart"),e.array_map(e.keyword("calc"),e.keyword("plugins-page/needs-restart")),e.keyword("settings-page/submit-error"),e.array_map(e.keyword("push"),m),e.keyword("settings-page/field-values"),e.array_map(e.keyword("calc"),d)),e.keyword("edges"),e.vector(e.vector(e.keyword("all-content-types-page/clear-selection"),e.keyword("all-content-types-page/selection")),e.vector(e.keyword("all-content-types-page/select-content-type"),e.keyword("all-content-types-page/selection")),e.vector(e.keyword("all-content-types-page/select-content-type-field"),e.keyword("all-content-types-page/selection")),e.vector(e.keyword("all-content-types-page/drag-drop"),e.keyword("model/content-types-index")),e.vector(e.keyword("init"),e.keyword("model/settings")),e.vector(e.keyword("init"),e.keyword("model/content-types-index")),e.vector(e.keyword("model/settings"),e.keyword("model/site-url")),e.vector(e.keyword("model/settings"),e.keyword("settings-page/field-values")),e.vector(e.keyword("plugins-page/activate-plugin"),e.keyword("plugins-page/needs-restart")),e.vector(e.keyword("plugins-page/activate-plugin"),e.keyword("plugins-page/activated-plugins")),e.vector(e.keyword("plugins-page/deactivate-plugin"),e.keyword("plugins-page/needs-restart")),e.vector(e.keyword("plugins-page/deactivate-plugin"),e.keyword("plugins-page/activated-plugins")),e.vector(e.keyword("settings-page/change-input"),e.keyword("settings-page/field-values")),e.vector(e.keyword("settings-page/submit-error"),e.keyword("settings-page/submitting")),e.vector(e.keyword("settings-page/submit-start"),e.keyword("settings-page/submitting")),e.vector(e.keyword("settings-page/update-settings"),e.keyword("model/settings")),e.vector(e.keyword("themes-page/activate-theme"),e.keyword("themes-page/current-theme-name-setting"))));if(!(typeof G<"u"))var G=e.atom.call(null,p.add_tracing.call(null,p.__GT_dag.call(null,F)));export{g as activate_plugin,v as activate_theme,y as change_input,$ as clear_selection,G as dag_atom,F as dag_config,k as deactivate_plugin,j as drag_drop,x as drag_start,d as field_values,u as init,i as model_settings,w as restart_server,f as select_content_type,h as select_content_type_field,b as selection,m as submit_error,_ as submit_start};
