import*as l from"cherry-cljs/cljs.core.js";import{useEffect as B}from"react";import*as C from"rads.inflections";import*as x from"rpub.admin.impl";import{use_dag as R}from"rpub.lib.dag.react";import*as G from"rpub.lib.html";import*as V from"rpub.lib.http";var W=function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("name")),e=l.get.call(null,r,l.keyword("type"));return l.array_map(l.keyword("id"),l.random_uuid.call(null),l.keyword("name"),_,l.keyword("type"),e)},X=function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("id")),e=l.get.call(null,r,l.keyword("name")),w=l.get.call(null,r,l.keyword("slug")),s=l.get.call(null,r,l.keyword("fields"));return l.array_map(l.keyword("id"),(()=>{const Q=l.random_uuid.call(null);return l.truth_.call(null,Q)?Q:_})(),l.keyword("name"),e,l.keyword("slug"),w,l.keyword("fields"),s,l.keyword("created-at"),new Date,l.keyword("content-item-count"),0)},E=function(a){const y=l.keyword("type").call(null,a);switch(l.truth_.call(null,l.keyword_QMARK_.call(null,y))?l.subs.call(null,l.str.call(null,y),1):null){case"text":return"Text";case"text-lg":return"Text (Large)";default:return l.name.call(null,l.keyword("type").call(null,a))}},K=function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("anti-forgery-token")),e=l.get.call(null,r,l.keyword("content-type")),w=l.get.call(null,r,l.keyword("class")),s=R.call(null,l.vector(l.keyword("all-content-types-page/selection"))),Q=l.nth.call(null,s,0,null),A=l.__destructure_map.call(null,Q),b=l.get.call(null,A,l.keyword("all-content-types-page/selection")),g=l.nth.call(null,s,1,null),v=l.array_map(l.keyword("format"),l.keyword("transit"));return l.vector(l.keyword("form"),l.array_map(l.keyword("method"),"post",l.keyword("class"),w),l.vector(l.keyword("input"),l.array_map(l.keyword("id"),"__anti-forgery-token",l.keyword("name"),"__anti-forgery-token",l.keyword("type"),"hidden",l.keyword("value"),_)),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-id",l.keyword("value"),l.keyword("id").call(null,e))),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-name",l.keyword("value"),l.keyword("name").call(null,e))),l.vector(l.keyword("div"),function h(f){return new l.LazySeq(null,function(){let i=f;for(;;){const k=l.seq.call(null,i);if(l.truth_.call(null,k)){const n=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,n))){const t=l.chunk_first.call(null,n),c=l.count.call(null,t),u=l.chunk_buffer.call(null,c);return(()=>{let o=0;for(;;){if(o<c){const m=l._nth.call(null,t,o),d=(()=>{const S=l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,e));return l.truth_.call(null,S)?l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type-field"),l.keyword("id"))),l.keyword("id").call(null,m)):S})();l.chunk_append.call(null,u,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"my-2 flex items-center","w-full font-semibold border ","rounded-[6px] hover:border-blue-500 ",l.truth_.call(null,d)?"ring-2 ring-blue-400 border-blue-500":"border-gray-200"),l.keyword("data-content-type-field-id"),l.keyword("id").call(null,m),l.keyword("key"),l.keyword("id").call(null,m)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(l.keyword("div.w-full.pl-2.py-2"),l.array_map(l.keyword("onClick"),function(S){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),e,l.keyword("content-type-field"),m))}),l.keyword("name").call(null,m)),l.vector(l.keyword("div.bg-gray-50.px-2.py-2.border-l.border-l-gray-200"),l.array_map(l.keyword("class"),"min-w-[150px] rounded-r-[6px]",l.keyword("onClick"),function(S){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),e,l.keyword("content-type-field"),m))}),l.vector(E,m)))),o=l.unchecked_inc.call(null,o);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,u),h.call(null,l.chunk_rest.call(null,n))):l.chunk_cons.call(null,l.chunk.call(null,u),null)}else{const t=l.first.call(null,n),c=(()=>{const u=l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,e));return l.truth_.call(null,u)?l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type-field"),l.keyword("id"))),l.keyword("id").call(null,t)):u})();return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"my-2 flex items-center","w-full font-semibold border ","rounded-[6px] hover:border-blue-500 ",l.truth_.call(null,c)?"ring-2 ring-blue-400 border-blue-500":"border-gray-200"),l.keyword("data-content-type-field-id"),l.keyword("id").call(null,t),l.keyword("key"),l.keyword("id").call(null,t)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(l.keyword("div.w-full.pl-2.py-2"),l.array_map(l.keyword("onClick"),function(u){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),e,l.keyword("content-type-field"),t))}),l.keyword("name").call(null,t)),l.vector(l.keyword("div.bg-gray-50.px-2.py-2.border-l.border-l-gray-200"),l.array_map(l.keyword("class"),"min-w-[150px] rounded-r-[6px]",l.keyword("onClick"),function(u){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),e,l.keyword("content-type-field"),t))}),l.vector(E,t))),h.call(null,l.rest.call(null,n)))}}break}},null,null)}.call(null,l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,e)))))},D=l.vector(l.array_map(l.keyword("label"),"Text",l.keyword("description"),"Ask for text with optional formatting.",l.keyword("type"),l.keyword("text")),l.array_map(l.keyword("label"),"Date and Time",l.keyword("description"),"Ask for a date and time with a date picker.",l.keyword("type"),l.keyword("datetime")),l.array_map(l.keyword("label"),"Number",l.keyword("description"),"Ask for a whole number or a decimal.",l.keyword("type"),l.keyword("number")),l.array_map(l.keyword("label"),"Media",l.keyword("description"),"Ask for an image or video.",l.keyword("type"),l.keyword("media")),l.array_map(l.keyword("label"),"Choice",l.keyword("description"),"Ask for a choice between multiple options.",l.keyword("type"),l.keyword("choice")),l.array_map(l.keyword("label"),"Group",l.keyword("description"),"Combine multiple fields into a group.",l.keyword("type"),l.keyword("group"))),N=function(a){const y=R.call(null,l.vector(l.keyword("all-content-types-page/selection"),l.keyword("model/content-types-index"))),r=l.nth.call(null,y,0,null),_=l.__destructure_map.call(null,r),e=l.get.call(null,_,l.keyword("all-content-types-page/selection")),w=l.get.call(null,_,l.keyword("model/content-types-index")),s=l.nth.call(null,y,1,null),Q=B.call(null,function(){return s.call(null,l.keyword("init"),l.select_keys.call(null,a,l.vector(l.keyword("content-types"))))},[]),A=l.array_map(l.keyword("format"),l.keyword("transit")),b=function(v,p){return l.println.call(null,confirm(l.str.call(null,'Are you sure you want to delete the "',l.keyword("name").call(null,p),'" field?')))},g=l.sort_by.call(null,l.keyword("created-at"),l._GT_,l.vals.call(null,w));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex",l.keyword("onClick"),function(v){return l.truth_.call(null,(()=>{const p=v.target.closest("[data-no-select]");return l.truth_.call(null,p)?p:v.target.closest("[data-content-type-field-id]")})())?null:s.call(null,l.keyword("all-content-types-page/clear-selection"))}),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex-grow"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pr-[384px]"),l.vector(x.box,l.array_map(l.keyword("class"),"pb-4",l.keyword("data-no-select"),!0,l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center"),l.vector(l.keyword("div"),"Content Types")),l.keyword("content"),l.vector(x.content_item_counts,l.array_map(l.keyword("content-types"),g)))),function p(h){return new l.LazySeq(null,function(){let f=h;for(;;){const i=l.seq.call(null,f);if(l.truth_.call(null,i)){const k=i;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,k))){const n=l.chunk_first.call(null,k),t=l.count.call(null,n),c=l.chunk_buffer.call(null,t);return(()=>{let u=0;for(;;){if(u<t){const o=l._nth.call(null,n,u);l.chunk_append.call(null,c,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,o),l.keyword("data-no-select"),!0),l.vector(x.box,l.array_map(l.keyword("hover"),!0,l.keyword("on-click"),function(d){return l.truth_.call(null,d.target.closest("[data-content-type-field-id]"))?null:s.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),o))},l.keyword("on-drag-over"),function(d){return d.preventDefault()},l.keyword("on-drop"),function(d){return s.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),o))},l.keyword("selected"),(()=>{const d=l.not.call(null,l.keyword("content-type-field").call(null,e));return l.truth_.call(null,d)?l._EQ_.call(null,l.get_in.call(null,e,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,o)):d})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,o))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,o)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,o)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector(K,l.array_map(l.keyword("content-type"),o))):null)))),u=l.unchecked_inc.call(null,u);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,c),p.call(null,l.chunk_rest.call(null,k))):l.chunk_cons.call(null,l.chunk.call(null,c),null)}else{const n=l.first.call(null,k);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,n),l.keyword("data-no-select"),!0),l.vector(x.box,l.array_map(l.keyword("hover"),!0,l.keyword("on-click"),function(t){return l.truth_.call(null,t.target.closest("[data-content-type-field-id]"))?null:s.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),n))},l.keyword("on-drag-over"),function(t){return t.preventDefault()},l.keyword("on-drop"),function(t){return s.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),n))},l.keyword("selected"),(()=>{const t=l.not.call(null,l.keyword("content-type-field").call(null,e));return l.truth_.call(null,t)?l._EQ_.call(null,l.get_in.call(null,e,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,n)):t})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,n))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,n)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,n)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector(K,l.array_map(l.keyword("content-type"),n))):null))),p.call(null,l.rest.call(null,k)))}}break}},null,null)}.call(null,g))),(()=>{const v=function(p){const h=p,f=l.__destructure_map.call(null,h),i=f,k=l.get.call(null,f,l.keyword("label")),n=l.get.call(null,f,l.keyword("description")),t=l.get.call(null,f,l.keyword("selected")),c=l.get.call(null,f,l.keyword("draggable"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"border rounded-[6px] p-2 mb-4 bg-gray-100 ",l.truth_.call(null,c)?"cursor-move hover:shadow-md border-gray-100":"cursor-pointer hover:border-blue-500"," ",l.truth_.call(null,t)?"ring-2 ring-blue-400 border-blue-500":"border-gray-100"),l.keyword("draggable"),c,l.keyword("onDragStart"),function(u){return s.call(null,l.keyword("all-content-types-page/drag-start"),i),l.println.call(null,l.keyword("onDragStart"),u)}),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"font-semibold"),k),l.vector(l.keyword("p"),l.array_map(l.keyword("class"),"text-sm text-gray-500"),n))};return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pl-2 w-[376px] fixed right-0 bottom-0 top-12",l.keyword("data-no-select"),!0),l.truth_.call(null,e)?l.truth_.call(null,l.keyword("content-type-field").call(null,e))?l.vector(x.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span.italic.text-blue-600"),"Field: "),l.get_in.call(null,e,l.vector(l.keyword("content-type-field"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div.mb-8"),l.vector(G.action_button,l.array_map(l.keyword("class"),"mt-2 mr-2"),"Rename Field"),l.vector(G.delete_button,l.array_map(l.keyword("class"),"mt-2",l.keyword("on-click"),function(p){return b.call(null,p,l.keyword("content-type-field").call(null,e))}),"Delete Field")),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Change Field Type"),l.vector(l.keyword("div"),function h(f){return new l.LazySeq(null,function(){let i=f;for(;;){const k=l.seq.call(null,i);if(l.truth_.call(null,k)){const n=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,n))){const t=l.chunk_first.call(null,n),c=l.count.call(null,t),u=l.chunk_buffer.call(null,c);return(()=>{let o=0;for(;;){if(o<c){const m=l._nth.call(null,t,o);l.chunk_append.call(null,u,v.call(null,l.merge.call(null,m,l.array_map(l.keyword("selected"),l._EQ_.call(null,l.get_in.call(null,e,l.vector(l.keyword("content-type-field"),l.keyword("type"))),l.keyword("type").call(null,m)))))),o=l.unchecked_inc.call(null,o);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,u),h.call(null,l.chunk_rest.call(null,n))):l.chunk_cons.call(null,l.chunk.call(null,u),null)}else{const t=l.first.call(null,n);return l.cons.call(null,v.call(null,l.merge.call(null,t,l.array_map(l.keyword("selected"),l._EQ_.call(null,l.get_in.call(null,e,l.vector(l.keyword("content-type-field"),l.keyword("type"))),l.keyword("type").call(null,t))))),h.call(null,l.rest.call(null,n)))}}break}},null,null)}.call(null,D))))):l.truth_.call(null,l.keyword("content-type").call(null,e))?l.vector(x.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span.italic.text-blue-600"),"Content Type: "),l.get_in.call(null,e,l.vector(l.keyword("content-type"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div.mb-8"),l.vector(G.action_button,l.array_map(l.keyword("class"),"mt-2 mr-2"),"Rename Content Type"),l.vector(G.delete_button,l.array_map(l.keyword("class"),"mt-2",l.keyword("on-click"),function(p){return b.call(null,p,l.keyword("content-type-field").call(null,e))}),"Delete Content Type")),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Add Field"),l.vector(l.keyword("div"),function h(f){return new l.LazySeq(null,function(){let i=f;for(;;){const k=l.seq.call(null,i);if(l.truth_.call(null,k)){const n=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,n))){const t=l.chunk_first.call(null,n),c=l.count.call(null,t),u=l.chunk_buffer.call(null,c);return(()=>{let o=0;for(;;){if(o<c){const m=l._nth.call(null,t,o);l.chunk_append.call(null,u,v.call(null,l.assoc.call(null,m,l.keyword("draggable"),!0))),o=l.unchecked_inc.call(null,o);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,u),h.call(null,l.chunk_rest.call(null,n))):l.chunk_cons.call(null,l.chunk.call(null,u),null)}else{const t=l.first.call(null,n);return l.cons.call(null,v.call(null,l.assoc.call(null,t,l.keyword("draggable"),!0)),h.call(null,l.rest.call(null,n)))}}break}},null,null)}.call(null,D))))):null:l.vector(x.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),"Add Field"),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div"),function h(f){return new l.LazySeq(null,function(){let i=f;for(;;){const k=l.seq.call(null,i);if(l.truth_.call(null,k)){const n=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,n))){const t=l.chunk_first.call(null,n),c=l.count.call(null,t),u=l.chunk_buffer.call(null,c);return(()=>{let o=0;for(;;){if(o<c){const m=l._nth.call(null,t,o);l.chunk_append.call(null,u,v.call(null,l.assoc.call(null,m,l.keyword("draggable"),!0))),o=l.unchecked_inc.call(null,o);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,u),h.call(null,l.chunk_rest.call(null,n))):l.chunk_cons.call(null,l.chunk.call(null,u),null)}else{const t=l.first.call(null,n);return l.cons.call(null,v.call(null,l.assoc.call(null,t,l.keyword("draggable"),!0)),h.call(null,l.rest.call(null,n)))}}break}},null,null)}.call(null,D))))))})())};G.add_element.call(null,l.keyword("all-content-types-page"),x.wrap_component.call(null,N),l.array_map(l.keyword("format"),l.keyword("transit")));var O=l.vector("January","February","March","April","May","June","July","August","September","October","November","December"),I=function(a){const y=a.getMonth(),r=a.getDate(),_=a.getFullYear(),e=a.getHours(),w=a.getMinutes(),s=l.get.call(null,O,y),Q=e<12?"AM":"PM",A=l.mod.call(null,e,12),b=A===0?12:A,g=w<10?l.str.call(null,"0",w):l.str.call(null,w);return l.str.call(null,s," ",r,", ",_," ",b,":",g," ",Q)},U=function(a){return l.str.call(null,"/admin/content-types/",l.name.call(null,l.get_in.call(null,a,l.vector(l.keyword("content-type"),l.keyword("slug")))),"/content-items/",l.name.call(null,l.get_in.call(null,a,l.vector(l.keyword("fields"),"Slug"))))},J=l.vector(l.array_map(l.keyword("name"),"Title",l.keyword("value"),function(a){const y=a,r=l.__destructure_map.call(null,y),_=r,e=l.get.call(null,r,l.keyword("fields"));return l.vector(l.keyword("a.underline"),l.array_map(l.keyword("href"),U.call(null,_)),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),l.get.call(null,e,"Title")))}),l.array_map(l.keyword("name"),"Author",l.keyword("value"),function(a){const y=a,r=l.__destructure_map.call(null,y),e=l.get.call(null,r,l.keyword("created-by")),w=l.__destructure_map.call(null,e),s=l.get.call(null,w,l.keyword("username"));return l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),s)}),l.array_map(l.keyword("name"),"Date",l.keyword("value"),function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("created-at")),e=l.get.call(null,r,l.keyword("updated-at")),w=(()=>{const Q=e;return l.truth_.call(null,Q)?Q:_})(),s=w==null?null:new Date(w);return s==null?null:I.call(null,s)})),$=function(a){return l.str.call(null,"/admin/content-types/",l.name.call(null,l.keyword("slug").call(null,a)),"/content-items/new")},H=function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("content-type")),e=l.get.call(null,r,l.keyword("content-items")),w=l.array_map(l.keyword("format"),l.keyword("transit")),s=l.map.call(null,function(b){return l.update.call(null,b,l.keyword("fields"),function(g){return l.update_keys.call(null,g,l.name)})},e),Q=function(b,g){const v=l.array_map(l.keyword("content-item-id"),l.keyword("id").call(null,g)),p=function(f,i){if(l.truth_.call(null,i))return l.println.call(null,i)},h=l.merge.call(null,w,l.array_map(l.keyword("body"),v,l.keyword("on-complete"),p));return V.post.call(null,"/api/delete-content-item",h)},A=l.map.call(null,function(b){return l.assoc.call(null,b,l.keyword("content-type"),_)},s);return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4"),l.vector(x.table,l.array_map(l.keyword("title"),l.keyword("name").call(null,_),l.keyword("columns"),J,l.keyword("rows"),A,l.keyword("header-buttons"),l.vector(l.keyword("a"),l.array_map(l.keyword("href"),$.call(null,_)),l.vector(G.action_button,l.str.call(null,"New ",C.singular.call(null,l.keyword("name").call(null,_))))),l.keyword("delete-row"),Q)))};G.add_element.call(null,l.keyword("single-content-type-page"),x.wrap_component.call(null,H),l.array_map(l.keyword("format"),l.keyword("transit")));var F=function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("content-item")),e=l.get.call(null,r,l.keyword("editing")),w=l.get.call(null,r,l.keyword("creating")),s=_,Q=l.__destructure_map.call(null,s),A=l.get.call(null,Q,l.keyword("content-type")),b=l.sort_by.call(null,function(g){const v=g,p=l.nth.call(null,v,0,null),h=l.nth.call(null,v,1,null),f=l.some.call(null,function(i){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,i),p)))return i},l.keyword("fields").call(null,A));return l.keyword("rank").call(null,f)},l.keyword("document").call(null,_));return l.vector(l.keyword("div"),function v(p){return new l.LazySeq(null,function(){let h=p;for(;;){const f=l.seq.call(null,h);if(l.truth_.call(null,f)){const i=f;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,i))){const k=l.chunk_first.call(null,i),n=l.count.call(null,k),t=l.chunk_buffer.call(null,n);return(()=>{let c=0;for(;;){if(c<n){const u=l._nth.call(null,k,c),o=l.nth.call(null,u,0,null),m=l.nth.call(null,u,1,null),d=(()=>{const T=l.some.call(null,function(L){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,L),o)))return L},l.keyword("fields").call(null,A));return l.assoc.call(null,T,l.keyword("key"),l.str.call(null,l.keyword("id").call(null,T)))})(),q=l.truth_.call(null,l._EQ_.call(null,m,l.keyword("rpub.plugins.content-types/new-field")))?"":m;l.chunk_append.call(null,t,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,d)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,d)),l.keyword("name").call(null,d)),l.vector(l.keyword("div"),(()=>{const T=l.keyword("type").call(null,d);switch(l.truth_.call(null,l.keyword_QMARK_.call(null,T))?l.subs.call(null,l.str.call(null,T),1):null){case"text":return l.vector(G.input2,(()=>{const M=l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),l.keyword("key").call(null,d),l.keyword("on-change"),l.prn),z=l.truth_.call(null,e)?l.assoc.call(null,M,l.keyword("value"),q):M;return l.truth_.call(null,w)?l.assoc.call(null,z,l.keyword("placeholder"),E.call(null,d)):z})());case"text-lg":return l.vector(G.textarea,(()=>{const M=l.array_map(l.keyword("name"),l.keyword("key").call(null,d),l.keyword("on-change"),l.prn),z=l.truth_.call(null,e)?l.assoc.call(null,M,l.keyword("value"),q):M;return l.truth_.call(null,w)?l.assoc.call(null,z,l.keyword("placeholder"),E.call(null,d)):z})());case"choice":return l.vector(l.keyword("select"));case"datetime":return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("text")));case"number":return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("number")));default:return l.pr_str.call(null,d)}})()))),c=l.unchecked_inc.call(null,c);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,t),v.call(null,l.chunk_rest.call(null,i))):l.chunk_cons.call(null,l.chunk.call(null,t),null)}else{const k=l.first.call(null,i),n=l.nth.call(null,k,0,null),t=l.nth.call(null,k,1,null),c=(()=>{const o=l.some.call(null,function(m){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,m),n)))return m},l.keyword("fields").call(null,A));return l.assoc.call(null,o,l.keyword("key"),l.str.call(null,l.keyword("id").call(null,o)))})(),u=l.truth_.call(null,l._EQ_.call(null,t,l.keyword("rpub.plugins.content-types/new-field")))?"":t;return l.cons.call(null,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,c)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,c)),l.keyword("name").call(null,c)),l.vector(l.keyword("div"),(()=>{const o=l.keyword("type").call(null,c);switch(l.truth_.call(null,l.keyword_QMARK_.call(null,o))?l.subs.call(null,l.str.call(null,o),1):null){case"text":return l.vector(G.input2,(()=>{const d=l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),l.keyword("key").call(null,c),l.keyword("on-change"),l.prn),q=l.truth_.call(null,e)?l.assoc.call(null,d,l.keyword("value"),u):d;return l.truth_.call(null,w)?l.assoc.call(null,q,l.keyword("placeholder"),E.call(null,c)):q})());case"text-lg":return l.vector(G.textarea,(()=>{const d=l.array_map(l.keyword("name"),l.keyword("key").call(null,c),l.keyword("on-change"),l.prn),q=l.truth_.call(null,e)?l.assoc.call(null,d,l.keyword("value"),u):d;return l.truth_.call(null,w)?l.assoc.call(null,q,l.keyword("placeholder"),E.call(null,c)):q})());case"choice":return l.vector(l.keyword("select"));case"datetime":return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("text")));case"number":return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("number")));default:return l.pr_str.call(null,c)}})())),v.call(null,l.rest.call(null,i)))}}break}},null,null)}.call(null,b))},Y=function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("content-type")),e=l.array_map(l.keyword("content-type"),_,l.keyword("document"),l.into.call(null,l.array_map(),l.map.call(null,function(s){return l.vector(l.keyword("id").call(null,s),l.keyword("rpub.plugins.content-types/new-field"))},l.keyword("fields").call(null,_))));return l.vector(l.keyword("div.p-4"),l.vector(x.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.str.call(null,"New ",C.singular.call(null,l.get_in.call(null,e,l.vector(l.keyword("content-type"),l.keyword("name"))))))),l.vector(x.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(F,l.array_map(l.keyword("content-item"),e,l.keyword("creating"),!0)),l.vector(G.submit_button,l.array_map(l.keyword("ready-label"),"Create",l.keyword("submit-label"),"Creating...",l.keyword("submitting"),!1))))))};G.add_element.call(null,l.keyword("new-content-item-page"),x.wrap_component.call(null,Y),l.array_map(l.keyword("format"),l.keyword("transit")));var j=function(a){const y=a,r=l.__destructure_map.call(null,y),_=l.get.call(null,r,l.keyword("content-type")),e=l.get.call(null,r,l.keyword("content-item"));return l.vector(l.keyword("div.p-4"),l.vector(x.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.vector(l.keyword("div"),l.vector(l.keyword("span.italic.text-blue-600"),l.str.call(null,C.singular.call(null,l.keyword("name").call(null,_)),": ")),l.get_in.call(null,e,l.vector(l.keyword("fields"),"Title"))))),l.vector(x.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(F,l.array_map(l.keyword("content-item"),e,l.keyword("editing"),!0)),l.vector(G.submit_button,l.array_map(l.keyword("ready-label"),"Save",l.keyword("submit-label"),"Saving...",l.keyword("submitting"),!1))))))};G.add_element.call(null,l.keyword("edit-content-item-page"),x.wrap_component.call(null,j),l.array_map(l.keyword("format"),l.keyword("transit")));export{X as __GT_content_type,W as __GT_field,N as all_content_types_page,J as columns,F as content_item_fields,K as content_type_fields_form,j as edit_content_item_page,U as edit_content_item_path,D as field_config,E as field_type_label,I as format_datetime,O as months,Y as new_content_item_page,$ as new_content_item_path,H as single_content_type_page};
