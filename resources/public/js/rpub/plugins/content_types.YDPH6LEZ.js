import*as l from"cherry-cljs/cljs.core.js";import{useEffect as fl,useCallback as el}from"react";import*as vl from"cherry-cljs/lib/clojure.string.js";import*as B from"rads.inflections";import*as D from"rpub.admin.impl";import{use_dag as tl}from"rpub.lib.dag.react";import*as h from"rpub.lib.html";import*as U from"rpub.lib.http";var Y=function(){return crypto.randomUUID()},rl=l.vector(l.vector(l.array_map(l.keyword("header"),l.vector(1,2,3,4,5,6,null))),l.vector("bold","italic"),l.vector(l.array_map(l.keyword("list"),"bullet"),l.array_map(l.keyword("list"),"ordered")),l.vector("blockquote"),l.vector(l.array_map(l.keyword("align"),""),l.array_map(l.keyword("align"),"center"),l.array_map(l.keyword("align"),"right")),l.vector("link"),l.vector("clean")),nl=l.array_map(l.keyword("theme"),l.keyword("snow"),l.keyword("modules"),l.array_map(l.keyword("toolbar"),rl)),hl=function(r,c){const e=l.merge.call(null,nl,l.dissoc.call(null,c,l.keyword("html"))),y=new Quill(r,l.clj__GT_js.call(null,e)),a=l.keyword("html").call(null,c);if(l.truth_.call(null,a)){const m=a;y.clipboard.dangerouslyPasteHTML(m)}return y},ol=function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("name")),a=l.get.call(null,e,l.keyword("type"));return l.array_map(l.keyword("id"),Y.call(null),l.keyword("name"),y,l.keyword("type"),a)},al=function(r){return B.parameterize.call(null,r)},cl=function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("id")),a=l.get.call(null,e,l.keyword("name")),m=l.get.call(null,e,l.keyword("slug")),x=l.get.call(null,e,l.keyword("fields"));return l.array_map(l.keyword("id"),(()=>{const G=Y.call(null);return l.truth_.call(null,G)?G:y})(),l.keyword("name"),a,l.keyword("slug"),m,l.keyword("fields"),x,l.keyword("created-at"),new Date,l.keyword("content-item-count"),0)},$=function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("anti-forgery-token")),a=l.get.call(null,e,l.keyword("content-type")),m=l.get.call(null,e,l.keyword("class")),x=tl.call(null,l.vector(l.keyword("all-content-types-page/selection"))),G=l.nth.call(null,x,0,null),g=l.__destructure_map.call(null,G),E=l.get.call(null,g,l.keyword("all-content-types-page/selection")),w=l.nth.call(null,x,1,null),C=l.array_map(l.keyword("anti-forgery-token"),y,l.keyword("format"),l.keyword("transit")),S=el.call(null,function(I,L){return h.debounce.call(null,function(s,p,f){s.preventDefault();const n=l.assoc.call(null,f,L,s.target.value),d=l.assoc.call(null,C,l.keyword("body"),l.merge.call(null,l.array_map(l.keyword("content-type-id"),I,l.keyword("content-field-id"),l.keyword("id").call(null,n)),l.select_keys.call(null,n,l.vector(l.keyword("name"),l.keyword("type"),l.keyword("rank")))));return U.post.call(null,"/api/update-content-type-field",d)},h.default_debounce_timeout_ms)}),K=function(I,L,s){if(I.preventDefault(),l.truth_.call(null,confirm(l.str.call(null,'Are you sure you want to delete "',l.keyword("name").call(null,s),'"?')))){const p=l.assoc.call(null,C,l.keyword("body"),l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,L),l.keyword("content-field-id"),l.keyword("id").call(null,s)));return U.post.call(null,"/api/delete-content-type-field",p)}},A=S.call(null,l.keyword("id").call(null,a),l.keyword("name")),R=S.call(null,l.keyword("id").call(null,a),l.keyword("type"));return l.vector(l.keyword("form"),l.array_map(l.keyword("method"),"post",l.keyword("class"),m),l.vector(l.keyword("input"),l.array_map(l.keyword("id"),"__anti-forgery-token",l.keyword("name"),"__anti-forgery-token",l.keyword("type"),"hidden",l.keyword("value"),y)),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-id",l.keyword("value"),l.keyword("id").call(null,a))),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-name",l.keyword("value"),l.keyword("name").call(null,a))),l.vector(l.keyword("div"),function L(s){return new l.LazySeq(null,function(){let p=s;for(;;){const f=l.seq.call(null,p);if(l.truth_.call(null,f)){const n=f;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,n))){const d=l.chunk_first.call(null,n),k=l.count.call(null,d),t=l.chunk_buffer.call(null,k);return(()=>{let o=0;for(;;){if(o<k){const u=l._nth.call(null,d,o);l.chunk_append.call(null,t,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-2 pb-2 pt-2 flex items-center group",l.keyword("key"),l.keyword("id").call(null,u)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("on-focus"),function(_){return w.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),u))},l.keyword("size"),l.keyword("text-medium"),l.keyword("class"),l.str.call(null,"px-2 py-1 font-semibold border border-gray-200 ","rounded-[6px] mr-4 max-w-xl"),l.keyword("placeholder"),"Field Name",l.keyword("name"),l.keyword("field-name"),l.keyword("readonly"),!0,l.keyword("default-value"),l.keyword("name").call(null,u))),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-type")),l.vector(h.select,l.array_map(l.keyword("name"),l.keyword("field-type"),l.keyword("on-focus"),function(_){return w.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),u))},l.keyword("default-value"),l.keyword("type").call(null,u)),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text"),l.keyword("value"),"text"),"Text"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text-lg"),l.keyword("value"),"text-lg"),"Text (Large)"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("number"),l.keyword("value"),"number"),"Number"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("choice"),l.keyword("value"),"choice"),"Choice"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("group"),l.keyword("value"),"group"),"Group"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("media"),l.keyword("value"),"media"),"Media"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("datetime"),l.keyword("value"),"datetime"),"Date and Time")))),o=l.unchecked_inc.call(null,o);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,t),L.call(null,l.chunk_rest.call(null,n))):l.chunk_cons.call(null,l.chunk.call(null,t),null)}else{const d=l.first.call(null,n);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-2 pb-2 pt-2 flex items-center group",l.keyword("key"),l.keyword("id").call(null,d)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("on-focus"),function(k){return w.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),d))},l.keyword("size"),l.keyword("text-medium"),l.keyword("class"),l.str.call(null,"px-2 py-1 font-semibold border border-gray-200 ","rounded-[6px] mr-4 max-w-xl"),l.keyword("placeholder"),"Field Name",l.keyword("name"),l.keyword("field-name"),l.keyword("readonly"),!0,l.keyword("default-value"),l.keyword("name").call(null,d))),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-type")),l.vector(h.select,l.array_map(l.keyword("name"),l.keyword("field-type"),l.keyword("on-focus"),function(k){return w.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),d))},l.keyword("default-value"),l.keyword("type").call(null,d)),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text"),l.keyword("value"),"text"),"Text"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text-lg"),l.keyword("value"),"text-lg"),"Text (Large)"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("number"),l.keyword("value"),"number"),"Number"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("choice"),l.keyword("value"),"choice"),"Choice"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("group"),l.keyword("value"),"group"),"Group"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("media"),l.keyword("value"),"media"),"Media"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("datetime"),l.keyword("value"),"datetime"),"Date and Time"))),L.call(null,l.rest.call(null,n)))}}break}},null,null)}.call(null,l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,a)))))},gl=function(r,c){return l.into.call(null,l.array_map(),l.map.call(null,function(e){return l.vector(r.call(null,e),e)},c))},V=l.vector(l.array_map(l.keyword("label"),"Text",l.keyword("description"),"Ask for text with optional formatting.",l.keyword("type"),l.keyword("text")),l.array_map(l.keyword("label"),"Date and Time",l.keyword("description"),"Ask for a date and time with a date picker.",l.keyword("type"),l.keyword("datetime")),l.array_map(l.keyword("label"),"Number",l.keyword("description"),"Ask for a whole number or a decimal.",l.keyword("type"),l.keyword("number")),l.array_map(l.keyword("label"),"Media",l.keyword("description"),"Ask for an image or video.",l.keyword("type"),l.keyword("media")),l.array_map(l.keyword("label"),"Choice",l.keyword("description"),"Ask for a choice between multiple options.",l.keyword("type"),l.keyword("choice")),l.array_map(l.keyword("label"),"Group",l.keyword("description"),"Combine multiple fields into a group.",l.keyword("type"),l.keyword("group"))),ul=function(r){const c=r,e=l.__destructure_map.call(null,c),y=e,a=l.get.call(null,e,l.keyword("anti-forgery-token")),m=tl.call(null,l.vector(l.keyword("all-content-types-page/selection"),l.keyword("model/content-types-index"))),x=l.nth.call(null,m,0,null),G=l.__destructure_map.call(null,x),g=l.get.call(null,G,l.keyword("all-content-types-page/selection")),E=l.get.call(null,G,l.keyword("model/content-types-index")),w=l.nth.call(null,m,1,null),C=fl.call(null,function(){return w.call(null,l.keyword("init"),l.select_keys.call(null,y,l.vector(l.keyword("content-types"))))},[]),S=l.array_map(l.keyword("anti-forgery-token"),a,l.keyword("format"),l.keyword("transit")),K=el.call(null,h.debounce.call(null,function(s,p){const f=s.target.value,n=l.select_keys.call(null,l.assoc.call(null,p,l.keyword("name"),f),l.vector(l.keyword("id"),l.keyword("name"))),d=l.assoc.call(null,S,l.keyword("body"),l.array_map(l.keyword("content-type"),n));return U.post.call(null,"/api/update-content-type",d)},h.default_debounce_timeout_ms)),A=function(s){const p=cl.call(null,l.array_map(l.keyword("name"),"New Content Type",l.keyword("slug"),"new-content-type",l.keyword("fields"),l.vector()));return s.preventDefault(),U.post.call(null,"/api/new-content-type",S)},R=function(s,p){if(l.truth_.call(null,confirm(l.str.call(null,'Are you sure you want to delete "',l.keyword("name").call(null,p),'"?')))){const f=l.assoc.call(null,S,l.keyword("body"),l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,p)));return s.preventDefault(),U.post.call(null,"/api/delete-content-type",f)}},I=function(s,p,f){s.preventDefault();const n=l.apply.call(null,l.max,0,l.map.call(null,l.keyword("rank"),l.keyword("fields").call(null,p)))+1,d=l.assoc.call(null,ol.call(null,f),l.keyword("rank"),n),k=l.assoc.call(null,S,l.keyword("body"),l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,p)));return U.post.call(null,"/api/new-content-type-field",k)},L=l.sort_by.call(null,l.keyword("created-at"),l._GT_,l.vals.call(null,E));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex",l.keyword("onClick"),function(s){return l.truth_.call(null,s.target.closest("[data-content-type-id]"))?null:w.call(null,l.keyword("all-content-types-page/clear-selection"))}),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex-grow"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pr-[384px]"),l.vector(D.box,l.array_map(l.keyword("class"),"pb-4",l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center"),l.vector(l.keyword("div"),"Content Types")),l.keyword("content"),l.vector(D.content_item_counts,l.array_map(l.keyword("content-types"),L)))),function p(f){return new l.LazySeq(null,function(){let n=f;for(;;){const d=l.seq.call(null,n);if(l.truth_.call(null,d)){const k=d;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,k))){const t=l.chunk_first.call(null,k),o=l.count.call(null,t),u=l.chunk_buffer.call(null,o);return(()=>{let i=0;for(;;){if(i<o){const _=l._nth.call(null,t,i);l.chunk_append.call(null,u,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,_),l.keyword("data-content-type-id"),l.keyword("id").call(null,_)),l.vector(D.box,l.array_map(l.keyword("on-click"),function(b){return l.truth_.call(null,(()=>{const T=b.target.closest("input");return l.truth_.call(null,T)?T:b.target.closest("select")})())?null:w.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),_))},l.keyword("on-drag-over"),function(b){return b.preventDefault()},l.keyword("on-drop"),function(b){return w.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),_))},l.keyword("selected"),(()=>{const b=l.not.call(null,l.keyword("content-type-field").call(null,g));return l.truth_.call(null,b)?l._EQ_.call(null,l.get_in.call(null,g,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,_)):b})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,_))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,_)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,_)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector($,l.array_map(l.keyword("content-type"),_,l.keyword("anti-forgery-token"),a))):null)))),i=l.unchecked_inc.call(null,i);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,u),p.call(null,l.chunk_rest.call(null,k))):l.chunk_cons.call(null,l.chunk.call(null,u),null)}else{const t=l.first.call(null,k);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,t),l.keyword("data-content-type-id"),l.keyword("id").call(null,t)),l.vector(D.box,l.array_map(l.keyword("on-click"),function(o){return l.truth_.call(null,(()=>{const u=o.target.closest("input");return l.truth_.call(null,u)?u:o.target.closest("select")})())?null:w.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),t))},l.keyword("on-drag-over"),function(o){return o.preventDefault()},l.keyword("on-drop"),function(o){return w.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),t))},l.keyword("selected"),(()=>{const o=l.not.call(null,l.keyword("content-type-field").call(null,g));return l.truth_.call(null,o)?l._EQ_.call(null,l.get_in.call(null,g,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,t)):o})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,t))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,t)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,t)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector($,l.array_map(l.keyword("content-type"),t,l.keyword("anti-forgery-token"),a))):null))),p.call(null,l.rest.call(null,k)))}}break}},null,null)}.call(null,L))),(()=>{const s=function(p){const f=p,n=l.__destructure_map.call(null,f),d=n,k=l.get.call(null,n,l.keyword("label")),t=l.get.call(null,n,l.keyword("description"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"border border-gray-200 rounded-[6px] p-2 mb-4 bg-gray-50 cursor-move",l.keyword("draggable"),!0,l.keyword("onDragStart"),function(o){return w.call(null,l.keyword("all-content-types-page/drag-start"),d),l.println.call(null,l.keyword("onDragStart"),o)}),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"font-semibold"),k),l.vector(l.keyword("p"),l.array_map(l.keyword("class"),"text-sm text-gray-500"),t))};return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pl-2 w-[376px] fixed right-0 bottom-0 top-12"),l.truth_.call(null,g)?l.truth_.call(null,l.keyword("content-type-field").call(null,g))?l.vector(D.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"italic"),"Field: "),l.get_in.call(null,g,l.vector(l.keyword("content-type-field"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-8"),l.vector(l.keyword("h2"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold"),"Info")),l.vector(l.keyword("div"),l.vector(l.keyword("h2"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold"),"Conditions"),l.vector(l.keyword("p"),"foo"))))):l.truth_.call(null,l.keyword("content-type").call(null,g))?l.vector(D.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"italic"),"Content Type: "),l.get_in.call(null,g,l.vector(l.keyword("content-type"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Add Field"),l.vector(l.keyword("div"),function f(n){return new l.LazySeq(null,function(){let d=n;for(;;){const k=l.seq.call(null,d);if(l.truth_.call(null,k)){const t=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,t))){const o=l.chunk_first.call(null,t),u=l.count.call(null,o),i=l.chunk_buffer.call(null,u);return(()=>{let _=0;for(;;){if(_<u){const z=l._nth.call(null,o,_);l.chunk_append.call(null,i,s.call(null,z)),_=l.unchecked_inc.call(null,_);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,i),f.call(null,l.chunk_rest.call(null,t))):l.chunk_cons.call(null,l.chunk.call(null,i),null)}else{const o=l.first.call(null,t);return l.cons.call(null,s.call(null,o),f.call(null,l.rest.call(null,t)))}}break}},null,null)}.call(null,V))))):null:l.vector(D.box,l.array_map(l.keyword("class"),"h-full",l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div"),function f(n){return new l.LazySeq(null,function(){let d=n;for(;;){const k=l.seq.call(null,d);if(l.truth_.call(null,k)){const t=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,t))){const o=l.chunk_first.call(null,t),u=l.count.call(null,o),i=l.chunk_buffer.call(null,u);return(()=>{let _=0;for(;;){if(_<u){const z=l._nth.call(null,o,_);l.chunk_append.call(null,i,s.call(null,z)),_=l.unchecked_inc.call(null,_);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,i),f.call(null,l.chunk_rest.call(null,t))):l.chunk_cons.call(null,l.chunk.call(null,i),null)}else{const o=l.first.call(null,t);return l.cons.call(null,s.call(null,o),f.call(null,l.rest.call(null,t)))}}break}},null,null)}.call(null,V))))))})())};h.add_element.call(null,l.keyword("all-content-types-page"),D.wrap_component.call(null,ul),l.array_map(l.keyword("format"),l.keyword("transit")));var dl=l.vector("January","February","March","April","May","June","July","August","September","October","November","December"),_l=function(r){const c=r.getMonth(),e=r.getDate(),y=r.getFullYear(),a=r.getHours(),m=r.getMinutes(),x=l.get.call(null,dl,c),G=a<12?"AM":"PM",g=l.mod.call(null,a,12),E=g===0?12:g,w=m<10?l.str.call(null,"0",m):l.str.call(null,m);return l.str.call(null,x," ",e,", ",y," ",E,":",w," ",G)},yl=l.vector(l.array_map(l.keyword("name"),"Title",l.keyword("value"),function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("fields"));return l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),l.get.call(null,y,"Title"))}),l.array_map(l.keyword("name"),"Author",l.keyword("value"),function(r){const c=r,e=l.__destructure_map.call(null,c),a=l.get.call(null,e,l.keyword("created-by")),m=l.__destructure_map.call(null,a),x=l.get.call(null,m,l.keyword("username"));return l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),x)}),l.array_map(l.keyword("name"),"Date",l.keyword("value"),function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("created-at")),a=l.get.call(null,e,l.keyword("updated-at")),m=(()=>{const G=a;return l.truth_.call(null,G)?G:y})(),x=m==null?null:new Date(m);return x==null?null:_l.call(null,x)})),sl=function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("content-type")),a=l.get.call(null,e,l.keyword("content-items")),m=l.get.call(null,e,l.keyword("anti-forgery-token")),x=l.array_map(l.keyword("anti-forgery-token"),m,l.keyword("format"),l.keyword("transit")),G=l.map.call(null,function(E){return l.update.call(null,E,l.keyword("fields"),function(w){return l.update_keys.call(null,w,l.name)})},a),g=function(E,w){const C=l.array_map(l.keyword("content-item-id"),l.keyword("id").call(null,w)),S=function(A,R){if(l.truth_.call(null,R))return l.println.call(null,R)},K=l.merge.call(null,x,l.array_map(l.keyword("body"),C,l.keyword("on-complete"),S));return U.post.call(null,"/api/delete-content-item",K)};return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4"),l.vector(D.table,l.array_map(l.keyword("title"),l.keyword("name").call(null,y),l.keyword("columns"),yl,l.keyword("rows"),l.map.call(null,function(E){return l.assoc.call(null,E,l.keyword("content-type"),y)},G),l.keyword("delete-row"),g)))};h.add_element.call(null,l.keyword("single-content-type-page"),D.wrap_component.call(null,sl),l.array_map(l.keyword("format"),l.keyword("transit")));var kl=function(r){const c=r,e=l.__destructure_map.call(null,c),y=e,a=l.get.call(null,e,l.keyword("on-start"));return null},W=function(r){return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"editor bg-white"),l.vector(kl,r))},il=function(r){return r.getSemanticHTML()},wl=l.uuid.call(null,"cd334826-1ec6-4906-8e7f-16ece1865faf"),pl=l.uuid.call(null,"6bd0ff7a-b720-4972-b98a-2aa85d179357"),ml=function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("message"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center p-4 mb-4 text-sm text-green-800 border border-green-300 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400 dark:border-green-800",l.keyword("role"),"alert"),l.vector(l.keyword("svg"),l.array_map(l.keyword("class"),"flex-shrink-0 inline w-4 h-4 me-3",l.keyword("aria-hidden"),"true",l.keyword("xmlns"),"http://www.w3.org/2000/svg",l.keyword("fill"),"currentColor",l.keyword("viewBox"),"0 0 20 20"),l.vector(l.keyword("path"),l.array_map(l.keyword("d"),"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"))),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"sr-only"),"Info"),l.vector(l.keyword("div"),y))},bl=function(r){const c=r,e=l.__destructure_map.call(null,c),y=l.get.call(null,e,l.keyword("anti-forgery-token")),a=l.get.call(null,e,l.keyword("submit-form-url")),m=l.get.call(null,e,l.keyword("submitting-button-text")),x=l.get.call(null,e,l.keyword("content-item")),G=l.get.call(null,e,l.keyword("title")),g=l.get.call(null,e,l.keyword("submit-button-text")),E=l.get.call(null,e,l.keyword("content-type")),w=l.get.call(null,e,l.keyword("site-base-url")),C=l.get.call(null,e,l.keyword("submit-button-class")),S=l.array_map(l.keyword("anti-forgery-token"),y,l.keyword("format"),l.keyword("transit")),K=!1,A=l.array_map(l.keyword("form-fields"),(()=>{const n=l.keyword("document").call(null,x);return l.truth_.call(null,n)?n:l.array_map()})()),R=l.vector(),I=function(n,d){return null},L=function(n){return null},s=function(n,d){const k=n.target.value;return null},p=function(n,d){const k=d,t=l.__destructure_map.call(null,k),o=l.get.call(null,t,l.keyword("content-item-slug"));n.preventDefault();const u=null,i=l.get_in.call(null,u,l.vector(l.keyword("content-item"),l.keyword("form-fields"))),_=l.update_vals.call(null,l.keyword("editors").call(null,u),il),z=l.merge.call(null,i,_,l.array_map(pl,o)),b=(()=>{const q=l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,E),l.keyword("document"),z);return l.truth_.call(null,A)?l.assoc.call(null,q,l.keyword("content-item-id"),l.keyword("id").call(null,A)):q})(),T=function(q,v){return l.println.call(null,q),l.truth_.call(null,v)?l.println.call(null,v):l.truth_.call(null,A)?L.call(null,l.vector(ml,l.array_map(l.keyword("message"),l.vector(l.keyword("span.font-semibold"),B.capitalize.call(null,B.singular.call(null,l.name.call(null,l.keyword("slug").call(null,E))))," updated!")))):window.location=l.str.call(null,"/admin/content-types/",l.name.call(null,l.keyword("slug").call(null,E)),"/",l.keyword("content-item-slug").call(null,q))},M=l.assoc.call(null,l.assoc.call(null,S,l.keyword("body"),b),l.keyword("on-complete"),T);return U.post.call(null,a,M)},f=null;return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pt-0"),D.box.call(null,l.array_map(l.keyword("title"),G,l.keyword("content"),(()=>{const n=(()=>{const u=l.get_in.call(null,A,l.vector(l.keyword("fields"),"Slug"));if(l.truth_.call(null,u))return u;{const i=l.get_in.call(null,A,l.vector(l.keyword("form-fields"),wl));return i==null?null:al.call(null,i)}})(),d=l.array_map(l.keyword("content-type-slug"),l.keyword("slug").call(null,E),l.keyword("content-item-slug"),n),k=null,t=l.truth_.call(null,vl.blank_QMARK_.call(null,n))?null:l.str.call(null,w),o=l.map_indexed.call(null,l.vector,l.remove.call(null,l.comp.call(null,l.hash_set("Slug"),l.keyword("name")),l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,E))));return l.vector(l.keyword("div"),function i(_){return new l.LazySeq(null,function(){let z=_;for(;;){const b=l.seq.call(null,z);if(l.truth_.call(null,b)){const T=b;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,T))){const M=l.chunk_first.call(null,T),q=l.count.call(null,M),v=l.chunk_buffer.call(null,q);return(()=>{let N=0;for(;;){if(N<q){const O=l._nth.call(null,M,N);l.chunk_append.call(null,v,O),N=l.unchecked_inc.call(null,N);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,v),i.call(null,l.chunk_rest.call(null,T))):l.chunk_cons.call(null,l.chunk.call(null,v),null)}else{const M=l.first.call(null,T);return l.cons.call(null,M,i.call(null,l.rest.call(null,T)))}}break}},null,null)}.call(null,l.distinct.call(null,R)),l.vector(l.keyword("form"),l.array_map(l.keyword("on-submit"),function(u){return p.call(null,u,l.array_map(l.keyword("content-item-slug"),n))}),l.vector(l.keyword("div"),function i(_){return new l.LazySeq(null,function(){let z=_;for(;;){const b=l.seq.call(null,z);if(l.truth_.call(null,b)){const T=b;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,T))){const M=l.chunk_first.call(null,T),q=l.count.call(null,M),v=l.chunk_buffer.call(null,q);return(()=>{let N=0;for(;;){if(N<q){const O=l._nth.call(null,M,N),J=l.nth.call(null,O,0,null),Q=l.nth.call(null,O,1,null),Z=Q,H=l.__destructure_map.call(null,Z),P=l.get.call(null,H,l.keyword("type")),F=l.get.call(null,H,l.keyword("name"));l.chunk_append.call(null,v,l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,Q)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"mb-2 pb-2 pt-2 ",l.truth_.call(null,l._EQ_.call(null,J,l.count.call(null,o)-1))?null:"border-b")),(()=>{const X=P,ll=l.truth_.call(null,l.keyword_QMARK_.call(null,X))?l.subs.call(null,l.str.call(null,X),1):null;switch(ll){case"text":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("class"),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,Q),"Title"))?"w-full":null,l.keyword("name"),F,l.keyword("placeholder"),F,l.keyword("default-value"),l.get_in.call(null,A,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,Q))),l.keyword("on-change"),function(j){return s.call(null,j,l.keyword("id").call(null,Q))}));case"text-lg":return l.vector(W,l.array_map(l.keyword("class"),"h-72",l.keyword("html"),l.get_in.call(null,A,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,Q))),l.keyword("on-start"),function(j){return I.call(null,l.keyword("id").call(null,Q),j)}));case"choice":return l.vector(h.select);case"datetime":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),F,l.keyword("placeholder"),F));case"number":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("number"),l.keyword("name"),F,l.keyword("placeholder"),F));default:throw new Error(l.str.call(null,"No matching clause: ",ll))}})(),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,Q),"Title"))?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mt-2 text-sm"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-500"),"Permalink: "),l.truth_.call(null,t)?l.vector(l.keyword("a"),l.array_map(l.keyword("class"),"underline",l.keyword("href"),t),t):l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-400"),w,"/\u2026")):null))),N=l.unchecked_inc.call(null,N);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,v),i.call(null,l.chunk_rest.call(null,T))):l.chunk_cons.call(null,l.chunk.call(null,v),null)}else{const M=l.first.call(null,T),q=l.nth.call(null,M,0,null),v=l.nth.call(null,M,1,null),N=v,O=l.__destructure_map.call(null,N),J=l.get.call(null,O,l.keyword("type")),Q=l.get.call(null,O,l.keyword("name"));return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,v)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"mb-2 pb-2 pt-2 ",l.truth_.call(null,l._EQ_.call(null,q,l.count.call(null,o)-1))?null:"border-b")),(()=>{const Z=J,H=l.truth_.call(null,l.keyword_QMARK_.call(null,Z))?l.subs.call(null,l.str.call(null,Z),1):null;switch(H){case"text":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("class"),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,v),"Title"))?"w-full":null,l.keyword("name"),Q,l.keyword("placeholder"),Q,l.keyword("default-value"),l.get_in.call(null,A,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,v))),l.keyword("on-change"),function(P){return s.call(null,P,l.keyword("id").call(null,v))}));case"text-lg":return l.vector(W,l.array_map(l.keyword("class"),"h-72",l.keyword("html"),l.get_in.call(null,A,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,v))),l.keyword("on-start"),function(P){return I.call(null,l.keyword("id").call(null,v),P)}));case"choice":return l.vector(h.select);case"datetime":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),Q,l.keyword("placeholder"),Q));case"number":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("number"),l.keyword("name"),Q,l.keyword("placeholder"),Q));default:throw new Error(l.str.call(null,"No matching clause: ",H))}})(),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,v),"Title"))?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mt-2 text-sm"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-500"),"Permalink: "),l.truth_.call(null,t)?l.vector(l.keyword("a"),l.array_map(l.keyword("class"),"underline",l.keyword("href"),t),t):l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-400"),w,"/\u2026")):null)),i.call(null,l.rest.call(null,T)))}}break}},null,null)}.call(null,o),l.vector(l.keyword("button"),l.array_map(l.keyword("type"),l.keyword("submit"),l.keyword("class"),l.str.call(null,"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",C),l.keyword("disabled"),K),l.truth_.call(null,K)?l.vector(l.keyword("span"),l.vector(h.spinner),m):g))))})())))};export{cl as __GT_content_type,ol as __GT_field,al as __GT_slug,ul as all_content_types_page,yl as columns,$ as content_type_fields_form,bl as content_type_new_item_form,W as editor,kl as editor_impl,V as field_config,_l as format_datetime,gl as index_by,dl as months,nl as quill_defaults,il as quill_get_semantic_html,rl as quill_toolbar,Y as random_uuid,sl as single_content_type_page,pl as slug_field_id,hl as start_quill_BANG_,ml as success_alert,wl as title_field_id};
