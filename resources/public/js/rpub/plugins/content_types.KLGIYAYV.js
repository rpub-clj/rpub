import*as l from"cherry-cljs/cljs.core.js";import{useEffect as Z}from"react";import*as D from"rads.inflections";import*as Q from"rpub.admin.impl";import{use_dag as K}from"rpub.lib.dag.react";import*as g from"rpub.lib.html";import*as P from"rpub.lib.http";import*as S from"rpub.lib.reagent";var ll=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("name")),t=l.get.call(null,e,l.keyword("type"));return l.array_map(l.keyword("id"),l.random_uuid.call(null),l.keyword("name"),u,l.keyword("type"),t)},el=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("id")),t=l.get.call(null,e,l.keyword("name")),y=l.get.call(null,e,l.keyword("slug")),d=l.get.call(null,e,l.keyword("fields"));return l.array_map(l.keyword("id"),(()=>{const p=l.random_uuid.call(null);return l.truth_.call(null,p)?p:u})(),l.keyword("name"),t,l.keyword("slug"),y,l.keyword("fields"),d,l.keyword("created-at"),new Date,l.keyword("content-item-count"),0)},T=function(o){const _=l.keyword("type").call(null,o);switch(l.truth_.call(null,l.keyword_QMARK_.call(null,_))?l.subs.call(null,l.str.call(null,_),1):null){case"text":return"Text";case"text-lg":return"Text (Large)";default:return l.name.call(null,l.keyword("type").call(null,o))}},L=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("anti-forgery-token")),t=l.get.call(null,e,l.keyword("content-type")),y=l.get.call(null,e,l.keyword("class")),d=K.call(null,l.vector(l.keyword("all-content-types-page/selection"))),p=l.nth.call(null,d,0,null),q=l.__destructure_map.call(null,p),m=l.get.call(null,q,l.keyword("all-content-types-page/selection")),b=l.nth.call(null,d,1,null),G=l.array_map(l.keyword("format"),l.keyword("transit"));return l.vector(l.keyword("form"),l.array_map(l.keyword("method"),"post",l.keyword("class"),y),l.vector(l.keyword("input"),l.array_map(l.keyword("id"),"__anti-forgery-token",l.keyword("name"),"__anti-forgery-token",l.keyword("type"),"hidden",l.keyword("value"),u)),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-id",l.keyword("value"),l.keyword("id").call(null,t))),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-name",l.keyword("value"),l.keyword("name").call(null,t))),l.vector(l.keyword("div"),function f(h){return new l.LazySeq(null,function(){let v=h;for(;;){const s=l.seq.call(null,v);if(l.truth_.call(null,s)){const r=s;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,r))){const n=l.chunk_first.call(null,r),i=l.count.call(null,n),a=l.chunk_buffer.call(null,i);return(()=>{let c=0;for(;;){if(c<i){const w=l._nth.call(null,n,c),x=(()=>{const E=l._EQ_.call(null,l.get_in.call(null,m,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,t));return l.truth_.call(null,E)?l._EQ_.call(null,l.get_in.call(null,m,l.vector(l.keyword("content-type-field"),l.keyword("id"))),l.keyword("id").call(null,w)):E})();l.chunk_append.call(null,a,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"my-2 flex items-center","w-full font-semibold border ","rounded-[6px] hover:border-blue-500 ",l.truth_.call(null,x)?"ring-2 ring-blue-400 border-blue-500":"border-gray-200"),l.keyword("data-content-type-field-id"),l.keyword("id").call(null,w),l.keyword("key"),l.keyword("id").call(null,w)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(l.keyword("div.w-full.pl-2.py-2"),l.array_map(l.keyword("onClick"),function(E){return b.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),t,l.keyword("content-type-field"),w))}),l.keyword("name").call(null,w)),l.vector(l.keyword("div.bg-gray-50.px-2.py-2.border-l.border-l-gray-200"),l.array_map(l.keyword("class"),"min-w-[150px] rounded-r-[6px]",l.keyword("onClick"),function(E){return b.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),t,l.keyword("content-type-field"),w))}),l.vector(T,w)))),c=l.unchecked_inc.call(null,c);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,a),f.call(null,l.chunk_rest.call(null,r))):l.chunk_cons.call(null,l.chunk.call(null,a),null)}else{const n=l.first.call(null,r),i=(()=>{const a=l._EQ_.call(null,l.get_in.call(null,m,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,t));return l.truth_.call(null,a)?l._EQ_.call(null,l.get_in.call(null,m,l.vector(l.keyword("content-type-field"),l.keyword("id"))),l.keyword("id").call(null,n)):a})();return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"my-2 flex items-center","w-full font-semibold border ","rounded-[6px] hover:border-blue-500 ",l.truth_.call(null,i)?"ring-2 ring-blue-400 border-blue-500":"border-gray-200"),l.keyword("data-content-type-field-id"),l.keyword("id").call(null,n),l.keyword("key"),l.keyword("id").call(null,n)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(l.keyword("div.w-full.pl-2.py-2"),l.array_map(l.keyword("onClick"),function(a){return b.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),t,l.keyword("content-type-field"),n))}),l.keyword("name").call(null,n)),l.vector(l.keyword("div.bg-gray-50.px-2.py-2.border-l.border-l-gray-200"),l.array_map(l.keyword("class"),"min-w-[150px] rounded-r-[6px]",l.keyword("onClick"),function(a){return b.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),t,l.keyword("content-type-field"),n))}),l.vector(T,n))),f.call(null,l.rest.call(null,r)))}}break}},null,null)}.call(null,l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,t)))))},z=l.vector(l.array_map(l.keyword("label"),"Text",l.keyword("description"),"Ask for text with optional formatting.",l.keyword("type"),l.keyword("text")),l.array_map(l.keyword("label"),"Date and Time",l.keyword("description"),"Ask for a date and time with a date picker.",l.keyword("type"),l.keyword("datetime")),l.array_map(l.keyword("label"),"Number",l.keyword("description"),"Ask for a whole number or a decimal.",l.keyword("type"),l.keyword("number")),l.array_map(l.keyword("label"),"Media",l.keyword("description"),"Ask for an image or video.",l.keyword("type"),l.keyword("media")),l.array_map(l.keyword("label"),"Choice",l.keyword("description"),"Ask for a choice between multiple options.",l.keyword("type"),l.keyword("choice")),l.array_map(l.keyword("label"),"Group",l.keyword("description"),"Combine multiple fields into a group.",l.keyword("type"),l.keyword("group"))),N=function(o){const _=K.call(null,l.vector(l.keyword("all-content-types-page/selection"),l.keyword("model/content-types-index"))),e=l.nth.call(null,_,0,null),u=l.__destructure_map.call(null,e),t=l.get.call(null,u,l.keyword("all-content-types-page/selection")),y=l.get.call(null,u,l.keyword("model/content-types-index")),d=l.nth.call(null,_,1,null),p=Z.call(null,function(){return d.call(null,l.keyword("init"),l.select_keys.call(null,o,l.vector(l.keyword("content-types"))))},[]),q=l.array_map(l.keyword("format"),l.keyword("transit")),m=function(G,k){return l.println.call(null,confirm(l.str.call(null,'Are you sure you want to delete the "',l.keyword("name").call(null,k),'" field?')))},b=l.sort_by.call(null,l.keyword("created-at"),l._GT_,l.vals.call(null,y));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex",l.keyword("onClick"),function(G){return l.truth_.call(null,(()=>{const k=G.target.closest("[data-no-select]");return l.truth_.call(null,k)?k:G.target.closest("[data-content-type-field-id]")})())?null:d.call(null,l.keyword("all-content-types-page/clear-selection"))}),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex-grow"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pr-[384px]"),l.vector(Q.box,l.array_map(l.keyword("class"),"pb-4",l.keyword("data-no-select"),!0,l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center"),l.vector(l.keyword("div"),"Content Types")),l.keyword("content"),l.vector(Q.content_item_counts,l.array_map(l.keyword("content-types"),b)))),function k(f){return new l.LazySeq(null,function(){let h=f;for(;;){const v=l.seq.call(null,h);if(l.truth_.call(null,v)){const s=v;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,s))){const r=l.chunk_first.call(null,s),n=l.count.call(null,r),i=l.chunk_buffer.call(null,n);return(()=>{let a=0;for(;;){if(a<n){const c=l._nth.call(null,r,a);l.chunk_append.call(null,i,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,c),l.keyword("data-no-select"),!0),l.vector(Q.box,l.array_map(l.keyword("hover"),!0,l.keyword("on-click"),function(x){return l.truth_.call(null,x.target.closest("[data-content-type-field-id]"))?null:d.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),c))},l.keyword("on-drag-over"),function(x){return x.preventDefault()},l.keyword("on-drop"),function(x){return d.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),c))},l.keyword("selected"),(()=>{const x=l.not.call(null,l.keyword("content-type-field").call(null,t));return l.truth_.call(null,x)?l._EQ_.call(null,l.get_in.call(null,t,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,c)):x})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,c))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,c)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,c)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector(L,l.array_map(l.keyword("content-type"),c))):null)))),a=l.unchecked_inc.call(null,a);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,i),k.call(null,l.chunk_rest.call(null,s))):l.chunk_cons.call(null,l.chunk.call(null,i),null)}else{const r=l.first.call(null,s);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,r),l.keyword("data-no-select"),!0),l.vector(Q.box,l.array_map(l.keyword("hover"),!0,l.keyword("on-click"),function(n){return l.truth_.call(null,n.target.closest("[data-content-type-field-id]"))?null:d.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),r))},l.keyword("on-drag-over"),function(n){return n.preventDefault()},l.keyword("on-drop"),function(n){return d.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),r))},l.keyword("selected"),(()=>{const n=l.not.call(null,l.keyword("content-type-field").call(null,t));return l.truth_.call(null,n)?l._EQ_.call(null,l.get_in.call(null,t,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,r)):n})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,r))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,r)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,r)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector(L,l.array_map(l.keyword("content-type"),r))):null))),k.call(null,l.rest.call(null,s)))}}break}},null,null)}.call(null,b))),(()=>{const G=function(k){const f=k,h=l.__destructure_map.call(null,f),v=h,s=l.get.call(null,h,l.keyword("label")),r=l.get.call(null,h,l.keyword("description")),n=l.get.call(null,h,l.keyword("selected")),i=l.get.call(null,h,l.keyword("draggable"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"border rounded-[6px] p-2 mb-4 bg-gray-100 ",l.truth_.call(null,i)?"cursor-move hover:shadow-md border-gray-100":"cursor-pointer hover:border-blue-500"," ",l.truth_.call(null,n)?"ring-2 ring-blue-400 border-blue-500":"border-gray-100"),l.keyword("draggable"),i,l.keyword("onDragStart"),function(a){return d.call(null,l.keyword("all-content-types-page/drag-start"),v),l.println.call(null,l.keyword("onDragStart"),a)}),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"font-semibold"),s),l.vector(l.keyword("p"),l.array_map(l.keyword("class"),"text-sm text-gray-500"),r))};return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pl-2 w-[376px] fixed right-0 bottom-0 top-12",l.keyword("data-no-select"),!0),l.truth_.call(null,t)?l.truth_.call(null,l.keyword("content-type-field").call(null,t))?l.vector(Q.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span.italic.text-blue-600"),"Field: "),l.get_in.call(null,t,l.vector(l.keyword("content-type-field"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div.mb-8"),l.vector(g.action_button,l.array_map(l.keyword("class"),"mt-2 mr-2"),"Rename Field"),l.vector(g.delete_button,l.array_map(l.keyword("class"),"mt-2",l.keyword("on-click"),function(k){return m.call(null,k,l.keyword("content-type-field").call(null,t))}),"Delete Field")),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Change Field Type"),l.vector(l.keyword("div"),function f(h){return new l.LazySeq(null,function(){let v=h;for(;;){const s=l.seq.call(null,v);if(l.truth_.call(null,s)){const r=s;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,r))){const n=l.chunk_first.call(null,r),i=l.count.call(null,n),a=l.chunk_buffer.call(null,i);return(()=>{let c=0;for(;;){if(c<i){const w=l._nth.call(null,n,c);l.chunk_append.call(null,a,G.call(null,l.merge.call(null,w,l.array_map(l.keyword("selected"),l._EQ_.call(null,l.get_in.call(null,t,l.vector(l.keyword("content-type-field"),l.keyword("type"))),l.keyword("type").call(null,w)))))),c=l.unchecked_inc.call(null,c);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,a),f.call(null,l.chunk_rest.call(null,r))):l.chunk_cons.call(null,l.chunk.call(null,a),null)}else{const n=l.first.call(null,r);return l.cons.call(null,G.call(null,l.merge.call(null,n,l.array_map(l.keyword("selected"),l._EQ_.call(null,l.get_in.call(null,t,l.vector(l.keyword("content-type-field"),l.keyword("type"))),l.keyword("type").call(null,n))))),f.call(null,l.rest.call(null,r)))}}break}},null,null)}.call(null,z))))):l.truth_.call(null,l.keyword("content-type").call(null,t))?l.vector(Q.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span.italic.text-blue-600"),"Content Type: "),l.get_in.call(null,t,l.vector(l.keyword("content-type"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div.mb-8"),l.vector(g.action_button,l.array_map(l.keyword("class"),"mt-2 mr-2"),"Rename Content Type"),l.vector(g.delete_button,l.array_map(l.keyword("class"),"mt-2",l.keyword("on-click"),function(k){return m.call(null,k,l.keyword("content-type-field").call(null,t))}),"Delete Content Type")),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Add Field"),l.vector(l.keyword("div"),function f(h){return new l.LazySeq(null,function(){let v=h;for(;;){const s=l.seq.call(null,v);if(l.truth_.call(null,s)){const r=s;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,r))){const n=l.chunk_first.call(null,r),i=l.count.call(null,n),a=l.chunk_buffer.call(null,i);return(()=>{let c=0;for(;;){if(c<i){const w=l._nth.call(null,n,c);l.chunk_append.call(null,a,G.call(null,l.assoc.call(null,w,l.keyword("draggable"),!0))),c=l.unchecked_inc.call(null,c);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,a),f.call(null,l.chunk_rest.call(null,r))):l.chunk_cons.call(null,l.chunk.call(null,a),null)}else{const n=l.first.call(null,r);return l.cons.call(null,G.call(null,l.assoc.call(null,n,l.keyword("draggable"),!0)),f.call(null,l.rest.call(null,r)))}}break}},null,null)}.call(null,z))))):null:l.vector(Q.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),"Add Field"),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div"),function f(h){return new l.LazySeq(null,function(){let v=h;for(;;){const s=l.seq.call(null,v);if(l.truth_.call(null,s)){const r=s;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,r))){const n=l.chunk_first.call(null,r),i=l.count.call(null,n),a=l.chunk_buffer.call(null,i);return(()=>{let c=0;for(;;){if(c<i){const w=l._nth.call(null,n,c);l.chunk_append.call(null,a,G.call(null,l.assoc.call(null,w,l.keyword("draggable"),!0))),c=l.unchecked_inc.call(null,c);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,a),f.call(null,l.chunk_rest.call(null,r))):l.chunk_cons.call(null,l.chunk.call(null,a),null)}else{const n=l.first.call(null,r);return l.cons.call(null,G.call(null,l.assoc.call(null,n,l.keyword("draggable"),!0)),f.call(null,l.rest.call(null,r)))}}break}},null,null)}.call(null,z))))))})())};g.add_element.call(null,l.keyword("all-content-types-page"),Q.wrap_component.call(null,N),l.array_map(l.keyword("format"),l.keyword("transit")));var O=l.vector("January","February","March","April","May","June","July","August","September","October","November","December"),R=function(o){const _=o.getMonth(),e=o.getDate(),u=o.getFullYear(),t=o.getHours(),y=o.getMinutes(),d=l.get.call(null,O,_),p=t<12?"AM":"PM",q=l.mod.call(null,t,12),m=q===0?12:q,b=y<10?l.str.call(null,"0",y):l.str.call(null,y);return l.str.call(null,d," ",e,", ",u," ",m,":",b," ",p)},I=function(o){return l.str.call(null,"/admin/content-types/",l.name.call(null,l.get_in.call(null,o,l.vector(l.keyword("content-type"),l.keyword("slug")))),"/content-items/",l.name.call(null,l.get_in.call(null,o,l.vector(l.keyword("fields"),"Slug"))))},U=l.vector(l.array_map(l.keyword("name"),"Title",l.keyword("value"),function(o){const _=o,e=l.__destructure_map.call(null,_),u=e,t=l.get.call(null,e,l.keyword("fields"));return l.vector(l.keyword("a.underline"),l.array_map(l.keyword("href"),I.call(null,u)),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),l.get.call(null,t,"Title")))}),l.array_map(l.keyword("name"),"Author",l.keyword("value"),function(o){const _=o,e=l.__destructure_map.call(null,_),t=l.get.call(null,e,l.keyword("created-by")),y=l.__destructure_map.call(null,t),d=l.get.call(null,y,l.keyword("username"));return l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),d)}),l.array_map(l.keyword("name"),"Date",l.keyword("value"),function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("created-at")),t=l.get.call(null,e,l.keyword("updated-at")),y=(()=>{const p=t;return l.truth_.call(null,p)?p:u})(),d=y==null?null:new Date(y);return d==null?null:R.call(null,d)})),J=function(o){return l.str.call(null,"/admin/content-types/",l.name.call(null,l.keyword("slug").call(null,o)),"/content-items/new")},$=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("content-type")),t=l.get.call(null,e,l.keyword("content-items")),y=l.array_map(l.keyword("format"),l.keyword("transit")),d=l.map.call(null,function(m){return l.update.call(null,m,l.keyword("fields"),function(b){return l.update_keys.call(null,b,l.name)})},t),p=function(m,b){const G=l.array_map(l.keyword("content-item-id"),l.keyword("id").call(null,b)),k=function(h,v){if(l.truth_.call(null,v))return l.println.call(null,v)},f=l.merge.call(null,y,l.array_map(l.keyword("body"),G,l.keyword("on-complete"),k));return P.post.call(null,"/api/delete-content-item",f)},q=l.map.call(null,function(m){return l.assoc.call(null,m,l.keyword("content-type"),u)},d);return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4"),l.vector(Q.table,l.array_map(l.keyword("title"),l.keyword("name").call(null,u),l.keyword("columns"),U,l.keyword("rows"),q,l.keyword("header-buttons"),l.vector(l.keyword("a"),l.array_map(l.keyword("href"),J.call(null,u)),l.vector(g.action_button,l.str.call(null,"New ",D.singular.call(null,l.keyword("name").call(null,u))))),l.keyword("delete-row"),p)))};g.add_element.call(null,l.keyword("single-content-type-page"),Q.wrap_component.call(null,$),l.array_map(l.keyword("format"),l.keyword("transit")));var H=function(o){const _=o,e=l.__destructure_map.call(null,_),u=e,t=l.get.call(null,e,l.keyword("field")),y=l.get.call(null,e,l.keyword("editing")),d=l.get.call(null,e,l.keyword("creating")),p=l.get.call(null,e,l.keyword("value")),q=l.get.call(null,e,l.keyword("on-change"));return l.vector(g.input2,(()=>{const m=l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),l.str.call(null,l.keyword("key").call(null,t)),l.keyword("on-change"),q),b=l.truth_.call(null,y)?l.assoc.call(null,m,l.keyword("value"),p):m;return l.truth_.call(null,d)?l.assoc.call(null,b,l.keyword("placeholder"),T.call(null,t)):b})())};g.add_element.call(null,l.keyword("rpub-field-types-text"),S.reactify_component.call(null,H));var Y=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("field")),t=l.get.call(null,e,l.keyword("editing")),y=l.get.call(null,e,l.keyword("creating")),d=l.get.call(null,e,l.keyword("value"));return l.vector(g.textarea,(()=>{const p=l.array_map(l.keyword("name"),l.keyword("key").call(null,u),l.keyword("on-change"),l.prn),q=l.truth_.call(null,t)?l.assoc.call(null,p,l.keyword("value"),d):p;return l.truth_.call(null,y)?l.assoc.call(null,q,l.keyword("placeholder"),T.call(null,u)):q})())};g.add_element.call(null,l.keyword("rpub-field-types-text-lg"),S.reactify_component.call(null,Y));var j=function(o){return l.vector(l.keyword("select"))};g.add_element.call(null,l.keyword("rpub-field-types-choice"),S.reactify_component.call(null,j));var B=function(o){return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("datetime-local")))};g.add_element.call(null,l.keyword("rpub-field-types-datetime"),S.reactify_component.call(null,B));var V=function(o){return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("number")))};g.add_element.call(null,l.keyword("rpub-field-types-number"),S.reactify_component.call(null,V));var C=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("content-item")),t=l.get.call(null,e,l.keyword("editing")),y=l.get.call(null,e,l.keyword("creating")),d=l.get.call(null,e,l.keyword("field-types")),p=u,q=l.__destructure_map.call(null,p),m=l.get.call(null,q,l.keyword("content-type")),b=l.sort_by.call(null,function(G){const k=G,f=l.nth.call(null,k,0,null),h=l.nth.call(null,k,1,null),v=l.some.call(null,function(s){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,s),f)))return s},l.keyword("fields").call(null,m));return l.keyword("rank").call(null,v)},l.keyword("document").call(null,u));return l.vector(l.keyword("div"),function k(f){return new l.LazySeq(null,function(){let h=f;for(;;){const v=l.seq.call(null,h);if(l.truth_.call(null,v)){const s=v;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,s))){const r=l.chunk_first.call(null,s),n=l.count.call(null,r),i=l.chunk_buffer.call(null,n);return(()=>{let a=0;for(;;){if(a<n){const c=l._nth.call(null,r,a),w=l.nth.call(null,c,0,null),x=l.nth.call(null,c,1,null),A=(()=>{const M=l.some.call(null,function(F){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,F),w)))return F},l.keyword("fields").call(null,m));return l.assoc.call(null,M,l.keyword("key"),l.str.call(null,l.keyword("id").call(null,M)))})(),E=l.truth_.call(null,l._EQ_.call(null,x,l.keyword("rpub.plugins.content-types/new-field")))?"":x;l.chunk_append.call(null,i,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,A)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,A)),l.keyword("name").call(null,A)),l.vector(l.keyword("div"),g.custom_element.call(null,l.vector(l.get_in.call(null,d,l.vector(l.keyword("type").call(null,A),l.keyword("input"))),l.array_map(l.keyword("field"),A,l.keyword("value"),E,l.keyword("on-change"),function(M){return l.prn.call(null,M.target.value)},l.keyword("editing"),t,l.keyword("creating"),y)))))),a=l.unchecked_inc.call(null,a);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,i),k.call(null,l.chunk_rest.call(null,s))):l.chunk_cons.call(null,l.chunk.call(null,i),null)}else{const r=l.first.call(null,s),n=l.nth.call(null,r,0,null),i=l.nth.call(null,r,1,null),a=(()=>{const w=l.some.call(null,function(x){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,x),n)))return x},l.keyword("fields").call(null,m));return l.assoc.call(null,w,l.keyword("key"),l.str.call(null,l.keyword("id").call(null,w)))})(),c=l.truth_.call(null,l._EQ_.call(null,i,l.keyword("rpub.plugins.content-types/new-field")))?"":i;return l.cons.call(null,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,a)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,a)),l.keyword("name").call(null,a)),l.vector(l.keyword("div"),g.custom_element.call(null,l.vector(l.get_in.call(null,d,l.vector(l.keyword("type").call(null,a),l.keyword("input"))),l.array_map(l.keyword("field"),a,l.keyword("value"),c,l.keyword("on-change"),function(w){return l.prn.call(null,w.target.value)},l.keyword("editing"),t,l.keyword("creating"),y))))),k.call(null,l.rest.call(null,s)))}}break}},null,null)}.call(null,b))},W=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("content-type")),t=l.get.call(null,e,l.keyword("field-types")),y=l.array_map(l.keyword("content-type"),u,l.keyword("document"),l.into.call(null,l.array_map(),l.map.call(null,function(p){return l.vector(l.keyword("id").call(null,p),l.keyword("rpub.plugins.content-types/new-field"))},l.keyword("fields").call(null,u))));return l.vector(l.keyword("div.p-4"),l.vector(Q.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.str.call(null,"New ",D.singular.call(null,l.get_in.call(null,y,l.vector(l.keyword("content-type"),l.keyword("name"))))))),l.vector(Q.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(C,l.array_map(l.keyword("content-item"),y,l.keyword("field-types"),t,l.keyword("creating"),!0)),l.vector(g.submit_button,l.array_map(l.keyword("ready-label"),"Create",l.keyword("submit-label"),"Creating...",l.keyword("submitting"),!1))))))};g.add_element.call(null,l.keyword("new-content-item-page"),Q.wrap_component.call(null,W),l.array_map(l.keyword("format"),l.keyword("transit")));var X=function(o){const _=o,e=l.__destructure_map.call(null,_),u=l.get.call(null,e,l.keyword("content-type")),t=l.get.call(null,e,l.keyword("content-item")),y=l.get.call(null,e,l.keyword("field-types"));return l.vector(l.keyword("div.p-4"),l.vector(Q.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.vector(l.keyword("div"),l.vector(l.keyword("span.italic.text-blue-600"),l.str.call(null,D.singular.call(null,l.keyword("name").call(null,u)),": ")),l.get_in.call(null,t,l.vector(l.keyword("fields"),"Title"))))),l.vector(Q.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(C,l.array_map(l.keyword("content-item"),t,l.keyword("field-types"),y,l.keyword("editing"),!0)),l.vector(g.submit_button,l.array_map(l.keyword("ready-label"),"Save",l.keyword("submit-label"),"Saving...",l.keyword("submitting"),!1))))))};g.add_element.call(null,l.keyword("edit-content-item-page"),Q.wrap_component.call(null,X),l.array_map(l.keyword("format"),l.keyword("transit")));export{el as __GT_content_type,ll as __GT_field,N as all_content_types_page,U as columns,C as content_item_fields,L as content_type_fields_form,X as edit_content_item_page,I as edit_content_item_path,z as field_config,T as field_type_label,R as format_datetime,O as months,W as new_content_item_page,J as new_content_item_path,j as rpub_field_types_choice,B as rpub_field_types_datetime,V as rpub_field_types_number,H as rpub_field_types_text,Y as rpub_field_types_text_lg,$ as single_content_type_page};
