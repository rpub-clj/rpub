import*as l from"cherry-cljs/cljs.core.js";import{useEffect as fl,useCallback as el}from"react";import*as vl from"cherry-cljs/lib/clojure.string.js";import*as B from"rads.inflections";import*as N from"rpub.admin.impl";import{use_dag as tl}from"rpub.lib.dag.react";import*as h from"rpub.lib.html";import*as O from"rpub.lib.http";var Y=function(){return crypto.randomUUID()},rl=l.vector(l.vector(l.array_map(l.keyword("header"),l.vector(1,2,3,4,5,6,null))),l.vector("bold","italic"),l.vector(l.array_map(l.keyword("list"),"bullet"),l.array_map(l.keyword("list"),"ordered")),l.vector("blockquote"),l.vector(l.array_map(l.keyword("align"),""),l.array_map(l.keyword("align"),"center"),l.array_map(l.keyword("align"),"right")),l.vector("link"),l.vector("clean")),nl=l.array_map(l.keyword("theme"),l.keyword("snow"),l.keyword("modules"),l.array_map(l.keyword("toolbar"),rl)),hl=function(t,c){const e=l.merge.call(null,nl,l.dissoc.call(null,c,l.keyword("html"))),d=new Quill(t,l.clj__GT_js.call(null,e)),a=l.keyword("html").call(null,c);if(l.truth_.call(null,a)){const i=a;d.clipboard.dangerouslyPasteHTML(i)}return d},ol=function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("name")),a=l.get.call(null,e,l.keyword("type"));return l.array_map(l.keyword("id"),Y.call(null),l.keyword("name"),d,l.keyword("type"),a)},al=function(t){return B.parameterize.call(null,t)},cl=function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("id")),a=l.get.call(null,e,l.keyword("name")),i=l.get.call(null,e,l.keyword("slug")),x=l.get.call(null,e,l.keyword("fields"));return l.array_map(l.keyword("id"),(()=>{const G=Y.call(null);return l.truth_.call(null,G)?G:d})(),l.keyword("name"),a,l.keyword("slug"),i,l.keyword("fields"),x,l.keyword("created-at"),new Date,l.keyword("content-item-count"),0)},$=function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("anti-forgery-token")),a=l.get.call(null,e,l.keyword("content-type")),i=l.get.call(null,e,l.keyword("class")),x=tl.call(null,l.vector(l.keyword("all-content-types-page/selection"))),G=l.nth.call(null,x,0,null),g=l.__destructure_map.call(null,G),b=l.get.call(null,g,l.keyword("all-content-types-page/selection")),T=l.nth.call(null,x,1,null),I=l.array_map(l.keyword("anti-forgery-token"),d),U=el.call(null,function(C,z){return h.debounce.call(null,function(q,y,w){q.preventDefault();const r=l.assoc.call(null,w,z,q.target.value),u=l.assoc.call(null,I,l.keyword("body"),l.merge.call(null,l.array_map(l.keyword("content-type-id"),C,l.keyword("content-field-id"),l.keyword("id").call(null,r)),l.select_keys.call(null,r,l.vector(l.keyword("name"),l.keyword("type"),l.keyword("rank")))));return O.post.call(null,"/api/update-content-type-field",u)},h.default_debounce_timeout_ms)}),D=function(C,z,q){if(C.preventDefault(),l.truth_.call(null,confirm(l.str.call(null,'Are you sure you want to delete "',l.keyword("name").call(null,q),'"?')))){const y=l.assoc.call(null,I,l.keyword("body"),l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,z),l.keyword("content-field-id"),l.keyword("id").call(null,q)));return O.post.call(null,"/api/delete-content-type-field",y)}},M=U.call(null,l.keyword("id").call(null,a),l.keyword("name")),R=U.call(null,l.keyword("id").call(null,a),l.keyword("type"));return l.vector(l.keyword("form"),l.array_map(l.keyword("method"),"post",l.keyword("class"),i),l.vector(l.keyword("input"),l.array_map(l.keyword("id"),"__anti-forgery-token",l.keyword("name"),"__anti-forgery-token",l.keyword("type"),"hidden",l.keyword("value"),d)),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-id",l.keyword("value"),l.keyword("id").call(null,a))),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-name",l.keyword("value"),l.keyword("name").call(null,a))),l.vector(l.keyword("div"),function z(q){return new l.LazySeq(null,function(){let y=q;for(;;){const w=l.seq.call(null,y);if(l.truth_.call(null,w)){const r=w;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,r))){const u=l.chunk_first.call(null,r),m=l.count.call(null,u),_=l.chunk_buffer.call(null,m);return(()=>{let n=0;for(;;){if(n<m){const o=l._nth.call(null,u,n);l.chunk_append.call(null,_,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-2 pb-2 pt-2 flex items-center group",l.keyword("key"),l.keyword("id").call(null,o)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("on-focus"),function(f){return T.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),o))},l.keyword("size"),l.keyword("text-medium"),l.keyword("class"),l.str.call(null,"px-2 py-1 font-semibold border border-gray-200 ","rounded-[6px] mr-4 max-w-xl"),l.keyword("placeholder"),"Field Name",l.keyword("name"),l.keyword("field-name"),l.keyword("readonly"),!0,l.keyword("default-value"),l.keyword("name").call(null,o))),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-type")),l.vector(h.select,l.array_map(l.keyword("name"),l.keyword("field-type"),l.keyword("on-focus"),function(f){return T.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),o))},l.keyword("default-value"),l.keyword("type").call(null,o)),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text"),l.keyword("value"),"text"),"Text"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text-lg"),l.keyword("value"),"text-lg"),"Text (Large)"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("number"),l.keyword("value"),"number"),"Number"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("choice"),l.keyword("value"),"choice"),"Choice"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("datetime"),l.keyword("value"),"datetime"),"Date/Time")))),n=l.unchecked_inc.call(null,n);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,_),z.call(null,l.chunk_rest.call(null,r))):l.chunk_cons.call(null,l.chunk.call(null,_),null)}else{const u=l.first.call(null,r);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-2 pb-2 pt-2 flex items-center group",l.keyword("key"),l.keyword("id").call(null,u)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("on-focus"),function(m){return T.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),u))},l.keyword("size"),l.keyword("text-medium"),l.keyword("class"),l.str.call(null,"px-2 py-1 font-semibold border border-gray-200 ","rounded-[6px] mr-4 max-w-xl"),l.keyword("placeholder"),"Field Name",l.keyword("name"),l.keyword("field-name"),l.keyword("readonly"),!0,l.keyword("default-value"),l.keyword("name").call(null,u))),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-type")),l.vector(h.select,l.array_map(l.keyword("name"),l.keyword("field-type"),l.keyword("on-focus"),function(m){return T.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),a,l.keyword("content-type-field"),u))},l.keyword("default-value"),l.keyword("type").call(null,u)),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text"),l.keyword("value"),"text"),"Text"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("text-lg"),l.keyword("value"),"text-lg"),"Text (Large)"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("number"),l.keyword("value"),"number"),"Number"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("choice"),l.keyword("value"),"choice"),"Choice"),l.vector(l.keyword("option"),l.array_map(l.keyword("key"),l.keyword("datetime"),l.keyword("value"),"datetime"),"Date/Time"))),z.call(null,l.rest.call(null,r)))}}break}},null,null)}.call(null,l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,a)))))},gl=function(t,c){return l.into.call(null,l.array_map(),l.map.call(null,function(e){return l.vector(t.call(null,e),e)},c))},V=l.vector(l.array_map(l.keyword("label"),"Text",l.keyword("description"),"Ask for text with optional formatting."),l.array_map(l.keyword("label"),"Date and Time",l.keyword("description"),"Ask for a date and time with a date picker."),l.array_map(l.keyword("label"),"Number",l.keyword("description"),"Ask for a whole number or a decimal."),l.array_map(l.keyword("label"),"Media",l.keyword("description"),"Ask for an image or video."),l.array_map(l.keyword("label"),"Choice",l.keyword("description"),"Ask for a choice between multiple options."),l.array_map(l.keyword("label"),"Group",l.keyword("description"),"Combine multiple fields into a group.")),ul=function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("content-types")),a=l.get.call(null,e,l.keyword("anti-forgery-token")),i=tl.call(null,l.vector(l.keyword("all-content-types-page/selection"))),x=l.nth.call(null,i,0,null),G=l.__destructure_map.call(null,x),g=l.get.call(null,G,l.keyword("all-content-types-page/selection")),b=l.nth.call(null,i,1,null),T=fl.call(null,function(){return b.call(null,l.keyword("init"),l.array_map(l.keyword("content-types"),d))},[]),I=l.map.call(null,function(y){return l.update.call(null,y,l.keyword("created-at"),Date.parse)},d),U=N.index_by.call(null,l.keyword("id"),I),D=l.array_map(l.keyword("anti-forgery-token"),a),M=el.call(null,h.debounce.call(null,function(y,w){const r=y.target.value,u=l.select_keys.call(null,l.assoc.call(null,w,l.keyword("name"),r),l.vector(l.keyword("id"),l.keyword("name"))),m=l.assoc.call(null,D,l.keyword("body"),l.array_map(l.keyword("content-type"),u));return O.post.call(null,"/api/update-content-type",m)},h.default_debounce_timeout_ms)),R=function(y){const w=cl.call(null,l.array_map(l.keyword("name"),"New Content Type",l.keyword("slug"),"new-content-type",l.keyword("fields"),l.vector()));return y.preventDefault(),O.post.call(null,"/api/new-content-type",D)},C=function(y,w){if(l.truth_.call(null,confirm(l.str.call(null,'Are you sure you want to delete "',l.keyword("name").call(null,w),'"?')))){const r=l.assoc.call(null,D,l.keyword("body"),l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,w)));return y.preventDefault(),O.post.call(null,"/api/delete-content-type",r)}},z=function(y,w,r){y.preventDefault();const u=l.apply.call(null,l.max,0,l.map.call(null,l.keyword("rank"),l.keyword("fields").call(null,w)))+1,m=l.assoc.call(null,ol.call(null,r),l.keyword("rank"),u),_=l.assoc.call(null,D,l.keyword("body"),l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,w)));return O.post.call(null,"/api/new-content-type-field",_)},q=l.sort_by.call(null,l.keyword("created-at"),l._GT_,l.vals.call(null,U));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex",l.keyword("onClick"),function(y){return l.truth_.call(null,y.target.closest("[data-content-type-id]"))?null:b.call(null,l.keyword("all-content-types-page/clear-selection"))}),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex-grow"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pr-[384px]"),l.vector(N.box,l.array_map(l.keyword("class"),"pb-4",l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center"),l.vector(l.keyword("div"),"Content Types")),l.keyword("content"),l.vector(N.content_item_counts,l.array_map(l.keyword("content-types"),q)))),function w(r){return new l.LazySeq(null,function(){let u=r;for(;;){const m=l.seq.call(null,u);if(l.truth_.call(null,m)){const _=m;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,_))){const n=l.chunk_first.call(null,_),o=l.count.call(null,n),s=l.chunk_buffer.call(null,o);return(()=>{let f=0;for(;;){if(f<o){const k=l._nth.call(null,n,f);l.chunk_append.call(null,s,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,k),l.keyword("data-content-type-id"),l.keyword("id").call(null,k)),l.vector(N.box,l.array_map(l.keyword("on-click"),function(p){return l.truth_.call(null,(()=>{const E=p.target.closest("input");return l.truth_.call(null,E)?E:p.target.closest("select")})())?null:b.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),k))},l.keyword("selected"),(()=>{const p=l.not.call(null,l.keyword("content-type-field").call(null,g));return l.truth_.call(null,p)?l._EQ_.call(null,l.get_in.call(null,g,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,k)):p})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,k))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,k)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,k)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector($,l.array_map(l.keyword("content-type"),k,l.keyword("anti-forgery-token"),a))):null)))),f=l.unchecked_inc.call(null,f);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,s),w.call(null,l.chunk_rest.call(null,_))):l.chunk_cons.call(null,l.chunk.call(null,s),null)}else{const n=l.first.call(null,_);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,n),l.keyword("data-content-type-id"),l.keyword("id").call(null,n)),l.vector(N.box,l.array_map(l.keyword("on-click"),function(o){return l.truth_.call(null,(()=>{const s=o.target.closest("input");return l.truth_.call(null,s)?s:o.target.closest("select")})())?null:b.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),n))},l.keyword("selected"),(()=>{const o=l.not.call(null,l.keyword("content-type-field").call(null,g));return l.truth_.call(null,o)?l._EQ_.call(null,l.get_in.call(null,g,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,n)):o})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,n))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,n)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,n)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector($,l.array_map(l.keyword("content-type"),n,l.keyword("anti-forgery-token"),a))):null))),w.call(null,l.rest.call(null,_)))}}break}},null,null)}.call(null,q))),(()=>{const y=function(w){const r=w,u=l.__destructure_map.call(null,r),m=l.get.call(null,u,l.keyword("label")),_=l.get.call(null,u,l.keyword("description"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"border border-gray-200 rounded-[6px] p-2 mb-4 bg-gray-50 cursor-move",l.keyword("draggable"),!0),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"font-semibold"),m),l.vector(l.keyword("p"),l.array_map(l.keyword("class"),"text-sm text-gray-500"),_))};return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pl-2 w-[376px] fixed right-0 bottom-0 top-12"),l.truth_.call(null,g)?l.truth_.call(null,l.keyword("content-type-field").call(null,g))?l.vector(N.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"italic"),"Field: "),l.get_in.call(null,g,l.vector(l.keyword("content-type-field"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-8"),l.vector(l.keyword("h2"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold"),"Info")),l.vector(l.keyword("div"),l.vector(l.keyword("h2"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold"),"Conditions"),l.vector(l.keyword("p"),"foo"))))):l.truth_.call(null,l.keyword("content-type").call(null,g))?l.vector(N.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"italic"),"Content Type: "),l.get_in.call(null,g,l.vector(l.keyword("content-type"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Add Field"),l.vector(l.keyword("div"),function r(u){return new l.LazySeq(null,function(){let m=u;for(;;){const _=l.seq.call(null,m);if(l.truth_.call(null,_)){const n=_;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,n))){const o=l.chunk_first.call(null,n),s=l.count.call(null,o),f=l.chunk_buffer.call(null,s);return(()=>{let k=0;for(;;){if(k<s){const L=l._nth.call(null,o,k);l.chunk_append.call(null,f,y.call(null,L)),k=l.unchecked_inc.call(null,k);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,f),r.call(null,l.chunk_rest.call(null,n))):l.chunk_cons.call(null,l.chunk.call(null,f),null)}else{const o=l.first.call(null,n);return l.cons.call(null,y.call(null,o),r.call(null,l.rest.call(null,n)))}}break}},null,null)}.call(null,V))))):null:l.vector(N.box,l.array_map(l.keyword("class"),"h-full",l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("ul"),l.array_map(l.keyword("class"),"text-sm mb-8 list-[disc] pl-4"),l.vector(l.keyword("li"),l.array_map(l.keyword("class"),"mb-2"),"Drag a field to the left to add it to a content type."),l.vector(l.keyword("li"),"Double-click a field to add it to the selected content type.")),l.vector(l.keyword("div"),function r(u){return new l.LazySeq(null,function(){let m=u;for(;;){const _=l.seq.call(null,m);if(l.truth_.call(null,_)){const n=_;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,n))){const o=l.chunk_first.call(null,n),s=l.count.call(null,o),f=l.chunk_buffer.call(null,s);return(()=>{let k=0;for(;;){if(k<s){const L=l._nth.call(null,o,k);l.chunk_append.call(null,f,y.call(null,L)),k=l.unchecked_inc.call(null,k);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,f),r.call(null,l.chunk_rest.call(null,n))):l.chunk_cons.call(null,l.chunk.call(null,f),null)}else{const o=l.first.call(null,n);return l.cons.call(null,y.call(null,o),r.call(null,l.rest.call(null,n)))}}break}},null,null)}.call(null,V))))))})())};h.add_element.call(null,l.keyword("all-content-types-page"),N.wrap_component.call(null,ul));var _l=l.vector("January","February","March","April","May","June","July","August","September","October","November","December"),dl=function(t){const c=t.getMonth(),e=t.getDate(),d=t.getFullYear(),a=t.getHours(),i=t.getMinutes(),x=l.get.call(null,_l,c),G=a<12?"AM":"PM",g=l.mod.call(null,a,12),b=g===0?12:g,T=i<10?l.str.call(null,"0",i):l.str.call(null,i);return l.str.call(null,x," ",e,", ",d," ",b,":",T," ",G)},yl=l.vector(l.array_map(l.keyword("name"),"Title",l.keyword("value"),function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("fields"));return l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),l.get.call(null,d,"Title"))}),l.array_map(l.keyword("name"),"Author",l.keyword("value"),function(t){const c=t,e=l.__destructure_map.call(null,c),a=l.get.call(null,e,l.keyword("created-by")),i=l.__destructure_map.call(null,a),x=l.get.call(null,i,l.keyword("username"));return l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),x)}),l.array_map(l.keyword("name"),"Date",l.keyword("value"),function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("created-at")),a=l.get.call(null,e,l.keyword("updated-at")),i=(()=>{const G=a;return l.truth_.call(null,G)?G:d})(),x=i==null?null:new Date(i);return x==null?null:dl.call(null,x)})),sl=function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("content-type")),a=l.get.call(null,e,l.keyword("content-items")),i=l.get.call(null,e,l.keyword("anti-forgery-token")),x=l.array_map(l.keyword("anti-forgery-token"),i),G=l.map.call(null,function(b){return l.update.call(null,b,l.keyword("fields"),function(T){return l.update_keys.call(null,T,l.name)})},a),g=function(b,T){const I=l.array_map(l.keyword("content-item-id"),l.keyword("id").call(null,T)),U=function(M,R){if(l.truth_.call(null,R))return l.println.call(null,R)},D=l.merge.call(null,x,l.array_map(l.keyword("body"),I,l.keyword("on-complete"),U));return O.post.call(null,"/api/delete-content-item",D)};return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4"),l.vector(N.table,l.array_map(l.keyword("title"),l.keyword("name").call(null,d),l.keyword("columns"),yl,l.keyword("rows"),l.map.call(null,function(b){return l.assoc.call(null,b,l.keyword("content-type"),d)},G),l.keyword("delete-row"),g)))};h.add_element.call(null,l.keyword("single-content-type-page"),N.wrap_component.call(null,sl));var kl=function(t){const c=t,e=l.__destructure_map.call(null,c),d=e,a=l.get.call(null,e,l.keyword("on-start"));return null},W=function(t){return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"editor bg-white"),l.vector(kl,t))},il=function(t){return t.getSemanticHTML()},wl=l.uuid.call(null,"cd334826-1ec6-4906-8e7f-16ece1865faf"),pl=l.uuid.call(null,"6bd0ff7a-b720-4972-b98a-2aa85d179357"),ml=function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("message"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center p-4 mb-4 text-sm text-green-800 border border-green-300 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400 dark:border-green-800",l.keyword("role"),"alert"),l.vector(l.keyword("svg"),l.array_map(l.keyword("class"),"flex-shrink-0 inline w-4 h-4 me-3",l.keyword("aria-hidden"),"true",l.keyword("xmlns"),"http://www.w3.org/2000/svg",l.keyword("fill"),"currentColor",l.keyword("viewBox"),"0 0 20 20"),l.vector(l.keyword("path"),l.array_map(l.keyword("d"),"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"))),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"sr-only"),"Info"),l.vector(l.keyword("div"),d))},bl=function(t){const c=t,e=l.__destructure_map.call(null,c),d=l.get.call(null,e,l.keyword("anti-forgery-token")),a=l.get.call(null,e,l.keyword("submit-form-url")),i=l.get.call(null,e,l.keyword("submitting-button-text")),x=l.get.call(null,e,l.keyword("content-item")),G=l.get.call(null,e,l.keyword("title")),g=l.get.call(null,e,l.keyword("submit-button-text")),b=l.get.call(null,e,l.keyword("content-type")),T=l.get.call(null,e,l.keyword("site-base-url")),I=l.get.call(null,e,l.keyword("submit-button-class")),U=l.array_map(l.keyword("anti-forgery-token"),d),D=!1,M=l.array_map(l.keyword("form-fields"),(()=>{const r=l.keyword("document").call(null,x);return l.truth_.call(null,r)?r:l.array_map()})()),R=l.vector(),C=function(r,u){return null},z=function(r){return null},q=function(r,u){const m=r.target.value;return null},y=function(r,u){const m=u,_=l.__destructure_map.call(null,m),n=l.get.call(null,_,l.keyword("content-item-slug"));r.preventDefault();const o=null,s=l.get_in.call(null,o,l.vector(l.keyword("content-item"),l.keyword("form-fields"))),f=l.update_vals.call(null,l.keyword("editors").call(null,o),il),k=l.merge.call(null,s,f,l.array_map(pl,n)),L=(()=>{const A=l.array_map(l.keyword("content-type-id"),l.keyword("id").call(null,b),l.keyword("document"),k);return l.truth_.call(null,M)?l.assoc.call(null,A,l.keyword("content-item-id"),l.keyword("id").call(null,M)):A})(),p=function(A,v){return l.println.call(null,A),l.truth_.call(null,v)?l.println.call(null,v):l.truth_.call(null,M)?z.call(null,l.vector(ml,l.array_map(l.keyword("message"),l.vector(l.keyword("span.font-semibold"),B.capitalize.call(null,B.singular.call(null,l.name.call(null,l.keyword("slug").call(null,b))))," updated!")))):window.location=l.str.call(null,"/admin/content-types/",l.name.call(null,l.keyword("slug").call(null,b)),"/",l.keyword("content-item-slug").call(null,A))},E=l.assoc.call(null,l.assoc.call(null,U,l.keyword("body"),L),l.keyword("on-complete"),p);return O.post.call(null,a,E)},w=null;return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pt-0"),N.box.call(null,l.array_map(l.keyword("title"),G,l.keyword("content"),(()=>{const r=(()=>{const o=l.get_in.call(null,M,l.vector(l.keyword("fields"),"Slug"));if(l.truth_.call(null,o))return o;{const s=l.get_in.call(null,M,l.vector(l.keyword("form-fields"),wl));return s==null?null:al.call(null,s)}})(),u=l.array_map(l.keyword("content-type-slug"),l.keyword("slug").call(null,b),l.keyword("content-item-slug"),r),m=null,_=l.truth_.call(null,vl.blank_QMARK_.call(null,r))?null:l.str.call(null,T),n=l.map_indexed.call(null,l.vector,l.remove.call(null,l.comp.call(null,l.hash_set("Slug"),l.keyword("name")),l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,b))));return l.vector(l.keyword("div"),function s(f){return new l.LazySeq(null,function(){let k=f;for(;;){const L=l.seq.call(null,k);if(l.truth_.call(null,L)){const p=L;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,p))){const E=l.chunk_first.call(null,p),A=l.count.call(null,E),v=l.chunk_buffer.call(null,A);return(()=>{let S=0;for(;;){if(S<A){const K=l._nth.call(null,E,S);l.chunk_append.call(null,v,K),S=l.unchecked_inc.call(null,S);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,v),s.call(null,l.chunk_rest.call(null,p))):l.chunk_cons.call(null,l.chunk.call(null,v),null)}else{const E=l.first.call(null,p);return l.cons.call(null,E,s.call(null,l.rest.call(null,p)))}}break}},null,null)}.call(null,l.distinct.call(null,R)),l.vector(l.keyword("form"),l.array_map(l.keyword("on-submit"),function(o){return y.call(null,o,l.array_map(l.keyword("content-item-slug"),r))}),l.vector(l.keyword("div"),function s(f){return new l.LazySeq(null,function(){let k=f;for(;;){const L=l.seq.call(null,k);if(l.truth_.call(null,L)){const p=L;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,p))){const E=l.chunk_first.call(null,p),A=l.count.call(null,E),v=l.chunk_buffer.call(null,A);return(()=>{let S=0;for(;;){if(S<A){const K=l._nth.call(null,E,S),J=l.nth.call(null,K,0,null),Q=l.nth.call(null,K,1,null),Z=Q,H=l.__destructure_map.call(null,Z),P=l.get.call(null,H,l.keyword("type")),F=l.get.call(null,H,l.keyword("name"));l.chunk_append.call(null,v,l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,Q)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"mb-2 pb-2 pt-2 ",l.truth_.call(null,l._EQ_.call(null,J,l.count.call(null,n)-1))?null:"border-b")),(()=>{const X=P,ll=l.truth_.call(null,l.keyword_QMARK_.call(null,X))?l.subs.call(null,l.str.call(null,X),1):null;switch(ll){case"text":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("class"),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,Q),"Title"))?"w-full":null,l.keyword("name"),F,l.keyword("placeholder"),F,l.keyword("default-value"),l.get_in.call(null,M,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,Q))),l.keyword("on-change"),function(j){return q.call(null,j,l.keyword("id").call(null,Q))}));case"text-lg":return l.vector(W,l.array_map(l.keyword("class"),"h-72",l.keyword("html"),l.get_in.call(null,M,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,Q))),l.keyword("on-start"),function(j){return C.call(null,l.keyword("id").call(null,Q),j)}));case"choice":return l.vector(h.select);case"datetime":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),F,l.keyword("placeholder"),F));case"number":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("number"),l.keyword("name"),F,l.keyword("placeholder"),F));default:throw new Error(l.str.call(null,"No matching clause: ",ll))}})(),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,Q),"Title"))?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mt-2 text-sm"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-500"),"Permalink: "),l.truth_.call(null,_)?l.vector(l.keyword("a"),l.array_map(l.keyword("class"),"underline",l.keyword("href"),_),_):l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-400"),T,"/\u2026")):null))),S=l.unchecked_inc.call(null,S);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,v),s.call(null,l.chunk_rest.call(null,p))):l.chunk_cons.call(null,l.chunk.call(null,v),null)}else{const E=l.first.call(null,p),A=l.nth.call(null,E,0,null),v=l.nth.call(null,E,1,null),S=v,K=l.__destructure_map.call(null,S),J=l.get.call(null,K,l.keyword("type")),Q=l.get.call(null,K,l.keyword("name"));return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,v)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"mb-2 pb-2 pt-2 ",l.truth_.call(null,l._EQ_.call(null,A,l.count.call(null,n)-1))?null:"border-b")),(()=>{const Z=J,H=l.truth_.call(null,l.keyword_QMARK_.call(null,Z))?l.subs.call(null,l.str.call(null,Z),1):null;switch(H){case"text":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("class"),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,v),"Title"))?"w-full":null,l.keyword("name"),Q,l.keyword("placeholder"),Q,l.keyword("default-value"),l.get_in.call(null,M,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,v))),l.keyword("on-change"),function(P){return q.call(null,P,l.keyword("id").call(null,v))}));case"text-lg":return l.vector(W,l.array_map(l.keyword("class"),"h-72",l.keyword("html"),l.get_in.call(null,M,l.vector(l.keyword("form-fields"),l.keyword("id").call(null,v))),l.keyword("on-start"),function(P){return C.call(null,l.keyword("id").call(null,v),P)}));case"choice":return l.vector(h.select);case"datetime":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),Q,l.keyword("placeholder"),Q));case"number":return l.vector(h.input,l.array_map(l.keyword("type"),l.keyword("number"),l.keyword("name"),Q,l.keyword("placeholder"),Q));default:throw new Error(l.str.call(null,"No matching clause: ",H))}})(),l.truth_.call(null,l._EQ_.call(null,l.keyword("name").call(null,v),"Title"))?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mt-2 text-sm"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-500"),"Permalink: "),l.truth_.call(null,_)?l.vector(l.keyword("a"),l.array_map(l.keyword("class"),"underline",l.keyword("href"),_),_):l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-400"),T,"/\u2026")):null)),s.call(null,l.rest.call(null,p)))}}break}},null,null)}.call(null,n),l.vector(l.keyword("button"),l.array_map(l.keyword("type"),l.keyword("submit"),l.keyword("class"),l.str.call(null,"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",I),l.keyword("disabled"),D),l.truth_.call(null,D)?l.vector(l.keyword("span"),l.vector(h.spinner),i):g))))})())))};export{cl as __GT_content_type,ol as __GT_field,al as __GT_slug,ul as all_content_types_page,yl as columns,$ as content_type_fields_form,bl as content_type_new_item_form,W as editor,kl as editor_impl,V as field_config,dl as format_datetime,gl as index_by,_l as months,nl as quill_defaults,il as quill_get_semantic_html,rl as quill_toolbar,Y as random_uuid,sl as single_content_type_page,pl as slug_field_id,hl as start_quill_BANG_,ml as success_alert,wl as title_field_id};
