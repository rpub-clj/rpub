import{jsx as ye}from"react/jsx-runtime";import*as e from"cherry-cljs/cljs.core.js";import"flowbite";import{useState as U}from"react";import*as I from"cherry-cljs/lib/clojure.string.js";import*as ne from"rpub.admin.dag";import*as m from"rpub.admin.impl";import{DAGProvider as ce,use_dag as de}from"rpub.lib.dag.react";import*as T from"rpub.lib.html";import*as Q from"rpub.lib.http";import*as E from"rpub.lib.reagent";import"rpub.plugins.content-types";var q=function(r,t){return e.into.call(null,e.array_map(),e.map.call(null,function(l){return e.vector(r.call(null,l),l)},t))},K=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("content-types"));return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"w-full md:w-1/2 md:px-2 mb-4",e.keyword("data-test-id"),"dashboard-content-types"),e.vector(m.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M5.005 10.19a1 1 0 0 1 1 1v.233l5.998 3.464L18 11.423v-.232a1 1 0 1 1 2 0V12a1 1 0 0 1-.5.866l-6.997 4.042a1 1 0 0 1-1 0l-6.998-4.042a1 1 0 0 1-.5-.866v-.81a1 1 0 0 1 1-1ZM5 15.15a1 1 0 0 1 1 1v.232l5.997 3.464 5.998-3.464v-.232a1 1 0 1 1 2 0v.81a1 1 0 0 1-.5.865l-6.998 4.042a1 1 0 0 1-1 0L4.5 17.824a1 1 0 0 1-.5-.866v-.81a1 1 0 0 1 1-1Z",e.keyword("clip-rule"),"evenodd")),e.vector(e.keyword("path"),e.array_map(e.keyword("d"),"M12.503 2.134a1 1 0 0 0-1 0L4.501 6.17A1 1 0 0 0 4.5 7.902l7.002 4.047a1 1 0 0 0 1 0l6.998-4.04a1 1 0 0 0 0-1.732l-6.997-4.042Z"))),"Content Types"),e.keyword("class"),"md:h-48",e.keyword("size"),e.keyword("half"),e.keyword("content"),e.vector(e.keyword("div"),(()=>{const s=m.pluralize.call(null,a,"types"),k=e.nth.call(null,s,0,null),_=e.nth.call(null,s,1,null);return e.vector(e.keyword("p"),e.array_map(e.keyword("class"),"mb-4"),"This site has ",e.vector(e.keyword("span"),e.array_map(e.keyword("class"),"font-semibold"),k)," ",_," of content:")})(),e.vector(m.content_item_counts,e.array_map(e.keyword("content-types"),a))))))},j=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("theme"));return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"w-full md:w-1/2 md:px-2 mb-4",e.keyword("data-test-id"),"dashboard-theme"),e.vector(m.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M13 10a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H14a1 1 0 0 1-1-1Z",e.keyword("clip-rule"),"evenodd")),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12c0 .556-.227 1.06-.593 1.422A.999.999 0 0 1 20.5 20H4a2.002 2.002 0 0 1-2-2V6Zm6.892 12 3.833-5.356-3.99-4.322a1 1 0 0 0-1.549.097L4 12.879V6h16v9.95l-3.257-3.619a1 1 0 0 0-1.557.088L11.2 18H8.892Z",e.keyword("clip-rule"),"evenodd"))),"Theme"),e.keyword("class"),"md:h-48",e.keyword("size"),e.keyword("half"),e.keyword("content"),e.vector(e.keyword("div"),"This site is using the ",e.vector(e.keyword("span"),e.array_map(e.keyword("class"),"font-semibold underline"),e.keyword("label").call(null,a)),"."))))},Y=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("activated-plugins"));return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"w-full md:w-1/2 md:px-2 mb-4",e.keyword("data-test-id"),"dashboard-plugins"),e.vector(m.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M13 11.15V4a1 1 0 1 0-2 0v7.15L8.78 8.374a1 1 0 1 0-1.56 1.25l4 5a1 1 0 0 0 1.56 0l4-5a1 1 0 1 0-1.56-1.25L13 11.15Z",e.keyword("clip-rule"),"evenodd")),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M9.657 15.874 7.358 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2.358l-2.3 2.874a3 3 0 0 1-4.685 0ZM17 16a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17Z",e.keyword("clip-rule"),"evenodd"))),"Plugins"),e.keyword("class"),"md:h-48",e.keyword("size"),e.keyword("half"),e.keyword("content"),e.vector(e.keyword("div"),(()=>{const s=m.pluralize.call(null,a,"plugin"),k=e.nth.call(null,s,0,null),_=e.nth.call(null,s,1,null);return e.vector(e.keyword("p"),e.array_map(e.keyword("class"),"mb-4"),"This site has ",e.vector(e.keyword("span"),e.array_map(e.keyword("class"),"font-semibold"),k)," ",_," activated:")})(),e.vector(e.keyword("div"),function k(_){return new e.LazySeq(null,function(){let H=_;for(;;){const z=e.seq.call(null,H);if(e.truth_.call(null,z)){const h=z;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,h))){const g=e.chunk_first.call(null,h),b=e.count.call(null,g),x=e.chunk_buffer.call(null,b);return(()=>{let M=0;for(;;){if(M<b){const S=e._nth.call(null,g,M),C=e.nth.call(null,S,0,null),f=e.nth.call(null,S,1,null);e.chunk_append.call(null,x,e.vector(e.keyword("span"),e.truth_.call(null,e._EQ_.call(null,C,0))?null:e.vector(e.keyword("span"),e.array_map(e.keyword("class"),"text-gray-300")," \u2022 "),e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"underline text-nowrap font-semibold",e.keyword("href"),"/admin/plugins"),e.keyword("label").call(null,f)))),M=e.unchecked_inc.call(null,M);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,x),k.call(null,e.chunk_rest.call(null,h))):e.chunk_cons.call(null,e.chunk.call(null,x),null)}else{const g=e.first.call(null,h),b=e.nth.call(null,g,0,null),x=e.nth.call(null,g,1,null);return e.cons.call(null,e.vector(e.keyword("span"),e.truth_.call(null,e._EQ_.call(null,b,0))?null:e.vector(e.keyword("span"),e.array_map(e.keyword("class"),"text-gray-300")," \u2022 "),e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"underline text-nowrap font-semibold",e.keyword("href"),"/admin/plugins"),e.keyword("label").call(null,x))),k.call(null,e.rest.call(null,h)))}}break}},null,null)}.call(null,e.map_indexed.call(null,e.vector,e.sort_by.call(null,e.keyword("label"),a))))))))},F=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("settings"));return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"w-full md:w-1/2 md:px-2 mb-4",e.keyword("data-test-id"),"dashboard-settings"),e.vector(m.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M9.586 2.586A2 2 0 0 1 11 2h2a2 2 0 0 1 2 2v.089l.473.196.063-.063a2.002 2.002 0 0 1 2.828 0l1.414 1.414a2 2 0 0 1 0 2.827l-.063.064.196.473H20a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-.089l-.196.473.063.063a2.002 2.002 0 0 1 0 2.828l-1.414 1.414a2 2 0 0 1-2.828 0l-.063-.063-.473.196V20a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-.089l-.473-.196-.063.063a2.002 2.002 0 0 1-2.828 0l-1.414-1.414a2 2 0 0 1 0-2.827l.063-.064L4.089 15H4a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h.09l.195-.473-.063-.063a2 2 0 0 1 0-2.828l1.414-1.414a2 2 0 0 1 2.827 0l.064.063L9 4.089V4a2 2 0 0 1 .586-1.414ZM8 12a4 4 0 1 1 8 0 4 4 0 0 1-8 0Z",e.keyword("clip-rule"),"evenodd"))),"Settings"),e.keyword("class"),"md:h-48",e.keyword("size"),e.keyword("half"),e.keyword("content"),e.vector(e.keyword("div"),e.vector(e.keyword("div"),e.vector(e.keyword("span"),e.array_map(e.keyword("class"),"font-semibold"),"Permalinks: "),e.vector(e.keyword("code"),e.get_in.call(null,a,e.vector(e.keyword("permalink-single"),e.keyword("value")))))))))},J=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("current-user"));return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"w-full md:w-1/2 md:px-2 mb-4",e.keyword("data-test-id"),"dashboard-user"),e.vector(m.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M12 20a7.966 7.966 0 0 1-5.002-1.756l.002.001v-.683c0-1.794 1.492-3.25 3.333-3.25h3.334c1.84 0 3.333 1.456 3.333 3.25v.683A7.966 7.966 0 0 1 12 20ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10c0 5.5-4.44 9.963-9.932 10h-.138C6.438 21.962 2 17.5 2 12Zm10-5c-1.84 0-3.333 1.455-3.333 3.25S10.159 13.5 12 13.5c1.84 0 3.333-1.455 3.333-3.25S13.841 7 12 7Z",e.keyword("clip-rule"),"evenodd"))),"User"),e.keyword("class"),"md:h-48",e.keyword("size"),e.keyword("half"),e.keyword("content"),e.vector(e.keyword("div"),"You're logged in as ",e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"font-semibold underline",e.keyword("href"),"/admin/users"),e.keyword("username").call(null,a)),"."))))},W=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("rpub-version")),s=e.str.call(null,"https://github.com/rpub-clj/rpub/tree/v",a);return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"w-full md:w-1/2 md:px-2 mb-4",e.keyword("data-test-id"),"dashboard-server"),e.vector(m.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M5 5a2 2 0 0 0-2 2v3a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V7a2 2 0 0 0-2-2H5Zm9 2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H14Zm3 0a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17ZM3 17v-3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Zm11-2a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H14Zm3 0a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17Z",e.keyword("clip-rule"),"evenodd"))),"Server"),e.keyword("class"),"md:h-48",e.keyword("size"),e.keyword("half"),e.keyword("content"),e.vector(e.keyword("div"),"This server is running ",e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"font-semibold underline",e.keyword("href"),s,e.keyword("target"),"_blank"),e.str.call(null,"rPub v",a)),"."))))},X=function(r){return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex flex-wrap py-4 px-4 md:px-2"),e.vector(K,r),e.vector(j,r),e.vector(Y,r),e.vector(F,r),e.vector(J,r),e.vector(W,r))};T.add_element.call(null,e.keyword("dashboard-page"),E.reactify_component.call(null,X));var $=function(r){const t=r,l=e.__destructure_map.call(null,t),a=l,s=e.get.call(null,l,e.keyword("anti-forgery-token")),k=e.get.call(null,l,e.keyword("settings")),_=de.call(null,e.vector(e.keyword("settings-page/field-values"),e.keyword("settings-page/submitting"))),H=e.nth.call(null,_,0,null),z=e.__destructure_map.call(null,H),h=e.get.call(null,z,e.keyword("settings-page/field-values")),g=e.get.call(null,z,e.keyword("settings-page/submitting")),b=e.nth.call(null,_,1,null),x=q.call(null,e.keyword("key"),k),M=e.array_map(e.keyword("anti-forgery-token"),s),S=function(f,p){const L=p.target.value;return b.call(null,e.keyword("settings-page/change-input"),e.vector(f,L))},C=function(f){f.preventDefault(),b.call(null,e.keyword("settings-page/submit-start"));const p=function(w,c){return e.truth_.call(null,c)?b.call(null,e.keyword("settings-page/submit-error")):window.location.reload()},L=e.vals.call(null,e.update_vals.call(null,e.merge_with.call(null,function(w,c){return e.assoc.call(null,w,e.keyword("value"),c)},x,h),function(w){return e.select_keys.call(null,w,e.vector(e.keyword("key"),e.keyword("value")))})),A=e.merge.call(null,M,e.array_map(e.keyword("body"),e.array_map(e.keyword("settings"),L),e.keyword("on-complete"),p));return Q.post.call(null,"/api/update-settings",A)};return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4"),e.vector(m.box,e.array_map(e.keyword("title"),"Settings",e.keyword("content"),e.vector(e.keyword("section"),e.array_map(e.keyword("class"),"bg-white dark:bg-gray-900"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"max-w-2xl"),e.vector(e.keyword("form"),e.array_map(e.keyword("onSubmit"),C),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"grid gap-4 sm:grid-cols-2 sm:gap-6"),function p(L){return new e.LazySeq(null,function(){let A=L;for(;;){const w=e.seq.call(null,A);if(e.truth_.call(null,w)){const c=w;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,c))){const o=e.chunk_first.call(null,c),n=e.count.call(null,o),i=e.chunk_buffer.call(null,n);return(()=>{let u=0;for(;;){if(u<n){const d=e._nth.call(null,o,u);e.chunk_append.call(null,i,e.vector(e.keyword("div"),e.array_map(e.keyword("key"),e.keyword("key").call(null,d),e.keyword("class"),"sm:col-span-2"),e.vector(e.keyword("label"),e.array_map(e.keyword("class"),"block mb-2 text-sm font-semibold text-gray-900 dark:text-white",e.keyword("for"),"name"),e.keyword("label").call(null,d)),e.vector(T.input2,e.array_map(e.keyword("type"),e.keyword("text"),e.keyword("name"),e.keyword("key").call(null,d),e.keyword("value"),(()=>{const Z=e.get.call(null,h,e.keyword("key").call(null,d));return e.truth_.call(null,Z)?Z:e.keyword("value").call(null,d)})(),e.keyword("on-change"),function(Z){return S.call(null,e.keyword("key").call(null,d),Z)})))),u=e.unchecked_inc.call(null,u);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,i),p.call(null,e.chunk_rest.call(null,c))):e.chunk_cons.call(null,e.chunk.call(null,i),null)}else{const o=e.first.call(null,c);return e.cons.call(null,e.vector(e.keyword("div"),e.array_map(e.keyword("key"),e.keyword("key").call(null,o),e.keyword("class"),"sm:col-span-2"),e.vector(e.keyword("label"),e.array_map(e.keyword("class"),"block mb-2 text-sm font-semibold text-gray-900 dark:text-white",e.keyword("for"),"name"),e.keyword("label").call(null,o)),e.vector(T.input2,e.array_map(e.keyword("type"),e.keyword("text"),e.keyword("name"),e.keyword("key").call(null,o),e.keyword("value"),(()=>{const n=e.get.call(null,h,e.keyword("key").call(null,o));return e.truth_.call(null,n)?n:e.keyword("value").call(null,o)})(),e.keyword("on-change"),function(n){return S.call(null,e.keyword("key").call(null,o),n)}))),p.call(null,e.rest.call(null,c)))}}break}},null,null)}.call(null,e.sort_by.call(null,e.keyword("label"),e.vals.call(null,x))),e.vector(e.keyword("button"),e.array_map(e.keyword("type"),e.keyword("submit"),e.keyword("class"),"w-[120px] text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",e.keyword("disabled"),g),e.truth_.call(null,g)?e.vector(e.keyword("span"),e.vector(T.spinner),"Saving"):"Save"))))))))},ee=function(r){return ye(ce,{"dag-atom":ne.dag_atom,children:E.as_element.call(null,e.vector($,r))})};T.add_element.call(null,e.keyword("settings-page"),E.reactify_component.call(null,ee));var pe=e.vector(e.array_map(e.keyword("key"),e.keyword("id"),e.keyword("name"),"ID"),e.array_map(e.keyword("key"),e.keyword("created-at"),e.keyword("name"),"Created At"),e.array_map(e.keyword("key"),e.keyword("created-by"),e.keyword("name"),"Created By")),ue=e.vector(e.array_map(e.keyword("name"),"Username",e.keyword("value"),function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("username"));return e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"font-semibold"),a)})),re=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("users"));return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4"),e.vector(m.table,e.array_map(e.keyword("title"),"Users",e.keyword("columns"),ue,e.keyword("rows"),a)))};T.add_element.call(null,e.keyword("users-page"),E.reactify_component.call(null,re));var D=function(r){return e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M13 10a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H14a1 1 0 0 1-1-1Z",e.keyword("clip-rule"),"evenodd")),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12c0 .556-.227 1.06-.593 1.422A.999.999 0 0 1 20.5 20H4a2.002 2.002 0 0 1-2-2V6Zm6.892 12 3.833-5.356-3.99-4.322a1 1 0 0 0-1.549.097L4 12.879V6h16v9.95l-3.257-3.619a1 1 0 0 0-1.557.088L11.2 18H8.892Z",e.keyword("clip-rule"),"evenodd")))},le=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("themes")),s=e.get.call(null,l,e.keyword("theme-name-setting")),k=e.get.call(null,l,e.keyword("anti-forgery-token")),_=U.call(null,e.array_map(e.keyword("current-theme-name-setting"),s)),H=e.nth.call(null,_,0,null),z=e.nth.call(null,_,1,null),h=H,g=e.__destructure_map.call(null,h),b=e.get.call(null,g,e.keyword("current-theme-name-setting")),x=e.array_map(e.keyword("anti-forgery-token"),k),M=function(C){return e._EQ_.call(null,e.keyword("label").call(null,C),e.keyword("value").call(null,b))},S=function(C){return function(f){f.preventDefault();const p=e.array_map(e.keyword("setting-key"),e.str.call(null,e.keyword("theme-name")),e.keyword("setting-value"),e.keyword("label").call(null,C)),L=function(w,c){if(e.truth_.call(null,w))return z.call(null,e.assoc_in.call(null,H,e.vector(e.keyword("current-theme-name-setting"),e.keyword("value")),e.keyword("label").call(null,C)))},A=e.merge.call(null,x,e.array_map(e.keyword("body"),p,e.keyword("on-complete"),L));return Q.post.call(null,"/api/update-setting",A)}};return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4"),function f(p){return new e.LazySeq(null,function(){let L=p;for(;;){const A=e.seq.call(null,L);if(e.truth_.call(null,A)){const w=A;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,w))){const c=e.chunk_first.call(null,w),o=e.count.call(null,c),n=e.chunk_buffer.call(null,o);return(()=>{let i=0;for(;;){if(i<o){const u=e._nth.call(null,c,i),d=M.call(null,u);e.chunk_append.call(null,n,e.vector(e.keyword("form"),e.array_map(e.keyword("method"),e.keyword("post")),e.vector(e.keyword("input"),e.array_map(e.keyword("type"),"hidden",e.keyword("name"),"__anti-forgery-token",e.keyword("value"),k)),e.vector(e.keyword("input"),e.array_map(e.keyword("type"),"hidden",e.keyword("name"),"theme-name",e.keyword("value"),e.keyword("label").call(null,u))),e.vector(m.box,e.array_map(e.keyword("key"),e.keyword("label").call(null,u),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(D),e.keyword("label").call(null,u),e.truth_.call(null,d)?e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-green-500 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow-inner ml-auto cursor-auto w-44"),e.array_map(e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z",e.keyword("clip-rule"),"evenodd"))),"Active")):e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow ml-auto w-44",e.keyword("onClick"),S.call(null,u)),e.array_map(e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white dark:text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("d"),"M8 5v4.997a.31.31 0 0 1-.068.113c-.08.098-.213.207-.378.301-.947.543-1.713 1.54-2.191 2.488A6.237 6.237 0 0 0 4.82 14.4c-.1.48-.138 1.031.018 1.539C5.12 16.846 6.02 17 6.414 17H11v3a1 1 0 1 0 2 0v-3h4.586c.395 0 1.295-.154 1.575-1.061.156-.508.118-1.059.017-1.539a6.241 6.241 0 0 0-.541-1.5c-.479-.95-1.244-1.946-2.191-2.489a1.393 1.393 0 0 1-.378-.301.309.309 0 0 1-.068-.113V5h1a1 1 0 1 0 0-2H7a1 1 0 1 0 0 2h1Z"))),"Activate Theme"))),e.keyword("class"),"mb-4",e.keyword("content"),(()=>{const Z=e.keyword("description").call(null,u);if(e.truth_.call(null,Z)){const v=Z;return e.vector(e.keyword("p"),v)}})())))),i=e.unchecked_inc.call(null,i);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,n),f.call(null,e.chunk_rest.call(null,w))):e.chunk_cons.call(null,e.chunk.call(null,n),null)}else{const c=e.first.call(null,w),o=M.call(null,c);return e.cons.call(null,e.vector(e.keyword("form"),e.array_map(e.keyword("method"),e.keyword("post")),e.vector(e.keyword("input"),e.array_map(e.keyword("type"),"hidden",e.keyword("name"),"__anti-forgery-token",e.keyword("value"),k)),e.vector(e.keyword("input"),e.array_map(e.keyword("type"),"hidden",e.keyword("name"),"theme-name",e.keyword("value"),e.keyword("label").call(null,c))),e.vector(m.box,e.array_map(e.keyword("key"),e.keyword("label").call(null,c),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(D),e.keyword("label").call(null,c),e.truth_.call(null,o)?e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-green-500 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow-inner ml-auto cursor-auto w-44"),e.array_map(e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z",e.keyword("clip-rule"),"evenodd"))),"Active")):e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow ml-auto w-44",e.keyword("onClick"),S.call(null,c)),e.array_map(e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white dark:text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("d"),"M8 5v4.997a.31.31 0 0 1-.068.113c-.08.098-.213.207-.378.301-.947.543-1.713 1.54-2.191 2.488A6.237 6.237 0 0 0 4.82 14.4c-.1.48-.138 1.031.018 1.539C5.12 16.846 6.02 17 6.414 17H11v3a1 1 0 1 0 2 0v-3h4.586c.395 0 1.295-.154 1.575-1.061.156-.508.118-1.059.017-1.539a6.241 6.241 0 0 0-.541-1.5c-.479-.95-1.244-1.946-2.191-2.489a1.393 1.393 0 0 1-.378-.301.309.309 0 0 1-.068-.113V5h1a1 1 0 1 0 0-2H7a1 1 0 1 0 0 2h1Z"))),"Activate Theme"))),e.keyword("class"),"mb-4",e.keyword("content"),(()=>{const n=e.keyword("description").call(null,c);if(e.truth_.call(null,n)){const i=n;return e.vector(e.keyword("p"),i)}})()))),f.call(null,e.rest.call(null,w)))}}break}},null,null)}.call(null,a))};T.add_element.call(null,e.keyword("themes-page"),E.reactify_component.call(null,le));var N=function(r){return e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 dark:text-white mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M13 11.15V4a1 1 0 1 0-2 0v7.15L8.78 8.374a1 1 0 1 0-1.56 1.25l4 5a1 1 0 0 0 1.56 0l4-5a1 1 0 1 0-1.56-1.25L13 11.15Z",e.keyword("clip-rule"),"evenodd")),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M9.657 15.874 7.358 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2.358l-2.3 2.874a3 3 0 0 1-4.685 0ZM17 16a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2H17Z",e.keyword("clip-rule"),"evenodd")))},O=function(r){const t=I.split.call(null,e.keyword("key").call(null,r),/\//),l=e.nth.call(null,t,0,null),a=e.last.call(null,I.split.call(null,l,/\./));return e.str.call(null,"https://github.com/rpub-clj/plugins/tree/main/plugins/",a)},P=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("on-click")),s=U.call(null,!1),k=e.nth.call(null,s,0,null),_=e.nth.call(null,s,1,null);return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"ml-auto",e.keyword("onMouseEnter"),function(){return _.call(null,!0)},e.keyword("onMouseLeave"),function(){return _.call(null,!1)},e.keyword("onClick"),a),e.truth_.call(null,k)?e.vector(e.keyword("button"),e.array_map(e.keyword("type"),"submit",e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-red-500 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow w-44"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white dark:text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm5.757-1a1 1 0 1 0 0 2h8.486a1 1 0 1 0 0-2H7.757Z",e.keyword("clip-rule"),"evenodd"))),"Deactivate")):e.vector(e.keyword("button"),e.array_map(e.keyword("type"),"submit",e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-green-500 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow-inner w-44"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z",e.keyword("clip-rule"),"evenodd"))),"Active")))},R=function(r){const t=r,l=e.__destructure_map.call(null,t),a=e.get.call(null,l,e.keyword("on-click"));return e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow ml-auto w-44",e.keyword("onClick"),a),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white dark:text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4.243a1 1 0 1 0-2 0V11H7.757a1 1 0 1 0 0 2H11v3.243a1 1 0 1 0 2 0V13h3.243a1 1 0 1 0 0-2H13V7.757Z",e.keyword("clip-rule"),"evenodd"))),"Activate Plugin"))},te=function(r){const t=r,l=e.__destructure_map.call(null,t),a=l,s=e.get.call(null,l,e.keyword("current-plugins")),k=e.get.call(null,l,e.keyword("available-plugins")),_=e.get.call(null,l,e.keyword("anti-forgery-token")),H=e.array_map(e.keyword("anti-forgery-token"),_),z=q.call(null,e.keyword("key"),s),h=U.call(null,e.array_map(e.keyword("current-plugin-index"),z,e.keyword("needs-restart"),!0)),g=e.nth.call(null,h,0,null),b=e.nth.call(null,h,1,null),x=function(c,o){const n=e.assoc.call(null,o,e.keyword("activated"),!0),i=e.array_map(e.keyword("plugin"),e.update.call(null,e.select_keys.call(null,n,e.vector(e.keyword("key"))),e.keyword("key"),function(y){return e.str.call(null,":",y)})),u=function(y,Z){if(e.truth_.call(null,y))return b.call(null,e.assoc_in.call(null,g,e.vector(e.keyword("current-plugin-index"),e.keyword("key").call(null,n),e.keyword("activated")),!0))},d=e.merge.call(null,H,e.array_map(e.keyword("body"),i,e.keyword("on-complete"),u));return Q.post.call(null,"/api/activate-plugin",d)},M=function(c,o){const n=e.array_map(e.keyword("plugin"),e.update.call(null,e.select_keys.call(null,o,e.vector(e.keyword("key"))),e.keyword("key"),function(d){return e.str.call(null,":",d)})),i=function(d,y){if(e.truth_.call(null,d))return b.call(null,e.assoc_in.call(null,g,e.vector(e.keyword("current-plugin-index"),e.keyword("key").call(null,o),e.keyword("activated")),!1))},u=e.merge.call(null,H,e.array_map(e.keyword("body"),n,e.keyword("on-complete"),i));return Q.post.call(null,"/api/deactivate-plugin",u)},S=function(c){const o=function(i,u){return null},n=e.merge.call(null,H,e.array_map(e.keyword("on-complete"),o));return Q.post.call(null,"/api/restart-server",n)},C=g,f=e.__destructure_map.call(null,C),p=e.get.call(null,f,e.keyword("current-plugin-index")),L=e.get.call(null,f,e.keyword("needs-restart")),A=q.call(null,e.keyword("key"),k),w=e.merge_with.call(null,e.merge,p,A);return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4"),e.vector(m.box,e.array_map(e.keyword("title"),"Plugins",e.keyword("class"),"mb-4",e.keyword("content"),e.vector(e.keyword("div"),e.truth_.call(null,L)?e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex"),e.vector(e.keyword("p"),e.array_map(e.keyword("class"),"italic"),"Note: The server must be restarted after activating a plugin for the first time."),e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800 shadow ml-auto w-44",e.keyword("onClick"),S),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),"Restart"))):null))),function o(n){return new e.LazySeq(null,function(){let i=n;for(;;){const u=e.seq.call(null,i);if(e.truth_.call(null,u)){const d=u;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,d))){const y=e.chunk_first.call(null,d),Z=e.count.call(null,y),v=e.chunk_buffer.call(null,Z);return(()=>{let V=0;for(;;){if(V<Z){const G=e._nth.call(null,y,V),ae=e.get.call(null,p,e.keyword("key").call(null,G));e.chunk_append.call(null,v,e.vector(m.box,e.array_map(e.keyword("key"),e.keyword("key").call(null,G),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(N),e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"underline",e.keyword("href"),O.call(null,G),e.keyword("target"),"_blank"),(()=>{const B=e.keyword("label").call(null,G);return e.truth_.call(null,B)?B:e.keyword("key").call(null,G)})()),e.truth_.call(null,e.keyword("activated").call(null,ae))?e.vector(P,e.array_map(e.keyword("on-click"),function(B){return M.call(null,B,G)})):e.vector(R,e.array_map(e.keyword("on-click"),function(B){return x.call(null,B,G)}))),e.keyword("class"),"mb-4",e.keyword("content"),e.vector(e.keyword("div"),(()=>{const B=e.keyword("description").call(null,G);if(e.truth_.call(null,B)){const oe=B;return e.vector(e.keyword("p"),oe)}})())))),V=e.unchecked_inc.call(null,V);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,v),o.call(null,e.chunk_rest.call(null,d))):e.chunk_cons.call(null,e.chunk.call(null,v),null)}else{const y=e.first.call(null,d),Z=e.get.call(null,p,e.keyword("key").call(null,y));return e.cons.call(null,e.vector(m.box,e.array_map(e.keyword("key"),e.keyword("key").call(null,y),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(N),e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"underline",e.keyword("href"),O.call(null,y),e.keyword("target"),"_blank"),(()=>{const v=e.keyword("label").call(null,y);return e.truth_.call(null,v)?v:e.keyword("key").call(null,y)})()),e.truth_.call(null,e.keyword("activated").call(null,Z))?e.vector(P,e.array_map(e.keyword("on-click"),function(v){return M.call(null,v,y)})):e.vector(R,e.array_map(e.keyword("on-click"),function(v){return x.call(null,v,y)}))),e.keyword("class"),"mb-4",e.keyword("content"),e.vector(e.keyword("div"),(()=>{const v=e.keyword("description").call(null,y);if(e.truth_.call(null,v)){const V=v;return e.vector(e.keyword("p"),V)}})()))),o.call(null,e.rest.call(null,d)))}}break}},null,null)}.call(null,e.sort_by.call(null,function(o){return I.lower_case.call(null,(()=>{const n=e.keyword("label").call(null,o);return e.truth_.call(null,n)?n:e.keyword("key").call(null,o)})())},e.vals.call(null,w))))};T.add_element.call(null,e.keyword("plugins-page"),E.reactify_component.call(null,te));export{P as active_plugin_button,R as available_plugin_button,K as dashboard_content_types,X as dashboard_page,Y as dashboard_plugins,W as dashboard_server,F as dashboard_settings,j as dashboard_theme,J as dashboard_user,q as index_by,N as plugin_icon,O as plugin_url,te as plugins_page,ee as settings_page,$ as settings_page_STAR_,D as theme_icon,le as themes_page,re as users_page};
