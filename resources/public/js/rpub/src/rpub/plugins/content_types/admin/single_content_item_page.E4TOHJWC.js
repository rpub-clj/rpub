import*as l from"cherry-cljs/cljs.core.js";import*as A from"cherry-cljs/lib/clojure.string.js";import*as Q from"rads.inflections";import*as w from"rpub.lib.html";import*as G from"rpub.lib.permalinks";import*as v from"rpub.plugins.admin.impl";var x=function(o){const c=o,e=l.__destructure_map.call(null,c),t=l.get.call(null,e,l.keyword("content-item")),n=l.get.call(null,e,l.keyword("editing")),a=l.get.call(null,e,l.keyword("creating")),d=l.get.call(null,e,l.keyword("field-types")),i=t,f=l.__destructure_map.call(null,i),y=l.get.call(null,f,l.keyword("content-type"));return l.vector(l.keyword("div"),function p(g){return new l.LazySeq(null,function(){let b=g;for(;;){const h=l.seq.call(null,b);if(l.truth_.call(null,h)){const s=h;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,s))){const r=l.chunk_first.call(null,s),k=l.count.call(null,r),m=l.chunk_buffer.call(null,k);return(()=>{let u=0;for(;;){if(u<k){const _=l._nth.call(null,r,u),S=l.get_in.call(null,t,l.vector(l.keyword("document"),l.keyword("id").call(null,_))),T=l.truth_.call(null,l._EQ_.call(null,S,l.keyword("rpub.plugins.content-types.admin.single-content-item-page/new-field")))?"":S;l.chunk_append.call(null,m,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,_)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,_)),l.keyword("name").call(null,_)),l.vector(l.keyword("div"),w.custom_element.call(null,l.vector(l.get_in.call(null,d,l.vector(l.keyword("type").call(null,_),l.keyword("input"))),l.array_map(l.keyword("field"),_,l.keyword("value"),T,l.keyword("on-change"),function(z){return l.prn.call(null,z.target.value)},l.keyword("editing"),n,l.keyword("creating"),a)))))),u=l.unchecked_inc.call(null,u);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,m),p.call(null,l.chunk_rest.call(null,s))):l.chunk_cons.call(null,l.chunk.call(null,m),null)}else{const r=l.first.call(null,s),k=l.get_in.call(null,t,l.vector(l.keyword("document"),l.keyword("id").call(null,r))),m=l.truth_.call(null,l._EQ_.call(null,k,l.keyword("rpub.plugins.content-types.admin.single-content-item-page/new-field")))?"":k;return l.cons.call(null,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,r)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,r)),l.keyword("name").call(null,r)),l.vector(l.keyword("div"),w.custom_element.call(null,l.vector(l.get_in.call(null,d,l.vector(l.keyword("type").call(null,r),l.keyword("input"))),l.array_map(l.keyword("field"),r,l.keyword("value"),m,l.keyword("on-change"),function(u){return l.prn.call(null,u.target.value)},l.keyword("editing"),n,l.keyword("creating"),a))))),p.call(null,l.rest.call(null,s)))}}break}},null,null)}.call(null,l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,y))))},q=function(o){const c=o,e=l.__destructure_map.call(null,c),t=l.get.call(null,e,l.keyword("content-type")),n=l.get.call(null,e,l.keyword("field-types")),a=l.array_map(l.keyword("content-type"),t,l.keyword("document"),l.into.call(null,l.array_map(),l.map.call(null,function(i){return l.vector(l.keyword("id").call(null,i),l.keyword("rpub.plugins.content-types.admin.single-content-item-page/new-field"))},l.keyword("fields").call(null,t))));return l.vector(l.keyword("div.p-4"),l.vector(v.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.str.call(null,"New ",Q.singular.call(null,l.get_in.call(null,a,l.vector(l.keyword("content-type"),l.keyword("name"))))))),l.vector(v.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(x,l.array_map(l.keyword("content-item"),a,l.keyword("field-types"),n,l.keyword("creating"),!0)),l.vector(w.submit_button,l.array_map(l.keyword("ready-label"),"Create",l.keyword("submit-label"),"Creating...",l.keyword("submitting"),!1))))))},L=function(o){const c=o,e=l.__destructure_map.call(null,c),t=l.get.call(null,e,l.keyword("content-type")),n=l.get.call(null,e,l.keyword("content-item")),a=l.get.call(null,e,l.keyword("field-types")),d=l.get.call(null,e,l.keyword("site-base-url")),i=l.get.call(null,e,l.keyword("permalink-routes")),f=!1,y=Q.singular.call(null,l.keyword("name").call(null,t)),E=l.get_in.call(null,n,l.vector(l.keyword("fields"),"Title")),p=G.router.call(null,i),g=l.str.call(null,d,l.keyword("path").call(null,G.match_by_name.call(null,p,l.keyword("single"),l.array_map(l.keyword("content-type-slug"),l.name.call(null,l.keyword("slug").call(null,t)),l.keyword("content-item-slug"),l.get_in.call(null,n,l.vector(l.keyword("fields"),"Slug")))))),b=function(h){return confirm(l.str.call(null,"Are you sure you want to delete this ",A.lower_case.call(null,y),"?"))};return l.vector(l.keyword("div.p-4"),l.vector(v.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.vector(l.keyword("div.flex"),l.vector(l.keyword("div.grow"),l.vector(l.keyword("span.italic.text-blue-600"),l.str.call(null,y,": ")),E),l.vector(l.keyword("div"),l.vector(w.delete_button,l.array_map(l.keyword("on-click"),b),l.str.call(null,"Delete ",y)))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("a.underline.text-gray-500"),l.array_map(l.keyword("href"),g,l.keyword("target"),"_blank"),g)))),l.vector(v.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(x,l.array_map(l.keyword("content-item"),n,l.keyword("field-types"),a,l.keyword("editing"),!0)),l.vector(w.submit_button,l.array_map(l.keyword("ready-label"),"Save",l.keyword("submit-label"),"Saving...",l.keyword("submitting"),f))))))},N=function(o){const c=o,e=l.__destructure_map.call(null,c),t=e,n=l.get.call(null,e,l.keyword("editing"));return l.truth_.call(null,n)?l.vector(L,t):l.vector(q,t)},C=l.array_map(l.keyword("page-id"),l.keyword("single-content-item-page"),l.keyword("component"),N);export{C as config,x as content_item_fields,L as edit_content_item_page,q as new_content_item_page,N as single_content_item_page};
