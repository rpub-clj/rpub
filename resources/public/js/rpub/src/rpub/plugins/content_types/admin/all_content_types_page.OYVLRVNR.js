import*as e from"cherry-cljs/cljs.core.js";import*as U from"rads.dnd";import{useEffect as M}from"react";import*as B from"cherry-cljs/lib/clojure.string.js";import*as Ee from"rads.inflections";import"rpub.lib.dag";import{use_dag as N}from"rpub.lib.dag.react";import*as S from"rpub.lib.html";import*as Qe from"rpub.lib.http";import*as q from"rpub.plugins.admin.impl";import*as $e from"rpub.plugins.admin.roles";var D=function(l){return q.__GT_unsaved_changes.call(null,e.keyword("all-content-types-page"),e.select_keys.call(null,l,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"))))},A=function(l){return q.update_unsaved_changes_BANG_.call(null,D.call(null,l))},H=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("content-type")),o=e.array_map(e.keyword("content-type"),e.select_keys.call(null,a,e.vector(e.keyword("id"))));return e.assoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"),o)},J=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("content-type")),o=e.get.call(null,t,e.keyword("content-type-field")),u=e.array_map(e.keyword("content-type"),e.select_keys.call(null,a,e.vector(e.keyword("id"))),e.keyword("content-type-field"),e.select_keys.call(null,o,e.vector(e.keyword("id"))));return e.assoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"),u)},V=function(l){return e.dissoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"))},W=function(l){const c=e.get_in.call(null,l,e.vector(e.keyword("rpub.lib.dag/values"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"))),n=e.get.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),t=e.get_in.call(null,n,e.vector(e.keyword("content-type"),e.keyword("id"))),a=e.get_in.call(null,n,e.vector(e.keyword("content-type-field"),e.keyword("id"))),o=e.get.call(null,c,t),u=null,r=e.truth_.call(null,e.keyword("content-type").call(null,n))?e.assoc.call(null,u,e.keyword("content-type"),o):u;return e.truth_.call(null,e.keyword("content-type-field").call(null,n))?e.assoc.call(null,r,e.keyword("content-type-field"),e.first.call(null,e.filter.call(null,function(d){return e._EQ_.call(null,e.keyword("id").call(null,d),a)},e.keyword("fields").call(null,o)))):r},X=function(l){if(e.truth_.call(null,e.seq.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past").call(null,l)))){const c=e.peek.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past").call(null,l)),n=e.dissoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"));return e.assoc.call(null,e.assoc.call(null,c,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.pop.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past").call(null,l))),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"),e.fnil.call(null,e.conj,e.vector()).call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future").call(null,l),n))}else return l},Y=function(l){if(e.truth_.call(null,e.seq.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future").call(null,l)))){const c=e.peek.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future").call(null,l)),n=e.dissoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"));return e.assoc.call(null,e.assoc.call(null,c,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.fnil.call(null,e.conj,e.vector()).call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past").call(null,l),n)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"),e.pop.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future").call(null,l)))}else return l},Z=e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),I=function(l){const c=function(n){const t=e.array.call(null),a=e.alength.call(null,arguments);let o=0;for(;;){if(o<a){t.push(arguments[o]),o=o+1;continue}break}const u=1<e.alength.call(null,t)?new e.IndexedSeq(t.slice(1),0,null):null;return c.cljs$core$IFn$_invoke$arity$variadic(arguments[0],u)};return c.cljs$core$IFn$_invoke$arity$variadic=function(n,t){const a=e.select_keys.call(null,n,Z),o=e.apply.call(null,l,n,t);return e.assoc.call(null,e.update.call(null,o,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.fnil.call(null,e.conj,e.vector()),a),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"),e.vector())},c.cljs$lang$maxFixedArity=1,c.cljs$lang$applyTo=function(n){const t=e.first.call(null,n),a=e.next.call(null,n);return this.cljs$core$IFn$_invoke$arity$variadic(t,a)},c},P=function(l){const c=l,n=e.__destructure_map.call(null,c),t=n,a=e.get.call(null,n,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/original-content-types")),o=q.index_by.call(null,e.keyword("id"),a);return e.assoc.call(null,t,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),o)},ee=function(l){return e.assoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save"),!0)},le=function(l){return e.assoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save"),!1)},ne=function(l){return e.assoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save"),!1)},R=function(l,c){return e.str.call(null,e.keyword("id").call(null,l),"|",e.keyword("id").call(null,c))},z=function(l){const c=l,n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("content-type")),a=e.get.call(null,n,e.keyword("content-type-field")),o=e.get.call(null,n,e.keyword("field-types")),u=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"))),r=e.nth.call(null,u,0,null),d=e.__destructure_map.call(null,r),y=e.get.call(null,d,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),f=e.nth.call(null,u,1,null),v=(()=>{const h=e._EQ_.call(null,e.get_in.call(null,y,e.vector(e.keyword("content-type"),e.keyword("id"))),e.keyword("id").call(null,t));return e.truth_.call(null,h)?e._EQ_.call(null,e.get_in.call(null,y,e.vector(e.keyword("content-type-field"),e.keyword("id"))),e.keyword("id").call(null,a)):h})(),Q=e.get.call(null,o,e.keyword("type").call(null,a));return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),e.str.call(null,"bg-white my-2 flex items-center ","w-full font-semibold border ","rounded-[6px] hover:border-blue-500 ",e.truth_.call(null,v)?"ring-2 ring-blue-400 border-blue-500":"border-gray-100"),e.keyword("data-draggable"),"true",e.keyword("data-id"),R.call(null,t,a),e.keyword("data-container-id"),e.keyword("id").call(null,t),e.keyword("data-content-type-field-id"),e.keyword("id").call(null,a),e.keyword("key"),e.keyword("id").call(null,a)),e.vector(e.keyword("label"),e.array_map(e.keyword("for"),"field-name")),e.vector(e.keyword("div.w-full.pl-2.py-2"),e.array_map(e.keyword("on-click"),function(h){return f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type-field"),e.array_map(e.keyword("content-type"),t,e.keyword("content-type-field"),a))}),e.keyword("name").call(null,a)),e.vector(e.keyword("div.bg-gray-50.px-2.py-2.border-l.border-l-gray-100"),e.array_map(e.keyword("class"),"min-w-[150px] rounded-r-[6px]",e.keyword("on-click"),function(h){return f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type-field"),e.array_map(e.keyword("content-type"),t,e.keyword("content-type-field"),a))}),e.vector(e.keyword("label").call(null,Q))))},te=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("current-user")),o=e.get.call(null,t,e.keyword("content-types")),u=e.get.call(null,t,e.keyword("field-types")),r=e.get.call(null,t,e.keyword("unsaved-changes")),d=q.index_by.call(null,e.keyword("id"),o);return e.array_map(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/current-user"),a,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.get_in.call(null,r,e.vector(e.keyword("value"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"))),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"),e.get_in.call(null,r,e.vector(e.keyword("value"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"))),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/original-content-types"),o,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/field-types"),u,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),(()=>{const y=e.get_in.call(null,r,e.vector(e.keyword("value"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")));return e.truth_.call(null,y)?y:d})())},j=e.uuid.call(null,"019750e2-46c0-7573-aae9-d8f1a8c08c8b"),L=function(l){const c=l,n=e.__destructure_map.call(null,c),t=n,a=e.get.call(null,n,e.keyword("label")),o=e.get.call(null,n,e.keyword("description")),u=e.get.call(null,n,e.keyword("type")),r=e.get.call(null,n,e.keyword("selected")),d=e.get.call(null,n,e.keyword("draggable")),y=e.get.call(null,n,e.keyword("on-click"));return e.truth_.call(null,e.not.call(null,d))?e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"mb-2 flex items-center ps-4 border border-gray-200 rounded-[6px]",e.keyword("on-click"),y),e.vector(e.keyword("input"),e.array_map(e.keyword("class"),"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 focus:ring-2"),e.array_map(e.keyword("type"),"radio",e.keyword("checked"),r,e.keyword("value"),"",e.keyword("name"),"bordered-radio")),e.vector(e.keyword("label"),e.array_map(e.keyword("class"),"w-full py-4 ms-2 text-sm font-medium text-gray-900"),a)):e.vector(e.keyword("div"),e.array_map(e.keyword("class"),e.str.call(null,"border rounded-[6px] p-2 mb-4 bg-gray-50 ",e.truth_.call(null,d)?"cursor-move hover:shadow-md hover:bg-gray-100 border-gray-100":"cursor-pointer hover:border-blue-500"," ",e.truth_.call(null,r)?"ring-2 ring-blue-400 border-blue-500":"border-gray-100"),e.keyword("data-draggable"),d,e.keyword("data-field-type"),e.name.call(null,u),e.keyword("data-container-id"),j),e.vector(e.keyword("h4"),e.array_map(e.keyword("class"),"font-semibold"),a),e.vector(e.keyword("p"),e.array_map(e.keyword("class"),"text-sm text-gray-500"),o))},O=function(l){return e.map.call(null,function(c){const n=c,t=e.nth.call(null,n,0,null),a=e.nth.call(null,n,1,null);return e.assoc.call(null,a,e.keyword("type"),t)},l)},ae=function(l){const c=l,n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("field-types")),a=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"))),o=e.nth.call(null,a,0,null),u=e.__destructure_map.call(null,o),r=e.get.call(null,u,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),d=e.nth.call(null,a,1,null),y=O.call(null,t),f=function(g,p){return A.call(null,d.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/change-field-type"),p))},v=function(g,p){return A.call(null,d.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type"),p))},Q=function(g,p){const i=prompt("New name:");if(e.truth_.call(null,i)){const _=i;return A.call(null,d.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type"),e.assoc.call(null,p,e.keyword("new-name"),_)))}},h=function(g,p){return A.call(null,d.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type-field"),p))},x=function(g,p){const i=prompt("New name:");if(e.truth_.call(null,i)){const _=i;return A.call(null,d.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type-field"),e.assoc.call(null,p,e.keyword("new-name"),_)))}};return e.truth_.call(null,r)?e.truth_.call(null,e.keyword("content-type-field").call(null,r))?e.vector(q.box,e.array_map(e.keyword("class"),"h-full",e.keyword("title"),e.vector(e.keyword("h3"),e.array_map(e.keyword("class"),"text-2xl font-app-serif font-semibold"),e.vector(e.keyword("span.italic.text-blue-600"),"Field: "),e.get_in.call(null,r,e.vector(e.keyword("content-type-field"),e.keyword("name")))),e.keyword("content"),e.vector(e.keyword("div"),e.vector(e.keyword("div.mb-8.flex"),e.vector(S.action_button,e.array_map(e.keyword("class"),"mt-2 mr-2",e.keyword("on-click"),function(g){return x.call(null,g,r)}),"Rename"),e.vector(S.delete_button,e.array_map(e.keyword("class"),"mt-2",e.keyword("on-click"),function(g){return h.call(null,g,r)}),"Delete")),e.vector(e.keyword("h4"),e.array_map(e.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Change Type"),e.vector(e.keyword("div"),function p(i){return new e.LazySeq(null,function(){let _=i;for(;;){const b=e.seq.call(null,_);if(e.truth_.call(null,b)){const w=b;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,w))){const m=e.chunk_first.call(null,w),G=e.count.call(null,m),$=e.chunk_buffer.call(null,G);return(()=>{let s=0;for(;;){if(s<G){const k=e._nth.call(null,m,s);e.chunk_append.call(null,$,e.vector(L,e.merge.call(null,k,e.array_map(e.keyword("selected"),e._EQ_.call(null,e.get_in.call(null,r,e.vector(e.keyword("content-type-field"),e.keyword("type"))),e.keyword("type").call(null,k)),e.keyword("on-click"),function(T){return f.call(null,T,e.assoc.call(null,r,e.keyword("new-field-type"),e.keyword("type").call(null,k)))})))),s=e.unchecked_inc.call(null,s);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,$),p.call(null,e.chunk_rest.call(null,w))):e.chunk_cons.call(null,e.chunk.call(null,$),null)}else{const m=e.first.call(null,w);return e.cons.call(null,e.vector(L,e.merge.call(null,m,e.array_map(e.keyword("selected"),e._EQ_.call(null,e.get_in.call(null,r,e.vector(e.keyword("content-type-field"),e.keyword("type"))),e.keyword("type").call(null,m)),e.keyword("on-click"),function(G){return f.call(null,G,e.assoc.call(null,r,e.keyword("new-field-type"),e.keyword("type").call(null,m)))}))),p.call(null,e.rest.call(null,w)))}}break}},null,null)}.call(null,y))))):e.truth_.call(null,e.keyword("content-type").call(null,r))?e.vector(q.box,e.array_map(e.keyword("class"),"h-full",e.keyword("title"),e.vector(e.keyword("h3"),e.array_map(e.keyword("class"),"text-2xl font-app-serif font-semibold"),e.vector(e.keyword("span.italic.text-blue-600"),"Content Type: "),e.get_in.call(null,r,e.vector(e.keyword("content-type"),e.keyword("name")))),e.keyword("content"),e.vector(e.keyword("div"),e.vector(e.keyword("div.mb-8.flex"),e.vector(S.action_button,e.array_map(e.keyword("class"),"mt-2 mr-2",e.keyword("on-click"),function(g){return Q.call(null,g,r)}),"Rename"),e.vector(S.delete_button,e.array_map(e.keyword("class"),"mt-2",e.keyword("on-click"),function(g){return v.call(null,g,r)}),"Delete")),e.vector(e.keyword("h4"),e.array_map(e.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Add Field"),e.vector(e.keyword("div"),function p(i){return new e.LazySeq(null,function(){let _=i;for(;;){const b=e.seq.call(null,_);if(e.truth_.call(null,b)){const w=b;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,w))){const m=e.chunk_first.call(null,w),G=e.count.call(null,m),$=e.chunk_buffer.call(null,G);return(()=>{let s=0;for(;;){if(s<G){const k=e._nth.call(null,m,s);e.chunk_append.call(null,$,e.vector(L,e.assoc.call(null,k,e.keyword("draggable"),!0))),s=e.unchecked_inc.call(null,s);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,$),p.call(null,e.chunk_rest.call(null,w))):e.chunk_cons.call(null,e.chunk.call(null,$),null)}else{const m=e.first.call(null,w);return e.cons.call(null,e.vector(L,e.assoc.call(null,m,e.keyword("draggable"),!0)),p.call(null,e.rest.call(null,w)))}}break}},null,null)}.call(null,y))))):null:e.vector(q.box,e.array_map(e.keyword("class"),"h-full",e.keyword("title"),e.vector(e.keyword("h3"),e.array_map(e.keyword("class"),"text-2xl font-app-serif font-semibold"),"Add Field"),e.keyword("content"),e.vector(e.keyword("div"),function p(i){return new e.LazySeq(null,function(){let _=i;for(;;){const b=e.seq.call(null,_);if(e.truth_.call(null,b)){const w=b;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,w))){const m=e.chunk_first.call(null,w),G=e.count.call(null,m),$=e.chunk_buffer.call(null,G);return(()=>{let s=0;for(;;){if(s<G){const k=e._nth.call(null,m,s);e.chunk_append.call(null,$,e.vector(L,e.assoc.call(null,k,e.keyword("draggable"),!0))),s=e.unchecked_inc.call(null,s);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,$),p.call(null,e.chunk_rest.call(null,w))):e.chunk_cons.call(null,e.chunk.call(null,$),null)}else{const m=e.first.call(null,w);return e.cons.call(null,e.vector(L,e.assoc.call(null,m,e.keyword("draggable"),!0)),p.call(null,e.rest.call(null,w)))}}break}},null,null)}.call(null,y))))},ce=function(l){const c=l,n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("name"));return e.array_map(e.keyword("id"),e.random_uuid.call(null),e.keyword("slug"),e.keyword("new-content-type"),e.keyword("name"),t,e.keyword("content-item-count"),0,e.keyword("fields"),e.vector(e.array_map(e.keyword("id"),e.uuid.call(null,"cd334826-1ec6-4906-8e7f-16ece1865faf"),e.keyword("name"),"Title",e.keyword("type"),e.keyword("text"),e.keyword("rank"),1),e.array_map(e.keyword("id"),e.uuid.call(null,"6bd0ff7a-b720-4972-b98a-2aa85d179357"),e.keyword("name"),"Slug",e.keyword("type"),e.keyword("text"),e.keyword("rank"),2),e.array_map(e.keyword("id"),e.uuid.call(null,"65a6aa2e-73a3-4283-afe1-58e610d6727d"),e.keyword("name"),"Content",e.keyword("type"),e.keyword("text-lg"),e.keyword("rank"),3)))},oe=function(l){const c=l,n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("content-types")),a=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/current-user"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"))),o=e.nth.call(null,a,0,null),u=e.__destructure_map.call(null,o),r=e.get.call(null,u,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/current-user")),d=e.get.call(null,u,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),y=e.nth.call(null,a,1,null);return e.vector(q.box,e.array_map(e.keyword("class"),"pb-4",e.keyword("data-no-select"),!0,e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("div.grow"),"Content Types"),e.truth_.call(null,$e.allowed_QMARK_.call(null,r,e.array_map(e.keyword("resource"),e.keyword("content-types"),e.keyword("action"),e.keyword("create"))))?e.vector(S.button,e.array_map(e.keyword("class"),"font-app-sans ml-auto",e.keyword("on-click"),function(f){const v="New Content Type",Q=(()=>{let h=1,x=e.vals.call(null,d);for(;;){const g=e.truth_.call(null,e._EQ_.call(null,h,1))?v:e.str.call(null,v," ",h);if(e.truth_.call(null,e.some.call(null,function(p){return e._EQ_.call(null,e.keyword("name").call(null,p),g)},x))){let p=h+1,i=e.rest.call(null,x);h=p,x=i;continue}else return g;break}})();return A.call(null,y.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/new-content-type"),e.array_map(e.keyword("content-type"),ce.call(null,e.array_map(e.keyword("name"),Q)))))}),"New Content Type"):null),e.keyword("content"),e.vector(q.content_item_counts,e.array_map(e.keyword("content-types"),t))))},re=function(l){const c=e.select_keys.call(null,l,e.vector(e.keyword("content-types")));return Qe.post.call(null,"/admin/api/content-types/update",e.array_map(e.keyword("body"),c))},ue=function(){const l=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"))),c=e.nth.call(null,l,0,null),n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save")),a=e.get.call(null,n,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),o=e.nth.call(null,l,1,null);return e.vector(S.modal,e.array_map(e.keyword("visible"),t,e.keyword("title"),"Save Changes",e.keyword("content"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4 space-y-4 md:p-5"),e.vector(e.keyword("p.text-base.leading-relaxed.text-gray-500"),"Are you sure you want to save your changes?"),e.vector(e.keyword("pre"),(()=>{const u=e.atom.call(null,""),r=e._STAR_print_fn_STAR_;try{e.set_print_fn_BANG_.call(null,function(d){return e.swap_BANG_.call(null,u,e.str,d)}),e.prn.call(null,a)}finally{e.set_print_fn_BANG_.call(null,r)}return e.deref.call(null,u)})())),e.keyword("on-confirm"),async function(u){return o.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/confirm-save")),await re.call(null,e.array_map(e.keyword("content-types"),e.vals.call(null,a)))},e.keyword("on-cancel"),function(u){return o.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/cancel-save"))}))},se=function(l){const c=l,n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("unsaved-changes")),a=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"))),o=e.nth.call(null,a,0,null),u=e.nth.call(null,a,1,null);return e.vector(q.box,e.array_map(e.keyword("class"),"mb-4",e.keyword("content"),e.vector(e.keyword("div"),e.vector(e.keyword("div.mb-4"),e.vector(e.keyword("div.flex.mb-2"),e.vector(S.button,e.array_map(e.keyword("class"),"mr-2",e.keyword("on-click"),function(r){return A.call(null,u.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/undo")))}),"Undo"),e.vector(S.button,e.array_map(e.keyword("class"),"mr-2",e.keyword("on-click"),function(r){return A.call(null,u.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/redo")))}),"Redo"),e.vector(S.button,e.array_map(e.keyword("class"),"mr-2",e.keyword("on-click"),function(r){return A.call(null,u.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/reset")))}),"Reset"),e.vector(S.button,e.array_map(e.keyword("class"),"mr-2",e.keyword("on-click"),function(r){return u.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/request-save"))}),"Save"))),e.vector(e.keyword("div.text-lg.font-app-serif.font-semibold"),e.vector(e.keyword("span.italic.text-gray-400"),"Status: "),e.truth_.call(null,e.seq.call(null,e.keyword("value").call(null,t)))?"Unsaved changes.":"All changes saved."))))},C=function(l){const c=l,n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("drop-indicator")),a=e.get.call(null,n,e.keyword("divider-element")),o=e.get.call(null,n,e.keyword("item-id")),u=e.get.call(null,n,e.keyword("item-element")),r=(()=>{const y=e._EQ_.call(null,e.keyword("id").call(null,t),o);return e.truth_.call(null,y)?e._EQ_.call(null,e.keyword("position").call(null,t),e.keyword("before")):y})(),d=(()=>{const y=e._EQ_.call(null,e.keyword("id").call(null,t),o);return e.truth_.call(null,y)?e._EQ_.call(null,e.keyword("position").call(null,t),e.keyword("after")):y})();return e.list.call(null,e.truth_.call(null,r)?a:null,u,e.truth_.call(null,d)?a:null)},K=function(l){const c=l,n=e.__destructure_map.call(null,c),t=e.get.call(null,n,e.keyword("content-type")),a=e.get.call(null,n,e.keyword("field-types")),o=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator"))),u=e.nth.call(null,o,0,null),r=e.__destructure_map.call(null,u),d=e.get.call(null,r,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator")),y=e.nth.call(null,o,1,null),f=e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"h-[3px] bg-[#2196F3] my-[8px] rounded-[3px]"));return e.vector(e.keyword("div"),e.array_map(e.keyword("data-droppable"),"true",e.keyword("data-id"),e.keyword("id").call(null,t)),function Q(h){return new e.LazySeq(null,function(){let x=h;for(;;){const g=e.seq.call(null,x);if(e.truth_.call(null,g)){const p=g;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,p))){const i=e.chunk_first.call(null,p),_=e.count.call(null,i),b=e.chunk_buffer.call(null,_);return(()=>{let w=0;for(;;){if(w<_){const m=e._nth.call(null,i,w),G=e.vector(z,e.array_map(e.keyword("content-type"),t,e.keyword("field-types"),a,e.keyword("content-type-field"),m));e.chunk_append.call(null,b,e.vector(C,e.array_map(e.keyword("drop-indicator"),d,e.keyword("divider-element"),f,e.keyword("item-id"),R.call(null,t,m),e.keyword("item-element"),G))),w=e.unchecked_inc.call(null,w);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,b),Q.call(null,e.chunk_rest.call(null,p))):e.chunk_cons.call(null,e.chunk.call(null,b),null)}else{const i=e.first.call(null,p),_=e.vector(z,e.array_map(e.keyword("content-type"),t,e.keyword("field-types"),a,e.keyword("content-type-field"),i));return e.cons.call(null,e.vector(C,e.array_map(e.keyword("drop-indicator"),d,e.keyword("divider-element"),f,e.keyword("item-id"),R.call(null,t,i),e.keyword("item-element"),_)),Q.call(null,e.rest.call(null,p)))}}break}},null,null)}.call(null,e.sort_by.call(null,e.keyword("rank"),e.keyword("fields").call(null,t))))},pe=function(l){const c=l,n=e.__destructure_map.call(null,c),t=n,a=e.get.call(null,n,e.keyword("field-types")),o=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"))),u=e.nth.call(null,o,0,null),r=e.__destructure_map.call(null,u),d=e.get.call(null,r,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),y=e.get.call(null,r,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),f=e.nth.call(null,o,1,null),v=e.sort_by.call(null,e.keyword("created-at"),e._GT_,e.vals.call(null,d));return function h(x){return new e.LazySeq(null,function(){let g=x;for(;;){const p=e.seq.call(null,g);if(e.truth_.call(null,p)){const i=p;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,i))){const _=e.chunk_first.call(null,i),b=e.count.call(null,_),w=e.chunk_buffer.call(null,b);return(()=>{let m=0;for(;;){if(m<b){const G=e._nth.call(null,_,m);e.chunk_append.call(null,w,e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"pb-4",e.keyword("key"),e.keyword("id").call(null,G),e.keyword("data-no-select"),!0),e.vector(q.box,e.array_map(e.keyword("hover"),!0,e.keyword("on-click"),function(s){return e.truth_.call(null,s.target.closest("[data-content-type-field-id]"))?null:f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type"),e.array_map(e.keyword("content-type"),G))},e.keyword("selected"),(()=>{const s=e.not.call(null,e.keyword("content-type-field").call(null,y));return e.truth_.call(null,s)?e._EQ_.call(null,e.get_in.call(null,y,e.vector(e.keyword("content-type"),e.keyword("id"))),e.keyword("id").call(null,G)):s})(),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center group"),e.vector(e.keyword("h3"),e.array_map(e.keyword("class"),"text-2xl"),e.keyword("name").call(null,G))),e.keyword("content"),e.truth_.call(null,e.seq.call(null,e.keyword("fields").call(null,G)))?e.vector(e.keyword("div"),e.array_map(e.keyword("key"),e.keyword("id").call(null,G)),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-start")),e.vector(K,e.array_map(e.keyword("field-types"),a,e.keyword("content-type"),G))):null)))),m=e.unchecked_inc.call(null,m);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,w),h.call(null,e.chunk_rest.call(null,i))):e.chunk_cons.call(null,e.chunk.call(null,w),null)}else{const _=e.first.call(null,i);return e.cons.call(null,e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"pb-4",e.keyword("key"),e.keyword("id").call(null,_),e.keyword("data-no-select"),!0),e.vector(q.box,e.array_map(e.keyword("hover"),!0,e.keyword("on-click"),function(b){return e.truth_.call(null,b.target.closest("[data-content-type-field-id]"))?null:f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type"),e.array_map(e.keyword("content-type"),_))},e.keyword("selected"),(()=>{const b=e.not.call(null,e.keyword("content-type-field").call(null,y));return e.truth_.call(null,b)?e._EQ_.call(null,e.get_in.call(null,y,e.vector(e.keyword("content-type"),e.keyword("id"))),e.keyword("id").call(null,_)):b})(),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center group"),e.vector(e.keyword("h3"),e.array_map(e.keyword("class"),"text-2xl"),e.keyword("name").call(null,_))),e.keyword("content"),e.truth_.call(null,e.seq.call(null,e.keyword("fields").call(null,_)))?e.vector(e.keyword("div"),e.array_map(e.keyword("key"),e.keyword("id").call(null,_)),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-start")),e.vector(K,e.array_map(e.keyword("field-types"),a,e.keyword("content-type"),_))):null))),h.call(null,e.rest.call(null,i)))}}break}},null,null)}.call(null,e.sort_by.call(null,e.keyword("name"),v))},de=function(l){const c=l,n=e.__destructure_map.call(null,c),t=n,a=e.get.call(null,n,e.keyword("children"));return M.call(null,function(){const o=e.clj__GT_js.call(null,Ee.camel_case_keys.call(null,e.dissoc.call(null,t,e.keyword("children")),e.keyword("lower"))),u=U.start.call(null,o);return function(){return U.stop.call(null,u)}},[]),a},ye=function(l){return e.update.call(null,e.js__GT_clj.call(null,U.dropIndicator.call(null,l),e.keyword("keywordize-keys"),!0),e.keyword("position"),e.keyword)},ie=function(l){return e.str.call(null,l.dataset.containerId,"|",e.random_uuid.call(null))},_e=function(l){const c=l,n=e.__destructure_map.call(null,c),t=n,a=e.get.call(null,n,e.keyword("field-types")),o=e.get.call(null,n,e.keyword("unsaved-changes")),u=N.call(null,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"))),r=e.nth.call(null,u,0,null),d=e.__destructure_map.call(null,r),y=e.get.call(null,d,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),f=e.nth.call(null,u,1,null),v=M.call(null,function(){return f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/init"),t)},[]),Q=function(p){return e.not.call(null,(()=>{const i=p.target.closest("[data-no-select]");return e.truth_.call(null,i)?i:p.target.closest("[data-content-type-field-id]")})())},h=function(p){if(e.truth_.call(null,Q.call(null,p)))return f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/clear-selection"))},x=e.sort_by.call(null,e.keyword("created-at"),e._GT_,e.vals.call(null,y)),g=function(p){const i=ye.call(null,p),_=e.keyword.call(null,p.type),b=e.truth_.call(null,e.keyword_QMARK_.call(null,_))?e.subs.call(null,e.str.call(null,_),1):null;switch(b){case"drag":return f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/dnd-drag"),e.array_map(e.keyword("drop-indicator"),i));case"drop":return f.call(null,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/dnd-drop"),e.array_map(e.keyword("drop-indicator"),i,e.keyword("dnd-event"),p));default:throw new Error(e.str.call(null,"No matching clause: ",b))}};return e.vector(de,e.array_map(e.keyword("on-event"),g,e.keyword("generate-id"),ie,e.keyword("placeholder-classes"),"opacity-50",e.keyword("draggable-classes"),"shadow-lg"),e.vector(ue),e.vector(e.keyword("div.flex"),e.array_map(e.keyword("class"),"flex",e.keyword("on-click"),h),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex-grow"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4 pr-[384px]"),e.vector(oe,e.array_map(e.keyword("content-types"),x)),e.vector(pe,e.array_map(e.keyword("content-types"),x,e.keyword("field-types"),a,e.keyword("unsaved-changes"),o))),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4 pl-2 w-[376px] fixed right-0 bottom-0 top-12",e.keyword("data-no-select"),!0),e.vector(se,e.array_map(e.keyword("unsaved-changes"),o)),e.vector(ae,e.array_map(e.keyword("field-types"),a))))))},ke=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("content-type"));return e.dissoc.call(null,e.update.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.dissoc,e.keyword("id").call(null,a)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"))},we=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("content-type")),o=e.get.call(null,t,e.keyword("content-type-field")),u=e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("id").call(null,a),e.keyword("fields"));return e.dissoc.call(null,e.update_in.call(null,l,u,function(r){return e.remove.call(null,function(d){return e._EQ_.call(null,e.keyword("id").call(null,d),e.keyword("id").call(null,o))},r)}),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"))},ge=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("content-type")),o=e.get.call(null,t,e.keyword("new-name")),u=e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("id").call(null,a),e.keyword("name"));return e.assoc_in.call(null,l,u,o)},me=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("content-type")),o=e.get.call(null,t,e.keyword("content-type-field")),u=e.get.call(null,t,e.keyword("new-name")),r=e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("id").call(null,a),e.keyword("fields"));return e.update_in.call(null,l,r,function(d){return e.map.call(null,function(y){return e.truth_.call(null,e._EQ_.call(null,e.keyword("id").call(null,y),e.keyword("id").call(null,o)))?e.assoc.call(null,y,e.keyword("name"),u):y},d)})},fe=function(l,c){const n=l,t=e.__destructure_map.call(null,n),a=t,o=e.get.call(null,t,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),u=c,r=e.__destructure_map.call(null,u),d=e.get.call(null,r,e.keyword("content-type")),y=e.assoc.call(null,o,e.keyword("id").call(null,d),d);return e.assoc.call(null,a,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),y)},be=function(l,c){const n=l,t=e.__destructure_map.call(null,n),a=t,o=e.get.call(null,t,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),u=c,r=e.__destructure_map.call(null,u),d=e.get.call(null,r,e.keyword("content-type")),y=e.get.call(null,r,e.keyword("content-type-field")),f=e.get.call(null,r,e.keyword("new-field-type")),v=e.update.call(null,e.get.call(null,o,e.keyword("id").call(null,d)),e.keyword("fields"),function(h){return e.map.call(null,function(x){return e.truth_.call(null,e._EQ_.call(null,e.keyword("id").call(null,x),e.keyword("id").call(null,y)))?e.assoc.call(null,x,e.keyword("type"),f):x},h)}),Q=e.assoc.call(null,o,e.keyword("id").call(null,d),v);return e.assoc.call(null,a,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),Q)},ve=function(l,c){const n=l,t=e.__destructure_map.call(null,n),a=t,o=e.get.call(null,t,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),u=c,r=e.__destructure_map.call(null,u),d=e.get.call(null,r,e.keyword("content-type")),y=e.get.call(null,r,e.keyword("new-fields")),f=e.assoc.call(null,e.get.call(null,o,e.keyword("id").call(null,d)),e.keyword("fields"),y),v=e.assoc.call(null,o,e.keyword("id").call(null,d),f);return e.assoc.call(null,a,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),v)},he=function(l,c){const n=c,t=e.__destructure_map.call(null,n),a=e.get.call(null,t,e.keyword("drop-indicator"));return e.assoc.call(null,l,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator"),a)},F=(()=>{const l=function(c){const n=e.array.call(null),t=e.alength.call(null,arguments);let a=0;for(;;){if(a<t){n.push(arguments[a]),a=a+1;continue}break}const o=3<e.alength.call(null,n)?new e.IndexedSeq(n.slice(3),0,null):null;return l.cljs$core$IFn$_invoke$arity$variadic(arguments[0],arguments[1],arguments[2],o)};return l.cljs$core$IFn$_invoke$arity$variadic=function(c,n,t,a){const o=e.vec.call(null,c),u=e.count.call(null,o),r=n<0?e.max.call(null,0,u+n):e.min.call(null,n,u),d=e.min.call(null,t,u-r),y=e.subvec.call(null,o,0,r),f=e.subvec.call(null,o,e.min.call(null,u,r+d));return e.vec.call(null,e.concat.call(null,y,a,f))},l.cljs$lang$maxFixedArity=3,l.cljs$lang$applyTo=function(c){const n=e.first.call(null,c),t=e.next.call(null,c),a=e.first.call(null,t),o=e.next.call(null,t),u=e.first.call(null,o),r=e.next.call(null,o);return this.cljs$core$IFn$_invoke$arity$variadic(n,a,u,r)},l})(),xe=function(l,c){const n=l,t=e.__destructure_map.call(null,n),a=t,o=e.get.call(null,t,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),u=e.get.call(null,t,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/field-types")),r=c,d=e.__destructure_map.call(null,r),y=e.get.call(null,d,e.keyword("drop-indicator")),f=e.get.call(null,d,e.keyword("dnd-event")),v=e.parse_uuid.call(null,f.dragClone.dataset.containerId),Q=e.parse_uuid.call(null,e.second.call(null,B.split.call(null,f.dragClone.dataset.id,/\|/))),h=(()=>{const s=f,k=s==null?null:s.dragClone,E=k==null?null:k.dataset,T=E==null?null:E.fieldType;return T==null?null:e.keyword.call(null,T)})(),x=e.sort_by.call(null,e.keyword("rank"),e.get_in.call(null,o,e.vector(v,e.keyword("fields")))),g=e.some.call(null,function(s){const k=s,E=e.nth.call(null,k,0,null),T=e.nth.call(null,k,1,null);if(e.truth_.call(null,e._EQ_.call(null,e.keyword("id").call(null,T),Q)))return E},e.map_indexed.call(null,e.vector,x)),p=(()=>{const s=f,k=s==null?null:s.dropTarget,E=k==null?null:k.dataset,T=E==null?null:E.id;return T==null?null:e.parse_uuid.call(null,T)})(),i=(()=>{const s=e.keyword("id").call(null,y),k=s==null?null:B.split.call(null,s,/\|/),E=k==null?null:e.second.call(null,k);return E==null?null:e.parse_uuid.call(null,E)})(),_=e.sort_by.call(null,e.keyword("rank"),e.get_in.call(null,o,e.vector(p,e.keyword("fields")))),b=e.some.call(null,function(s){const k=s,E=e.nth.call(null,k,0,null),T=e.nth.call(null,k,1,null);if(e.truth_.call(null,e._EQ_.call(null,e.keyword("id").call(null,T),i)))return E},e.map_indexed.call(null,e.vector,_)),w=e.truth_.call(null,e._EQ_.call(null,e.keyword("position").call(null,y),e.keyword("before")))?b:b+1,m=function(s){return e.map_indexed.call(null,function(k,E){return e.assoc.call(null,E,e.keyword("rank"),k+1)},s)},G=e.prn.call(null,e.hash_map(e.symbol.call(null,"target-field-id"),i,e.symbol.call(null,"source-field-id"),Q,e.symbol.call(null,"target-index"),b,e.symbol.call(null,"target-fields"),_,e.symbol.call(null,"source-container-id"),v,e.symbol.call(null,"insert-index"),w,e.symbol.call(null,"source-index"),g,e.symbol.call(null,"source-fields"),x,e.symbol.call(null,"template-items-id"),j,e.symbol.call(null,"target-container-id"),p)),$=e.truth_.call(null,(()=>{const s=p;return e.truth_.call(null,s)?e._EQ_.call(null,e.str.call(null,v),e.str.call(null,p)):s})())?(()=>{const s=m.call(null,F.call(null,F.call(null,_,g,1),w<=g?w:w-1,0,e.nth.call(null,x,g)));return e.assoc_in.call(null,a,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),p,e.keyword("fields")),s)})():e.truth_.call(null,(()=>{const s=p;if(e.truth_.call(null,s)){const k=e.str.call(null,v)!==e.str.call(null,p);return k&&e.str.call(null,v)!==e.str.call(null,j)}else return s})())?(()=>{const s=m.call(null,F.call(null,x,g,1)),k=m.call(null,F.call(null,_,w,0,e.nth.call(null,x,g)));return e.assoc_in.call(null,e.assoc_in.call(null,a,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),v,e.keyword("fields")),s),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),p,e.keyword("fields")),k)})():e.truth_.call(null,(()=>{const s=p;if(e.truth_.call(null,s)){const k=e.str.call(null,v)!==e.str.call(null,p);return k&&e._EQ_.call(null,e.str.call(null,v),e.str.call(null,j))}else return s})())?(()=>{const s=e.merge.call(null,e.some.call(null,function(E){if(e.truth_.call(null,e._EQ_.call(null,e.keyword("type").call(null,E),h)))return E},O.call(null,u)),e.array_map(e.keyword("id"),Q,e.keyword("name"),"New Field")),k=m.call(null,F.call(null,_,w,0,s));return e.assoc_in.call(null,a,e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),p,e.keyword("fields")),k)})():e.truth_.call(null,(()=>{const s=e.not.call(null,p);return e.truth_.call(null,s)?e.str.call(null,v)!==e.str.call(null,j):s})())||e.truth_.call(null,(()=>{const s=e.not.call(null,p);return e.truth_.call(null,s)?e._EQ_.call(null,e.str.call(null,v),e.str.call(null,j)):s})())?a:null;if(!e.truth_.call(null,$))throw e.ex_info.call(null,"Invalid condition",e.array_map());return e.dissoc.call(null,$,e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator"))},Ge=e.array_map(e.keyword("nodes"),e.hash_map(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type"),e.array_map(e.keyword("push"),I.call(null,ke)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/current-user"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/current-user")),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/reset"),e.array_map(e.keyword("push"),I.call(null,P)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/init"),e.array_map(e.keyword("push"),te),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/redo"),e.array_map(e.keyword("push"),Y),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save")),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/dnd-drag"),e.array_map(e.keyword("push"),he),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type-field"),e.array_map(e.keyword("push"),I.call(null,we)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type"),e.array_map(e.keyword("push"),I.call(null,ge)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type-field"),e.array_map(e.keyword("push"),I.call(null,me)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/change-field-type"),e.array_map(e.keyword("push"),I.call(null,be)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/cancel-save"),e.array_map(e.keyword("push"),ne),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/undo"),e.array_map(e.keyword("push"),X),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type"),e.array_map(e.keyword("push"),H),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/update-content-type-fields"),e.array_map(e.keyword("push"),I.call(null,ve)),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/clear-selection"),e.array_map(e.keyword("push"),V),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection"),e.array_map(e.keyword("calc"),W),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/dnd-drop"),e.array_map(e.keyword("push"),xe),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/confirm-save"),e.array_map(e.keyword("push"),le),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/request-save"),e.array_map(e.keyword("push"),ee),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator")),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type-field"),e.array_map(e.keyword("push"),J),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/new-content-type"),e.array_map(e.keyword("push"),I.call(null,fe))),e.keyword("edges"),e.vector(e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/cancel-save"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/change-field-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/change-field-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/change-field-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/clear-selection"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/confirm-save"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/dnd-drop"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/dnd-drop"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/dnd-drag"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/drop-indicator")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type-field"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type-field"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/delete-content-type-field"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/init"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/current-user")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/init"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/new-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/new-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/new-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/redo"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/redo"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/redo"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type-field"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type-field"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/rename-content-type-field"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/update-content-type-fields"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/update-content-type-fields"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/update-content-type-fields"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/request-save"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/pending-save")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/reset"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/reset"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/reset"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/select-content-type-field"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/selection")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/undo"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/content-types-index")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/undo"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/future")),e.vector(e.keyword("rpub.plugins.content-types.admin.all-content-types-page/undo"),e.keyword("rpub.plugins.content-types.admin.all-content-types-page/past")))),qe=e.array_map(e.keyword("page-id"),e.keyword("all-content-types-page"),e.keyword("component"),_e,e.keyword("dag-config"),Ge);export{ce as __GT_content_type,ye as __GT_drop_indicator,O as __GT_field_config,D as __GT_unsaved_changes,ne as cancel_save,be as change_field_type,V as clear_selection,qe as config,le as confirm_save,z as content_type_fields_item,K as content_type_fields_list,pe as content_types_list,se as controls,Ge as dag_config,ke as delete_content_type,we as delete_content_type_field,he as dnd_drag,xe as dnd_drop,ie as dnd_generate_id,R as dnd_item_id,de as dnd_provider,C as drop_indicator_ui,L as field,oe as header,te as init,ae as inspector,fe as new_content_type,_e as page,Y as redo,ge as rename_content_type,me as rename_content_type_field,ee as request_save,P as reset,ue as save_modal,H as select_content_type,J as select_content_type_field,W as selection,j as template_items_id,F as to_spliced,X as undo,Z as undo_keys,ve as update_content_type_fields,re as update_content_types_BANG_,A as update_unsaved_changes_BANG_,I as with_undo};
