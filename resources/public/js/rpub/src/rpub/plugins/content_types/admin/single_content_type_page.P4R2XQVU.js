import*as t from"cherry-cljs/cljs.core.js";import*as y from"rads.inflections";import*as M from"rpub.admin.impl";import*as A from"rpub.lib.html";import*as D from"rpub.lib.http";var p=t.vector("January","February","March","April","May","June","July","August","September","October","November","December"),i=function(e){const a=e.getMonth(),l=e.getDate(),n=e.getFullYear(),r=e.getHours(),o=e.getMinutes(),c=t.get.call(null,p,a),u=r<12?"AM":"PM",m=t.mod.call(null,r,12),s=m===0?12:m,_=o<10?t.str.call(null,"0",o):t.str.call(null,o);return t.str.call(null,c," ",l,", ",n," ",s,":",_," ",u)},w=function(e){return t.str.call(null,"/admin/content-types/",t.name.call(null,t.get_in.call(null,e,t.vector(t.keyword("content-type"),t.keyword("slug")))),"/content-items/",t.name.call(null,t.get_in.call(null,e,t.vector(t.keyword("fields"),"Slug"))))},k=t.vector(t.array_map(t.keyword("name"),"Title",t.keyword("value"),function(e){const a=e,l=t.__destructure_map.call(null,a),n=l,r=t.get.call(null,l,t.keyword("fields"));return t.vector(t.keyword("a.underline"),t.array_map(t.keyword("href"),w.call(null,n)),t.vector(t.keyword("span"),t.array_map(t.keyword("class"),"font-semibold"),t.get.call(null,r,"Title")))}),t.array_map(t.keyword("name"),"Author",t.keyword("value"),function(e){const a=e,l=t.__destructure_map.call(null,a),r=t.get.call(null,l,t.keyword("created-by")),o=t.__destructure_map.call(null,r),c=t.get.call(null,o,t.keyword("username"));return t.vector(t.keyword("span"),t.array_map(t.keyword("class"),"font-semibold"),c)}),t.array_map(t.keyword("name"),"Date",t.keyword("value"),function(e){const a=e,l=t.__destructure_map.call(null,a),n=t.get.call(null,l,t.keyword("created-at")),r=t.get.call(null,l,t.keyword("updated-at")),o=(()=>{const u=r;return t.truth_.call(null,u)?u:n})(),c=o==null?null:new Date(o);return c==null?null:i.call(null,c)})),f=function(e){return t.str.call(null,"/admin/content-types/",t.name.call(null,t.keyword("slug").call(null,e)),"/content-items/new")},g=function(e){const a=e,l=t.__destructure_map.call(null,a),n=t.get.call(null,l,t.keyword("content-type")),r=t.get.call(null,l,t.keyword("content-items")),o=t.array_map(t.keyword("format"),t.keyword("transit")),c=t.map.call(null,function(s){return t.update.call(null,s,t.keyword("fields"),function(_){return t.update_keys.call(null,_,t.name)})},r),u=function(s,_){const v=t.array_map(t.keyword("content-item-id"),t.keyword("id").call(null,_)),h=function(G,d){if(t.truth_.call(null,d))return t.println.call(null,d)},b=t.merge.call(null,o,t.array_map(t.keyword("body"),v,t.keyword("on-complete"),h));return D.post.call(null,"/api/delete-content-item",b)},m=t.map.call(null,function(s){return t.assoc.call(null,s,t.keyword("content-type"),n)},c);return t.vector(t.keyword("div"),t.array_map(t.keyword("class"),"p-4"),t.vector(M.table,t.array_map(t.keyword("title"),y.plural.call(null,t.keyword("name").call(null,n)),t.keyword("columns"),k,t.keyword("rows"),m,t.keyword("header-buttons"),t.vector(t.keyword("a"),t.array_map(t.keyword("href"),f.call(null,n)),t.vector(A.action_button,t.str.call(null,"New ",y.singular.call(null,t.keyword("name").call(null,n))))),t.keyword("delete-row"),u)))},E=t.array_map(t.keyword("page-id"),t.keyword("single-content-type-page"),t.keyword("component"),g);export{k as columns,E as config,w as edit_content_item_path,i as format_datetime,p as months,f as new_content_item_path,g as single_content_type_page};
