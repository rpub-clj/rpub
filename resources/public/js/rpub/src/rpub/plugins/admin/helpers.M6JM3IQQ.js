import{jsx as Q}from"react/jsx-runtime";import*as l from"cherry-cljs/cljs.core.js";import*as h from"flowbite";import{useEffect as m,useState as G}from"react";import*as g from"rpub.lib.dag";import{DAGProvider as E}from"rpub.lib.dag.react";import*as T from"rpub.lib.html";import*as A from"rpub.lib.reagent";if(!(typeof _<"u"))var _=l.atom.call(null,null);var f=function(r){const a=l.array_map(l.keyword("portal.viewer/default"),l.keyword("portal.viewer/pprint")),n=function(e){return l.truth_.call(null,l.coll_QMARK_.call(null,e))?l.with_meta.call(null,e,a):e},t=l.update.call(null,l.update.call(null,l.dissoc.call(null,r,l.keyword("key")),l.keyword("args"),function(e){return l.map.call(null,n,e)}),l.keyword("ret"),n);return l.vector(l.keyword("key").call(null,r),t)},y=l.comp.call(null,l.map.call(null,f),l.map.call(null,l.tap_GT_)),w=function(r,a){const n=a,t=l.__destructure_map.call(null,n),e=l.get.call(null,t,l.keyword("page-id")),c=l.get.call(null,t,l.keyword("prepend-element")),d=l.get.call(null,t,l.keyword("dag-config")),p=l.get.call(null,t,l.keyword("tracing"));return function(i){const o=G.call(null,!1),u=l.nth.call(null,o,0,null),k=l.nth.call(null,o,1,null);return m.call(null,function(){const v=(()=>{const s=g.__GT_dag.call(null,d);return l.truth_.call(null,p)?g.wrap_tracing.call(null,s,y):s})();return k.call(null,l.reset_BANG_.call(null,_,v))},[]),m.call(null,function(){if(l.truth_.call(null,u))return h.initFlowbite.call(null)},[u]),Q(E,{"dag-atom":_,children:l.truth_.call(null,u)?A.as_element.call(null,l.list.call(null,l.truth_.call(null,c)?c.call(null,l.array_map(l.keyword("page-id"),e,l.keyword("dag"),u)):null,l.vector(r,i))):null})}},N=function(r){const a=r,n=l.__destructure_map.call(null,a),t=n,e=l.get.call(null,n,l.keyword("page-id")),c=l.get.call(null,n,l.keyword("component")),d=l.get.call(null,n,l.keyword("dag-config")),p=l.get.call(null,n,l.keyword("prepend-element")),i=l.get.call(null,n,l.keyword("tracing")),o=w.call(null,c,l.array_map(l.keyword("page-id"),e,l.keyword("dag-config"),d,l.keyword("prepend-element"),p,l.keyword("tracing"),i));return T.add_element.call(null,e,o,l.array_map(l.keyword("format"),l.keyword("transit")))};export{N as add_page,_ as dag_atom,f as node__GT_trace,y as tracing_xf,w as wrap_component};
