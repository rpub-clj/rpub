import*as e from"cherry-cljs/cljs.core.js";import{use_dag as z}from"rpub.lib.dag.react";import*as m from"rpub.lib.html";import*as A from"rpub.lib.http";import*as C from"rpub.plugins.admin.impl";var f=function(l){const r=z.call(null,e.vector(e.keyword("rpub.plugins.admin.new-user-page/field-values"),e.keyword("rpub.plugins.admin.new-user-page/submitting"))),a=e.nth.call(null,r,0,null),d=e.__destructure_map.call(null,a),o=e.get.call(null,d,e.keyword("rpub.plugins.admin.new-user-page/field-values")),j=e.get.call(null,d,e.keyword("rpub.plugins.admin.new-user-page/submitting")),_=e.nth.call(null,r,1,null),F=e.array_map(e.keyword("format"),e.keyword("transit")),G=function(y){y.preventDefault(),_.call(null,e.keyword("rpub.plugins.admin.new-user-page/submit-start"));const t=function(v,p){return e.truth_.call(null,p)?_.call(null,e.keyword("rpub.plugins.admin.new-user-page/submit-error")):window.location.reload()},s=e.merge.call(null,F,e.array_map(e.keyword("body"),o,e.keyword("on-complete"),t));return A.post.call(null,"/admin/api/create-user",s)},q=e.vector(e.array_map(e.keyword("key"),e.keyword("username"),e.keyword("label"),"Username",e.keyword("type"),e.keyword("text")),e.array_map(e.keyword("key"),e.keyword("password"),e.keyword("label"),"Password",e.keyword("type"),e.keyword("password")),e.array_map(e.keyword("key"),e.keyword("roles"),e.keyword("label"),"Roles",e.keyword("type"),e.keyword("text"))),b=function(y,t){const s=t.target.value;return _.call(null,e.keyword("rpub.plugins.admin.new-user-page/change-input"),e.vector(y,s))};return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4"),e.vector(C.box,e.array_map(e.keyword("title"),"New User",e.keyword("content"),e.vector(e.keyword("section"),e.array_map(e.keyword("class"),"bg-white"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"max-w-2xl"),e.vector(e.keyword("form"),e.array_map(e.keyword("on-submit"),G),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"grid gap-4 sm:grid-cols-2 sm:gap-6"),function t(s){return new e.LazySeq(null,function(){let v=s;for(;;){const p=e.seq.call(null,v);if(e.truth_.call(null,p)){const c=p;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,c))){const n=e.chunk_first.call(null,c),w=e.count.call(null,n),i=e.chunk_buffer.call(null,w);return(()=>{let k=0;for(;;){if(k<w){const u=e._nth.call(null,n,k),E=e.get.call(null,o,e.keyword("key").call(null,u),e.keyword("value").call(null,u));e.chunk_append.call(null,i,e.vector(e.keyword("div"),e.array_map(e.keyword("key"),e.str.call(null,e.keyword("key").call(null,u)),e.keyword("class"),"sm:col-span-2"),e.vector(e.keyword("label"),e.array_map(e.keyword("class"),"block mb-2 text-sm font-semibold text-gray-900",e.keyword("for"),"name"),e.keyword("label").call(null,u)),e.vector(m.input2,e.array_map(e.keyword("type"),e.keyword("type").call(null,u),e.keyword("name"),e.keyword("key").call(null,u),e.keyword("value"),E,e.keyword("on-change"),function(U){return b.call(null,e.keyword("key").call(null,u),U)})))),k=e.unchecked_inc.call(null,k);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,i),t.call(null,e.chunk_rest.call(null,c))):e.chunk_cons.call(null,e.chunk.call(null,i),null)}else{const n=e.first.call(null,c),w=e.get.call(null,o,e.keyword("key").call(null,n),e.keyword("value").call(null,n));return e.cons.call(null,e.vector(e.keyword("div"),e.array_map(e.keyword("key"),e.str.call(null,e.keyword("key").call(null,n)),e.keyword("class"),"sm:col-span-2"),e.vector(e.keyword("label"),e.array_map(e.keyword("class"),"block mb-2 text-sm font-semibold text-gray-900",e.keyword("for"),"name"),e.keyword("label").call(null,n)),e.vector(m.input2,e.array_map(e.keyword("type"),e.keyword("type").call(null,n),e.keyword("name"),e.keyword("key").call(null,n),e.keyword("value"),w,e.keyword("on-change"),function(i){return b.call(null,e.keyword("key").call(null,n),i)}))),t.call(null,e.rest.call(null,c)))}}break}},null,null)}.call(null,q),e.vector(m.submit_button,e.array_map(e.keyword("ready-label"),"Create",e.keyword("submit-label"),"Creating...",e.keyword("submitting"),j)))))))))},h=function(l,r){const a=r,d=e.nth.call(null,a,0,null),o=e.nth.call(null,a,1,null);return e.assoc_in.call(null,l,e.vector(e.keyword("rpub.plugins.admin.new-user-page/inputs"),d,e.keyword("value")),o)},$=function(l){return e.assoc.call(null,l,e.keyword("rpub.plugins.admin.new-user-page/submitting"),!1)},x=function(l){return e.assoc.call(null,l,e.keyword("rpub.plugins.admin.new-user-page/submitting"),!0)},g=(()=>{const l=function(r){switch(e.alength.call(null,arguments)){case 1:return l.cljs$core$IFn$_invoke$arity$1(arguments[0]);case 2:return l.cljs$core$IFn$_invoke$arity$2(arguments[0],arguments[1]);default:throw new Error(e.str.call(null,"Invalid arity: ",e.alength.call(null,arguments)))}};return l.cljs$core$IFn$_invoke$arity$1=function(r){return g.call(null,r,e.keys.call(null,e.keyword("rpub.plugins.admin.new-user-page/inputs").call(null,r)))},l.cljs$core$IFn$_invoke$arity$2=function(r,a){return e.update_vals.call(null,e.select_keys.call(null,e.keyword("rpub.plugins.admin.new-user-page/inputs").call(null,r),a),e.keyword("value"))},l.cljs$lang$maxFixedArity=2,l})(),I=e.array_map(e.keyword("nodes"),e.array_map(e.keyword("rpub.plugins.admin.new-user-page/change-input"),e.array_map(e.keyword("push"),h),e.keyword("rpub.plugins.admin.new-user-page/field-values"),e.array_map(e.keyword("calc"),g),e.keyword("rpub.plugins.admin.new-user-page/submit-error"),e.array_map(e.keyword("push"),$),e.keyword("rpub.plugins.admin.new-user-page/submit-start"),e.array_map(e.keyword("push"),x),e.keyword("rpub.plugins.admin.new-user-page/submitting"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.admin.new-user-page/submitting"))),e.keyword("edges"),e.vector(e.vector(e.keyword("rpub.plugins.admin.new-user-page/change-input"),e.keyword("rpub.plugins.admin.new-user-page/field-values")),e.vector(e.keyword("rpub.plugins.admin.new-user-page/submit-error"),e.keyword("rpub.plugins.admin.new-user-page/submitting")),e.vector(e.keyword("rpub.plugins.admin.new-user-page/submit-start"),e.keyword("rpub.plugins.admin.new-user-page/submitting")))),L=e.array_map(e.keyword("page-id"),e.keyword("new-user-page"),e.keyword("component"),f,e.keyword("dag-config"),I);export{h as change_input,L as config,I as dag_config,g as field_values,f as page,$ as submit_error,x as submit_start};
