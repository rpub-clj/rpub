import*as l from"cherry-cljs/cljs.core.js";import*as x from"cherry-cljs/lib/clojure.string.js";import*as A from"rads.inflections";import*as w from"rpub.lib.html";import*as p from"rpub.plugins.admin.impl";var Q=l.vector(l.array_map(l.keyword("name"),"Username",l.keyword("value"),function(a){const o=a,e=l.__destructure_map.call(null,o),n=l.get.call(null,e,l.keyword("username"));return l.vector(l.keyword("a"),l.array_map(l.keyword("class"),"font-semibold"),n)}),l.array_map(l.keyword("name"),"Roles",l.keyword("value"),function(a){const o=a,e=l.__destructure_map.call(null,o),n=l.get.call(null,e,l.keyword("roles"));return x.join.call(null,", ",l.map.call(null,l.keyword("label"),n))})),v=function(a){const o=a,e=l.__destructure_map.call(null,o),n=l.get.call(null,e,l.keyword("checked")),r=l.get.call(null,e,l.keyword("disabled"));return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"checkbox",l.keyword("checked"),n,l.keyword("disabled"),r,l.keyword("class"),"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"))},b=function(a){const o=a,e=l.__destructure_map.call(null,o),n=l.get.call(null,e,l.keyword("roles"));return l.concat.call(null,l.vector(l.array_map(l.keyword("name"),"Permission",l.keyword("value"),function(r){const c=r,u=l.__destructure_map.call(null,c),d=l.get.call(null,u,l.keyword("permission-key"));return A.titleize.call(null,l.name.call(null,d))})),l.map.call(null,function(r){return l.array_map(l.keyword("name"),l.keyword("label").call(null,r),l.keyword("value"),function(c){const u=l.contains_QMARK_.call(null,l.set.call(null,l.keyword("roles").call(null,c)),l.keyword("label").call(null,r));return l.vector(v,l.array_map(l.keyword("checked"),u,l.keyword("disabled"),l._EQ_.call(null,l.keyword("label").call(null,r),"Admin")))})},n))},f=function(a){const o=a,e=l.__destructure_map.call(null,o),n=l.get.call(null,e,l.keyword("users")),r=l.get.call(null,e,l.keyword("roles")),c=l.get.call(null,e,l.keyword("permissions"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-4"),l.vector(p.table,l.array_map(l.keyword("title"),"Users",l.keyword("header-buttons"),l.vector(l.keyword("a"),l.array_map(l.keyword("href"),"/admin/users/new"),l.vector(w.action_button,"New User")),l.keyword("columns"),Q,l.keyword("rows"),n))),l.vector(l.keyword("div"),l.vector(p.table,l.array_map(l.keyword("title"),"Roles & Permissions",l.keyword("description"),l.vector(l.keyword("div"),function d(h){return new l.LazySeq(null,function(){let g=h;for(;;){const k=l.seq.call(null,g);if(l.truth_.call(null,k)){const t=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,t))){const s=l.chunk_first.call(null,t),i=l.count.call(null,s),y=l.chunk_buffer.call(null,i);return(()=>{let _=0;for(;;){if(_<i){const m=l._nth.call(null,s,_);l.chunk_append.call(null,y,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-4"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"inline-block font-semibold text-lg",l.keyword("style"),"min-width: 150px"),l.keyword("label").call(null,m)),l.vector(l.keyword("select"),l.array_map(l.keyword("class"),"inline-block",l.keyword("value"),l.truth_.call(null,l._EQ_.call(null,l.keyword("permissions").call(null,m),l.keyword("all")))?"all":"manual",l.keyword("disabled"),!0),l.vector(l.keyword("option"),l.array_map(l.keyword("value"),"all"),"Access to all permissions"),l.vector(l.keyword("option"),l.array_map(l.keyword("value"),"manual"),"Access to manually selected permissions")))),_=l.unchecked_inc.call(null,_);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,y),d.call(null,l.chunk_rest.call(null,t))):l.chunk_cons.call(null,l.chunk.call(null,y),null)}else{const s=l.first.call(null,t);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mb-4"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"inline-block font-semibold text-lg",l.keyword("style"),"min-width: 150px"),l.keyword("label").call(null,s)),l.vector(l.keyword("select"),l.array_map(l.keyword("class"),"inline-block",l.keyword("value"),l.truth_.call(null,l._EQ_.call(null,l.keyword("permissions").call(null,s),l.keyword("all")))?"all":"manual",l.keyword("disabled"),!0),l.vector(l.keyword("option"),l.array_map(l.keyword("value"),"all"),"Access to all permissions"),l.vector(l.keyword("option"),l.array_map(l.keyword("value"),"manual"),"Access to manually selected permissions"))),d.call(null,l.rest.call(null,t)))}}break}},null,null)}.call(null,r)),l.keyword("header-buttons"),l.vector(l.keyword("a"),l.array_map(l.keyword("href"),"/admin/users/new"),l.vector(w.action_button,"New Role")),l.keyword("columns"),b.call(null,l.array_map(l.keyword("roles"),r)),l.keyword("rows"),c))))},R=l.array_map(l.keyword("page-id"),l.keyword("users-page"),l.keyword("component"),f);export{v as checkbox,R as config,f as page,b as permissions_columns};
