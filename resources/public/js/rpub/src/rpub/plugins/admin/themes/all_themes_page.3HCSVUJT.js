import*as e from"cherry-cljs/cljs.core.js";import{useEffect as G}from"react";import*as K from"rpub.lib.html";import*as N from"rpub.lib.http";import{subscribe as b,dispatch as A}from"rpub.lib.substrate";import*as p from"rpub.plugins.admin.helpers";import*as R from"rpub.plugins.admin.roles";var _=function(l){return e.vector(e.keyword("svg"),e.array_map(e.keyword("className"),"w-6 h-6 text-white",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"none",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("stroke"),"currentColor",e.keyword("strokeLinecap"),"round",e.keyword("strokeLinejoin"),"round",e.keyword("strokeWidth"),"2",e.keyword("d"),"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z")))},h=function(l){return e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M13 10a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H14a1 1 0 0 1-1-1Z",e.keyword("clip-rule"),"evenodd")),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12c0 .556-.227 1.06-.593 1.422A.999.999 0 0 1 20.5 20H4a2.002 2.002 0 0 1-2-2V6Zm6.892 12 3.833-5.356-3.99-4.322a1 1 0 0 0-1.549.097L4 12.879V6h16v9.95l-3.257-3.619a1 1 0 0 0-1.557.088L11.2 18H8.892Z",e.keyword("clip-rule"),"evenodd")))},v=function(l,a){l.preventDefault();const r=e.array_map(e.keyword("settings"),e.vector(e.array_map(e.keyword("key"),e.keyword("theme-name"),e.keyword("value"),e.keyword("label").call(null,a))));return N.post.call(null,"/admin/api/update-settings",e.array_map(e.keyword("body"),r)).then(function(y){return A.call(null,e.vector(e.keyword("rpub.plugins.admin.themes.all-themes-page/activate-theme"),e.keyword("label").call(null,a)))})},C=function(l){const a=l,r=e.__destructure_map.call(null,a),y=r,c=e.get.call(null,r,e.keyword("theme-name-setting")),m=e.get.call(null,r,e.keyword("current-user")),k=b.call(null,e.vector(e.keyword("rpub.plugins.admin.themes.all-themes-page/current-theme-name-setting"))),L=b.call(null,e.vector(e.keyword("rpub.plugins.admin.themes.all-themes-page/themes"))),z=G.call(null,function(){return A.call(null,e.vector(e.keyword("rpub.plugins.admin.themes.all-themes-page/init"),y))},[]),B=e.keyword("value").call(null,(()=>{const s=k;return e.truth_.call(null,s)?s:c})()),g=function(s){return e._EQ_.call(null,e.keyword("label").call(null,s),B)};return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4"),e.vector(p.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("div.grow"),"Themes"),e.truth_.call(null,R.allowed_QMARK_.call(null,m,e.array_map(e.keyword("resource"),e.keyword("themes"),e.keyword("action"),e.keyword("create"))))?e.vector(e.keyword("a"),e.array_map(e.keyword("href"),"/admin/themes/new"),e.vector(K.button,e.array_map(e.keyword("class"),"font-app-sans ml-auto"),"New Theme")):null),e.keyword("class"),"mb-4")),function f(q){return new e.LazySeq(null,function(){let E=q;for(;;){const x=e.seq.call(null,E);if(e.truth_.call(null,x)){const i=x;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,i))){const t=e.chunk_first.call(null,i),u=e.count.call(null,t),o=e.chunk_buffer.call(null,u);return(()=>{let d=0;for(;;){if(d<u){const n=e._nth.call(null,t,d),Q=g.call(null,n);e.chunk_append.call(null,o,e.vector(e.keyword("form"),e.array_map(e.keyword("method"),"post"),e.vector(p.box,e.array_map(e.keyword("key"),e.keyword("label").call(null,n),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"grow flex items-center"),e.vector(h),e.keyword("label").call(null,n)),e.vector(e.keyword("div"),e.truth_.call(null,e.keyword("editable").call(null,n))?e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm mr-4 w-44",e.keyword("href"),e.str.call(null,"/admin/themes/",e.keyword("id").call(null,n))),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(_),"Edit")):null,e.truth_.call(null,Q)?e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-emerald-600 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-inner cursor-auto w-44",e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z",e.keyword("clip-rule"),"evenodd"))),"Active")):e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm w-44",e.keyword("on-click"),function(w){return v.call(null,w,n)},e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("d"),"M8 5v4.997a.31.31 0 0 1-.068.113c-.08.098-.213.207-.378.301-.947.543-1.713 1.54-2.191 2.488A6.237 6.237 0 0 0 4.82 14.4c-.1.48-.138 1.031.018 1.539C5.12 16.846 6.02 17 6.414 17H11v3a1 1 0 1 0 2 0v-3h4.586c.395 0 1.295-.154 1.575-1.061.156-.508.118-1.059.017-1.539a6.241 6.241 0 0 0-.541-1.5c-.479-.95-1.244-1.946-2.191-2.489a1.393 1.393 0 0 1-.378-.301.309.309 0 0 1-.068-.113V5h1a1 1 0 1 0 0-2H7a1 1 0 1 0 0 2h1Z"))),"Activate")))),e.keyword("class"),"mb-4",e.keyword("content"),(()=>{const w=e.keyword("description").call(null,n);if(e.truth_.call(null,w)){const V=w;return e.vector(e.keyword("p"),V)}})())))),d=e.unchecked_inc.call(null,d);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,o),f.call(null,e.chunk_rest.call(null,i))):e.chunk_cons.call(null,e.chunk.call(null,o),null)}else{const t=e.first.call(null,i),u=g.call(null,t);return e.cons.call(null,e.vector(e.keyword("form"),e.array_map(e.keyword("method"),"post"),e.vector(p.box,e.array_map(e.keyword("key"),e.keyword("label").call(null,t),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"grow flex items-center"),e.vector(h),e.keyword("label").call(null,t)),e.vector(e.keyword("div"),e.truth_.call(null,e.keyword("editable").call(null,t))?e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm mr-4 w-44",e.keyword("href"),e.str.call(null,"/admin/themes/",e.keyword("id").call(null,t))),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(_),"Edit")):null,e.truth_.call(null,u)?e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-emerald-600 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-inner cursor-auto w-44",e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z",e.keyword("clip-rule"),"evenodd"))),"Active")):e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm w-44",e.keyword("on-click"),function(o){return v.call(null,o,t)},e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("d"),"M8 5v4.997a.31.31 0 0 1-.068.113c-.08.098-.213.207-.378.301-.947.543-1.713 1.54-2.191 2.488A6.237 6.237 0 0 0 4.82 14.4c-.1.48-.138 1.031.018 1.539C5.12 16.846 6.02 17 6.414 17H11v3a1 1 0 1 0 2 0v-3h4.586c.395 0 1.295-.154 1.575-1.061.156-.508.118-1.059.017-1.539a6.241 6.241 0 0 0-.541-1.5c-.479-.95-1.244-1.946-2.191-2.489a1.393 1.393 0 0 1-.378-.301.309.309 0 0 1-.068-.113V5h1a1 1 0 1 0 0-2H7a1 1 0 1 0 0 2h1Z"))),"Activate")))),e.keyword("class"),"mb-4",e.keyword("content"),(()=>{const o=e.keyword("description").call(null,t);if(e.truth_.call(null,o)){const d=o;return e.vector(e.keyword("p"),d)}})()))),f.call(null,e.rest.call(null,i)))}}break}},null,null)}.call(null,L))},M=function(l,a){const r=a,y=e.nth.call(null,r,0,null),c=e.nth.call(null,r,1,null),m=e.__destructure_map.call(null,c),k=e.get.call(null,m,e.keyword("themes"));return e.merge.call(null,l,e.array_map(e.keyword("rpub.plugins.admin.themes.all-themes-page/themes"),k))},Z=function(l,a){const r=a,y=e.nth.call(null,r,0,null),c=e.nth.call(null,r,1,null);return e.assoc.call(null,l,e.keyword("rpub.plugins.admin.themes.all-themes-page/current-theme-name-setting"),e.array_map(e.keyword("value"),c))},H=e.array_map(e.keyword("queries"),e.array_map(e.keyword("rpub.plugins.admin.themes.all-themes-page/current-theme-name-setting"),e.keyword("rpub.plugins.admin.themes.all-themes-page/current-theme-name-setting"),e.keyword("rpub.plugins.admin.themes.all-themes-page/themes"),e.keyword("rpub.plugins.admin.themes.all-themes-page/themes")),e.keyword("transactions"),e.array_map(e.keyword("rpub.plugins.admin.themes.all-themes-page/init"),M,e.keyword("rpub.plugins.admin.themes.all-themes-page/activate-theme"),Z)),S=e.array_map(e.keyword("page-id"),e.keyword("all-themes-page"),e.keyword("component"),C,e.keyword("model"),H);export{Z as activate_theme,v as activate_theme_BANG_,S as config,_ as edit_icon,M as init,H as model,C as page,h as theme_icon};
