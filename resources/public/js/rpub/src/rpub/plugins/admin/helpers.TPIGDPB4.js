import{jsx as ol}from"react/jsx-runtime";import*as l from"cherry-cljs/cljs.core.js";import*as H from"flowbite";import{useEffect as N,useState as J}from"react";import*as V from"cherry-cljs/lib/clojure.string.js";import*as j from"rads.inflections";import*as O from"rpub.lib.dag";import{DAGProvider as W}from"rpub.lib.dag.react";import*as X from"rpub.lib.html";import*as Y from"rpub.lib.http";import*as Z from"rpub.lib.reagent";if(!(typeof T<"u"))var T=l.atom.call(null,null);var U=function(e){const r=l.array_map(l.keyword("portal.viewer/default"),l.keyword("portal.viewer/pprint")),n=function(c){return l.truth_.call(null,l.coll_QMARK_.call(null,c))?l.with_meta.call(null,c,r):c},t=l.update.call(null,l.update.call(null,l.dissoc.call(null,e,l.keyword("key")),l.keyword("args"),function(c){return l.map.call(null,n,c)}),l.keyword("ret"),n);return l.vector(l.keyword("key").call(null,e),t)},B=l.comp.call(null,l.map.call(null,U),l.map.call(null,l.tap_GT_)),D=function(e,r){const n=r,t=l.__destructure_map.call(null,n),c=l.get.call(null,t,l.keyword("page-id")),k=l.get.call(null,t,l.keyword("prepend-element")),p=l.get.call(null,t,l.keyword("dag-config")),i=l.get.call(null,t,l.keyword("tracing"));return function(m){const u=J.call(null,!1),a=l.nth.call(null,u,0,null),h=l.nth.call(null,u,1,null);return N.call(null,function(){const s=(()=>{const d=O.__GT_dag.call(null,p);return l.truth_.call(null,i)?O.wrap_tracing.call(null,d,B):d})();return h.call(null,l.reset_BANG_.call(null,T,s))},[]),N.call(null,function(){if(l.truth_.call(null,a))return H.initFlowbite.call(null)},[a]),ol(W,{"dag-atom":T,children:l.truth_.call(null,a)?Z.as_element.call(null,l.list.call(null,l.truth_.call(null,k)?k.call(null,l.array_map(l.keyword("page-id"),c,l.keyword("dag"),a)):null,l.vector(e,m))):null})}},ll=function(e){const r=e,n=l.__destructure_map.call(null,r),t=n,c=l.get.call(null,n,l.keyword("page-id")),k=l.get.call(null,n,l.keyword("component")),p=l.get.call(null,n,l.keyword("dag-config")),i=l.get.call(null,n,l.keyword("prepend-element")),m=l.get.call(null,n,l.keyword("tracing")),u=D.call(null,k,l.array_map(l.keyword("page-id"),c,l.keyword("dag-config"),p,l.keyword("prepend-element"),i,l.keyword("tracing"),m));return X.add_element.call(null,c,u,l.array_map(l.keyword("format"),l.keyword("transit")))},P=(()=>{const e=function(r){switch(l.alength.call(null,arguments)){case 1:return e.cljs$core$IFn$_invoke$arity$1(arguments[0]);case 2:return e.cljs$core$IFn$_invoke$arity$2(arguments[0],arguments[1]);default:throw new Error(l.str.call(null,"Invalid arity: ",l.alength.call(null,arguments)))}};return e.cljs$core$IFn$_invoke$arity$1=function(r){return P.call(null,r,l.keys.call(null,l.keyword("inputs").call(null,r)))},e.cljs$core$IFn$_invoke$arity$2=function(r,n){return l.update_vals.call(null,l.select_keys.call(null,l.keyword("inputs").call(null,r),n),l.keyword("value"))},e.cljs$lang$maxFixedArity=2,e})();if(!(typeof K<"u"))var K=l.random_uuid.call(null);var nl=function(e,r){return l.array_map(l.keyword("client-id"),K,l.keyword("key"),e,l.keyword("value"),r)},el=function(e){const r=l.array_map(l.keyword("format"),l.keyword("transit"),l.keyword("body"),e,l.keyword("on-complete"),function(n,t){if(l.truth_.call(null,t))return console.log(t)});return Y.post.call(null,"/admin/api/update-unsaved-changes",r)},rl=function(e){const r=e,n=l.__destructure_map.call(null,r),t=l.get.call(null,n,l.keyword("title")),c=l.get.call(null,n,l.keyword("rows")),k=l.get.call(null,n,l.keyword("description")),p=l.get.call(null,n,l.keyword("header-buttons")),i=l.get.call(null,n,l.keyword("columns")),m=l.get.call(null,n,l.keyword("delete-row"));return l.vector(l.keyword("section"),l.array_map(l.keyword("class"),"bg-gray-50 antialiased"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"bg-white relative shadow-sm sm:rounded-lg overflow-hidden"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"w-full md:w-1/2"),l.vector(l.keyword("h2"),l.array_map(l.keyword("class"),"text-3xl font-semibold font-app-serif"),t),l.truth_.call(null,k)?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"mt-4"),k):null),l.truth_.call(null,p)?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0"),p):null),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"overflow-x-auto"),l.vector(l.keyword("table"),l.array_map(l.keyword("class"),"w-full text-sm text-left text-gray-500"),l.vector(l.keyword("thead"),l.array_map(l.keyword("class"),"text-xs text-gray-700 uppercase bg-gray-50"),l.vector(l.keyword("tr"),function a(h){return new l.LazySeq(null,function(){let s=h;for(;;){const d=l.seq.call(null,s);if(l.truth_.call(null,d)){const o=d;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,o))){const y=l.chunk_first.call(null,o),w=l.count.call(null,y),_=l.chunk_buffer.call(null,w);return(()=>{let f=0;for(;;){if(f<w){const x=l._nth.call(null,y,f);l.chunk_append.call(null,_,l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"p-4",l.keyword("scope"),"col",l.keyword("key"),l.keyword("name").call(null,x)),l.keyword("name").call(null,x))),f=l.unchecked_inc.call(null,f);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,_),a.call(null,l.chunk_rest.call(null,o))):l.chunk_cons.call(null,l.chunk.call(null,_),null)}else{const y=l.first.call(null,o);return l.cons.call(null,l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"p-4",l.keyword("scope"),"col",l.keyword("key"),l.keyword("name").call(null,y)),l.keyword("name").call(null,y)),a.call(null,l.rest.call(null,o)))}}break}},null,null)}.call(null,i),l.truth_.call(null,m)?l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3",l.keyword("scope"),"col"),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"sr-only"),"Actions")):null)),l.vector(l.keyword("tbody"),function a(h){return new l.LazySeq(null,function(){let s=h;for(;;){const d=l.seq.call(null,s);if(l.truth_.call(null,d)){const o=d;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,o))){const y=l.chunk_first.call(null,o),w=l.count.call(null,y),_=l.chunk_buffer.call(null,w);return(()=>{let f=0;for(;;){if(f<w){const x=l._nth.call(null,y,f),S=l.nth.call(null,x,0,null),q=l.nth.call(null,x,1,null);l.chunk_append.call(null,_,l.vector(l.keyword("tr"),l.array_map(l.keyword("class"),S!==0?"border-t border-gray-200":null,l.keyword("key"),l.keyword("id").call(null,q)),function G(A){return new l.LazySeq(null,function(){let v=A;for(;;){const Q=l.seq.call(null,v);if(l.truth_.call(null,Q)){const $=Q;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,$))){const E=l.chunk_first.call(null,$),g=l.count.call(null,E),b=l.chunk_buffer.call(null,g);return(()=>{let I=0;for(;;){if(I<g){const R=l._nth.call(null,E,I),C=l.nth.call(null,R,0,null),L=l.nth.call(null,R,1,null);l.chunk_append.call(null,b,l.truth_.call(null,l._EQ_.call(null,C,0))?l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3 font-medium text-gray-900 whitespace-nowrap",l.keyword("scope"),"row",l.keyword("key"),l.keyword("name").call(null,L)),l.keyword("value").call(null,L).call(null,q)):l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3",l.keyword("key"),l.keyword("name").call(null,L)),l.keyword("value").call(null,L).call(null,q))),I=l.unchecked_inc.call(null,I);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,b),G.call(null,l.chunk_rest.call(null,$))):l.chunk_cons.call(null,l.chunk.call(null,b),null)}else{const E=l.first.call(null,$),g=l.nth.call(null,E,0,null),b=l.nth.call(null,E,1,null);return l.cons.call(null,l.truth_.call(null,l._EQ_.call(null,g,0))?l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3 font-medium text-gray-900 whitespace-nowrap",l.keyword("scope"),"row",l.keyword("key"),l.keyword("name").call(null,b)),l.keyword("value").call(null,b).call(null,q)):l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3",l.keyword("key"),l.keyword("name").call(null,b)),l.keyword("value").call(null,b).call(null,q)),G.call(null,l.rest.call(null,$)))}}break}},null,null)}.call(null,l.map_indexed.call(null,l.vector,i)))),f=l.unchecked_inc.call(null,f);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,_),a.call(null,l.chunk_rest.call(null,o))):l.chunk_cons.call(null,l.chunk.call(null,_),null)}else{const y=l.first.call(null,o),w=l.nth.call(null,y,0,null),_=l.nth.call(null,y,1,null);return l.cons.call(null,l.vector(l.keyword("tr"),l.array_map(l.keyword("class"),w!==0?"border-t border-gray-200":null,l.keyword("key"),l.keyword("id").call(null,_)),function x(S){return new l.LazySeq(null,function(){let q=S;for(;;){const F=l.seq.call(null,q);if(l.truth_.call(null,F)){const z=F;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,z))){const G=l.chunk_first.call(null,z),A=l.count.call(null,G),v=l.chunk_buffer.call(null,A);return(()=>{let Q=0;for(;;){if(Q<A){const $=l._nth.call(null,G,Q),E=l.nth.call(null,$,0,null),g=l.nth.call(null,$,1,null);l.chunk_append.call(null,v,l.truth_.call(null,l._EQ_.call(null,E,0))?l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3 font-medium text-gray-900 whitespace-nowrap",l.keyword("scope"),"row",l.keyword("key"),l.keyword("name").call(null,g)),l.keyword("value").call(null,g).call(null,_)):l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3",l.keyword("key"),l.keyword("name").call(null,g)),l.keyword("value").call(null,g).call(null,_))),Q=l.unchecked_inc.call(null,Q);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,v),x.call(null,l.chunk_rest.call(null,z))):l.chunk_cons.call(null,l.chunk.call(null,v),null)}else{const G=l.first.call(null,z),A=l.nth.call(null,G,0,null),v=l.nth.call(null,G,1,null);return l.cons.call(null,l.truth_.call(null,l._EQ_.call(null,A,0))?l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3 font-medium text-gray-900 whitespace-nowrap",l.keyword("scope"),"row",l.keyword("key"),l.keyword("name").call(null,v)),l.keyword("value").call(null,v).call(null,_)):l.vector(l.keyword("td"),l.array_map(l.keyword("class"),"px-4 py-3",l.keyword("key"),l.keyword("name").call(null,v)),l.keyword("value").call(null,v).call(null,_)),x.call(null,l.rest.call(null,z)))}}break}},null,null)}.call(null,l.map_indexed.call(null,l.vector,i))),a.call(null,l.rest.call(null,o)))}}break}},null,null)}.call(null,l.map_indexed.call(null,l.vector,c)))))))},tl=function(e){const r=e,n=l.__destructure_map.call(null,r),t=l.get.call(null,n,l.keyword("title")),c=l.get.call(null,n,l.keyword("content")),k=l.get.call(null,n,l.keyword("class")),p=l.get.call(null,n,l.keyword("selected")),i=l.get.call(null,n,l.keyword("on-drag-over")),m=l.get.call(null,n,l.keyword("on-drop")),u=l.get.call(null,n,l.keyword("on-click")),a=l.get.call(null,n,l.keyword("hover"));return l.vector(l.keyword("section"),l.array_map(l.keyword("class"),l.str.call(null,"bg-gray-50 antialiased ",k),l.keyword("on-click"),u,l.keyword("on-drag-over"),i,l.keyword("on-drop"),m),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"h-full border bg-white relative shadow-sm sm:rounded-lg md:overflow-auto ",l.truth_.call(null,p)?"ring-2 ring-blue-400 border-blue-500":"border-white"," ",l.truth_.call(null,a)?"hover:border-blue-500":null)),l.truth_.call(null,t)?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-6"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"w-full"),l.vector(l.keyword("h2"),l.array_map(l.keyword("class"),"text-3xl font-semibold font-app-serif"),t))):null,l.truth_.call(null,c)?l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"md:overflow-auto p-6 ",l.truth_.call(null,t)?"pt-0":null)),c):null))},al=function(e,r){return V.split.call(null,j.pluralize.call(null,l.count.call(null,e),j.singular.call(null,r)),/ /)},M=function(e){const r=e,n=l.__destructure_map.call(null,r),t=l.get.call(null,n,l.keyword("content-type"));return j.pluralize.call(null,l.keyword("content-item-count").call(null,t),j.singular.call(null,l.keyword("name").call(null,t)))},cl=function(e){const r=e,n=l.__destructure_map.call(null,r),t=l.get.call(null,n,l.keyword("content-types"));return l.vector(l.keyword("ul"),function k(p){return new l.LazySeq(null,function(){let i=p;for(;;){const m=l.seq.call(null,i);if(l.truth_.call(null,m)){const u=m;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,u))){const a=l.chunk_first.call(null,u),h=l.count.call(null,a),s=l.chunk_buffer.call(null,h);return(()=>{let d=0;for(;;){if(d<h){const o=l._nth.call(null,a,d),y=l.nth.call(null,o,0,null),w=l.nth.call(null,o,1,null);l.chunk_append.call(null,s,l.vector(l.keyword("span"),l.array_map(l.keyword("key"),l.keyword("id").call(null,w)),l.truth_.call(null,l._EQ_.call(null,y,0))?null:l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-300")," \u2022 "),l.vector(l.keyword("a"),l.array_map(l.keyword("class"),"underline text-nowrap font-semibold",l.keyword("href"),l.str.call(null,"/admin/content-types/",l.name.call(null,l.keyword("slug").call(null,w)))),l.vector(M,l.array_map(l.keyword("content-type"),w))))),d=l.unchecked_inc.call(null,d);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,s),k.call(null,l.chunk_rest.call(null,u))):l.chunk_cons.call(null,l.chunk.call(null,s),null)}else{const a=l.first.call(null,u),h=l.nth.call(null,a,0,null),s=l.nth.call(null,a,1,null);return l.cons.call(null,l.vector(l.keyword("span"),l.array_map(l.keyword("key"),l.keyword("id").call(null,s)),l.truth_.call(null,l._EQ_.call(null,h,0))?null:l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"text-gray-300")," \u2022 "),l.vector(l.keyword("a"),l.array_map(l.keyword("class"),"underline text-nowrap font-semibold",l.keyword("href"),l.str.call(null,"/admin/content-types/",l.name.call(null,l.keyword("slug").call(null,s)))),l.vector(M,l.array_map(l.keyword("content-type"),s)))),k.call(null,l.rest.call(null,u)))}}break}},null,null)}.call(null,l.map_indexed.call(null,l.vector,l.sort_by.call(null,l.keyword("name"),t))))},ul=function(e,r){return l.into.call(null,l.array_map(),l.map.call(null,function(n){return l.vector(e.call(null,n),n)},r))};export{nl as __GT_unsaved_changes,ll as add_page,tl as box,K as client_id,M as content_item_count_text,cl as content_item_counts,T as dag_atom,P as field_values,ul as index_by,U as node__GT_trace,al as pluralize,rl as table,B as tracing_xf,el as update_unsaved_changes_BANG_,D as wrap_component};
