import*as e from"cherry-cljs/cljs.core.js";import{useEffect as N}from"react";import{use_dag as R}from"rpub.lib.dag.react";import*as S from"rpub.lib.html";import*as z from"rpub.lib.http";import*as k from"rpub.plugins.admin.impl";import*as T from"rpub.plugins.admin.roles";var p=function(t){return e.vector(e.keyword("svg"),e.array_map(e.keyword("className"),"w-6 h-6 text-white",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"none",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("stroke"),"currentColor",e.keyword("strokeLinecap"),"round",e.keyword("strokeLinejoin"),"round",e.keyword("strokeWidth"),"2",e.keyword("d"),"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z")))},_=function(t){return e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-8 h-8 text-gray-500 mr-4",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M13 10a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H14a1 1 0 0 1-1-1Z",e.keyword("clip-rule"),"evenodd")),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12c0 .556-.227 1.06-.593 1.422A.999.999 0 0 1 20.5 20H4a2.002 2.002 0 0 1-2-2V6Zm6.892 12 3.833-5.356-3.99-4.322a1 1 0 0 0-1.549.097L4 12.879V6h16v9.95l-3.257-3.619a1 1 0 0 0-1.557.088L11.2 18H8.892Z",e.keyword("clip-rule"),"evenodd")))},h=function(t,l,o){t.preventDefault();const c=e.array_map(e.keyword("settings"),e.vector(e.array_map(e.keyword("key"),e.keyword("theme-name"),e.keyword("value"),e.keyword("label").call(null,l))));return z.post.call(null,"/admin/api/update-settings",e.array_map(e.keyword("body"),c)).then(function(y){return o.call(null,e.keyword("rpub.plugins.admin.all-themes-page/activate-theme"),e.keyword("label").call(null,l))})},A=function(t){const l=t,o=e.__destructure_map.call(null,l),c=o,y=e.get.call(null,o,e.keyword("theme-name-setting")),H=e.get.call(null,o,e.keyword("current-user")),v=R.call(null,e.vector(e.keyword("rpub.plugins.admin.all-themes-page/current-theme-name-setting"),e.keyword("rpub.plugins.admin.all-themes-page/themes"))),L=e.nth.call(null,v,0,null),g=e.__destructure_map.call(null,L),B=e.get.call(null,g,e.keyword("rpub.plugins.admin.all-themes-page/current-theme-name-setting")),E=e.get.call(null,g,e.keyword("rpub.plugins.admin.all-themes-page/themes")),m=e.nth.call(null,v,1,null),D=N.call(null,function(){return m.call(null,e.keyword("rpub.plugins.admin.all-themes-page/init"),c)},[]),Q=e.keyword("value").call(null,(()=>{const s=B;return e.truth_.call(null,s)?s:y})()),f=function(s){return e._EQ_.call(null,e.keyword("label").call(null,s),Q)};return e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"p-4"),e.vector(k.box,e.array_map(e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center"),e.vector(e.keyword("div.grow"),"Themes"),e.truth_.call(null,T.allowed_QMARK_.call(null,H,e.array_map(e.keyword("resource"),e.keyword("themes"),e.keyword("action"),e.keyword("create"))))?e.vector(e.keyword("a"),e.array_map(e.keyword("href"),"/admin/themes/new"),e.vector(S.button,e.array_map(e.keyword("class"),"font-app-sans ml-auto"),"New Theme")):null),e.keyword("class"),"mb-4")),function x(V){return new e.LazySeq(null,function(){let q=V;for(;;){const b=e.seq.call(null,q);if(e.truth_.call(null,b)){const i=b;if(e.truth_.call(null,e.chunked_seq_QMARK_.call(null,i))){const r=e.chunk_first.call(null,i),u=e.count.call(null,r),a=e.chunk_buffer.call(null,u);return(()=>{let d=0;for(;;){if(d<u){const n=e._nth.call(null,r,d),G=f.call(null,n);e.chunk_append.call(null,a,e.vector(e.keyword("form"),e.array_map(e.keyword("method"),"post"),e.vector(k.box,e.array_map(e.keyword("key"),e.keyword("label").call(null,n),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"grow flex items-center"),e.vector(_),e.keyword("label").call(null,n)),e.vector(e.keyword("div"),e.truth_.call(null,e.keyword("editable").call(null,n))?e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm mr-4 w-44",e.keyword("href"),e.str.call(null,"/admin/themes/",e.keyword("id").call(null,n))),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(p),"Edit")):null,e.truth_.call(null,G)?e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-emerald-600 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-inner cursor-auto w-44",e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z",e.keyword("clip-rule"),"evenodd"))),"Active")):e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm w-44",e.keyword("on-click"),function(w){return h.call(null,w,n,m)},e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("d"),"M8 5v4.997a.31.31 0 0 1-.068.113c-.08.098-.213.207-.378.301-.947.543-1.713 1.54-2.191 2.488A6.237 6.237 0 0 0 4.82 14.4c-.1.48-.138 1.031.018 1.539C5.12 16.846 6.02 17 6.414 17H11v3a1 1 0 1 0 2 0v-3h4.586c.395 0 1.295-.154 1.575-1.061.156-.508.118-1.059.017-1.539a6.241 6.241 0 0 0-.541-1.5c-.479-.95-1.244-1.946-2.191-2.489a1.393 1.393 0 0 1-.378-.301.309.309 0 0 1-.068-.113V5h1a1 1 0 1 0 0-2H7a1 1 0 1 0 0 2h1Z"))),"Activate")))),e.keyword("class"),"mb-4",e.keyword("content"),(()=>{const w=e.keyword("description").call(null,n);if(e.truth_.call(null,w)){const K=w;return e.vector(e.keyword("p"),K)}})())))),d=e.unchecked_inc.call(null,d);continue}else return!0;break}})()?e.chunk_cons.call(null,e.chunk.call(null,a),x.call(null,e.chunk_rest.call(null,i))):e.chunk_cons.call(null,e.chunk.call(null,a),null)}else{const r=e.first.call(null,i),u=f.call(null,r);return e.cons.call(null,e.vector(e.keyword("form"),e.array_map(e.keyword("method"),"post"),e.vector(k.box,e.array_map(e.keyword("key"),e.keyword("label").call(null,r),e.keyword("title"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"flex items-center",e.keyword("style"),e.array_map(e.keyword("margin-top"),"-1px")),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"grow flex items-center"),e.vector(_),e.keyword("label").call(null,r)),e.vector(e.keyword("div"),e.truth_.call(null,e.keyword("editable").call(null,r))?e.vector(e.keyword("a"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm mr-4 w-44",e.keyword("href"),e.str.call(null,"/admin/themes/",e.keyword("id").call(null,r))),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(p),"Edit")):null,e.truth_.call(null,u)?e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-emerald-600 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-inner cursor-auto w-44",e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("fill-rule"),"evenodd",e.keyword("d"),"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm13.707-1.293a1 1 0 0 0-1.414-1.414L11 12.586l-1.793-1.793a1 1 0 0 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l4-4Z",e.keyword("clip-rule"),"evenodd"))),"Active")):e.vector(e.keyword("button"),e.array_map(e.keyword("class"),"font-app-sans inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-primary-200 hover:bg-primary-800 shadow-sm w-44",e.keyword("on-click"),function(a){return h.call(null,a,r,m)},e.keyword("type"),"submit"),e.vector(e.keyword("div"),e.array_map(e.keyword("class"),"inline-flex items-center mx-auto"),e.vector(e.keyword("svg"),e.array_map(e.keyword("class"),"w-6 h-6 text-white mr-2",e.keyword("aria-hidden"),"true",e.keyword("xmlns"),"http://www.w3.org/2000/svg",e.keyword("width"),"24",e.keyword("height"),"24",e.keyword("fill"),"currentColor",e.keyword("viewBox"),"0 0 24 24"),e.vector(e.keyword("path"),e.array_map(e.keyword("d"),"M8 5v4.997a.31.31 0 0 1-.068.113c-.08.098-.213.207-.378.301-.947.543-1.713 1.54-2.191 2.488A6.237 6.237 0 0 0 4.82 14.4c-.1.48-.138 1.031.018 1.539C5.12 16.846 6.02 17 6.414 17H11v3a1 1 0 1 0 2 0v-3h4.586c.395 0 1.295-.154 1.575-1.061.156-.508.118-1.059.017-1.539a6.241 6.241 0 0 0-.541-1.5c-.479-.95-1.244-1.946-2.191-2.489a1.393 1.393 0 0 1-.378-.301.309.309 0 0 1-.068-.113V5h1a1 1 0 1 0 0-2H7a1 1 0 1 0 0 2h1Z"))),"Activate")))),e.keyword("class"),"mb-4",e.keyword("content"),(()=>{const a=e.keyword("description").call(null,r);if(e.truth_.call(null,a)){const d=a;return e.vector(e.keyword("p"),d)}})()))),x.call(null,e.rest.call(null,i)))}}break}},null,null)}.call(null,E))},C=function(t,l){const o=l,c=e.__destructure_map.call(null,o),y=e.get.call(null,c,e.keyword("themes"));return e.merge.call(null,t,e.array_map(e.keyword("rpub.plugins.admin.all-themes-page/themes"),y))},M=function(t,l){return e.assoc.call(null,t,e.keyword("rpub.plugins.admin.all-themes-page/current-theme-name-setting"),e.array_map(e.keyword("value"),l))},Z=e.array_map(e.keyword("nodes"),e.array_map(e.keyword("rpub.plugins.admin.all-themes-page/init"),e.array_map(e.keyword("push"),C),e.keyword("rpub.plugins.admin.all-themes-page/activate-theme"),e.array_map(e.keyword("push"),M),e.keyword("rpub.plugins.admin.all-themes-page/current-theme-name-setting"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.admin.all-themes-page/current-theme-name-setting")),e.keyword("rpub.plugins.admin.all-themes-page/themes"),e.array_map(e.keyword("calc"),e.keyword("rpub.plugins.admin.all-themes-page/themes"))),e.keyword("edges"),e.vector(e.vector(e.keyword("rpub.plugins.admin.all-themes-page/activate-theme"),e.keyword("rpub.plugins.admin.all-themes-page/current-theme-name-setting")),e.vector(e.keyword("rpub.plugins.admin.all-themes-page/init"),e.keyword("rpub.plugins.admin.all-themes-page/themes")))),j=e.array_map(e.keyword("page-id"),e.keyword("all-themes-page"),e.keyword("component"),A,e.keyword("dag-config"),Z);export{M as activate_theme,h as activate_theme_BANG_,j as config,Z as dag_config,p as edit_icon,C as init,A as page,_ as theme_icon};
