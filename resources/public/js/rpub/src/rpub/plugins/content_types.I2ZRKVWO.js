import*as l from"cherry-cljs/cljs.core.js";import{useEffect as Z}from"react";import*as D from"rads.inflections";import*as G from"rpub.admin.impl";import{use_dag as K}from"rpub.lib.dag.react";import*as x from"rpub.lib.html";import*as P from"rpub.lib.http";import*as z from"rpub.lib.reagent";var ll=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("name")),r=l.get.call(null,e,l.keyword("type"));return l.array_map(l.keyword("id"),l.random_uuid.call(null),l.keyword("name"),c,l.keyword("type"),r)},el=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("id")),r=l.get.call(null,e,l.keyword("name")),y=l.get.call(null,e,l.keyword("slug")),m=l.get.call(null,e,l.keyword("fields"));return l.array_map(l.keyword("id"),(()=>{const v=l.random_uuid.call(null);return l.truth_.call(null,v)?v:c})(),l.keyword("name"),r,l.keyword("slug"),y,l.keyword("fields"),m,l.keyword("created-at"),new Date,l.keyword("content-item-count"),0)},L=function(n){const u=l.keyword("type").call(null,n);switch(l.truth_.call(null,l.keyword_QMARK_.call(null,u))?l.subs.call(null,l.str.call(null,u),1):null){case"text":return"Text";case"text-lg":return"Text (Large)";default:return l.name.call(null,l.keyword("type").call(null,n))}},C=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("anti-forgery-token")),r=l.get.call(null,e,l.keyword("content-type")),y=l.get.call(null,e,l.keyword("class")),m=K.call(null,l.vector(l.keyword("all-content-types-page/selection"))),v=l.nth.call(null,m,0,null),s=l.__destructure_map.call(null,v),b=l.get.call(null,s,l.keyword("all-content-types-page/selection")),g=l.nth.call(null,m,1,null),M=l.array_map(l.keyword("format"),l.keyword("transit"));return l.vector(l.keyword("form"),l.array_map(l.keyword("method"),"post",l.keyword("class"),y),l.vector(l.keyword("input"),l.array_map(l.keyword("id"),"__anti-forgery-token",l.keyword("name"),"__anti-forgery-token",l.keyword("type"),"hidden",l.keyword("value"),c)),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-id",l.keyword("value"),l.keyword("id").call(null,r))),l.vector(l.keyword("input"),l.array_map(l.keyword("type"),"hidden",l.keyword("name"),"content-type-name",l.keyword("value"),l.keyword("name").call(null,r))),l.vector(l.keyword("div"),function S(A){return new l.LazySeq(null,function(){let Q=A;for(;;){const w=l.seq.call(null,Q);if(l.truth_.call(null,w)){const a=w;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,a))){const _=l.chunk_first.call(null,a),i=l.count.call(null,_),d=l.chunk_buffer.call(null,i);return(()=>{let k=0;for(;;){if(k<i){const t=l._nth.call(null,_,k),o=(()=>{const p=l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,r));return l.truth_.call(null,p)?l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type-field"),l.keyword("id"))),l.keyword("id").call(null,t)):p})();l.chunk_append.call(null,d,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"my-2 flex items-center","w-full font-semibold border ","rounded-[6px] hover:border-blue-500 ",l.truth_.call(null,o)?"ring-2 ring-blue-400 border-blue-500":"border-gray-200"),l.keyword("data-content-type-field-id"),l.keyword("id").call(null,t),l.keyword("key"),l.keyword("id").call(null,t)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(l.keyword("div.w-full.pl-2.py-2"),l.array_map(l.keyword("onClick"),function(p){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),r,l.keyword("content-type-field"),t))}),l.keyword("name").call(null,t)),l.vector(l.keyword("div.bg-gray-50.px-2.py-2.border-l.border-l-gray-200"),l.array_map(l.keyword("class"),"min-w-[150px] rounded-r-[6px]",l.keyword("onClick"),function(p){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),r,l.keyword("content-type-field"),t))}),l.vector(L,t)))),k=l.unchecked_inc.call(null,k);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,d),S.call(null,l.chunk_rest.call(null,a))):l.chunk_cons.call(null,l.chunk.call(null,d),null)}else{const _=l.first.call(null,a),i=(()=>{const d=l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,r));return l.truth_.call(null,d)?l._EQ_.call(null,l.get_in.call(null,b,l.vector(l.keyword("content-type-field"),l.keyword("id"))),l.keyword("id").call(null,_)):d})();return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"my-2 flex items-center","w-full font-semibold border ","rounded-[6px] hover:border-blue-500 ",l.truth_.call(null,i)?"ring-2 ring-blue-400 border-blue-500":"border-gray-200"),l.keyword("data-content-type-field-id"),l.keyword("id").call(null,_),l.keyword("key"),l.keyword("id").call(null,_)),l.vector(l.keyword("label"),l.array_map(l.keyword("for"),"field-name")),l.vector(l.keyword("div.w-full.pl-2.py-2"),l.array_map(l.keyword("onClick"),function(d){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),r,l.keyword("content-type-field"),_))}),l.keyword("name").call(null,_)),l.vector(l.keyword("div.bg-gray-50.px-2.py-2.border-l.border-l-gray-200"),l.array_map(l.keyword("class"),"min-w-[150px] rounded-r-[6px]",l.keyword("onClick"),function(d){return g.call(null,l.keyword("all-content-types-page/select-content-type-field"),l.array_map(l.keyword("content-type"),r,l.keyword("content-type-field"),_))}),l.vector(L,_))),S.call(null,l.rest.call(null,a)))}}break}},null,null)}.call(null,l.sort_by.call(null,l.keyword("rank"),l.keyword("fields").call(null,r)))))},O=function(n){const u=n,e=l.__destructure_map.call(null,u),c=e,r=l.get.call(null,e,l.keyword("field-types")),y=K.call(null,l.vector(l.keyword("all-content-types-page/selection"),l.keyword("model/content-types-index"))),m=l.nth.call(null,y,0,null),v=l.__destructure_map.call(null,m),s=l.get.call(null,v,l.keyword("all-content-types-page/selection")),b=l.get.call(null,v,l.keyword("model/content-types-index")),g=l.nth.call(null,y,1,null),M=Z.call(null,function(){return g.call(null,l.keyword("init"),l.select_keys.call(null,c,l.vector(l.keyword("content-types"))))},[]),T=l.array_map(l.keyword("format"),l.keyword("transit")),S=function(w,a){return l.println.call(null,confirm(l.str.call(null,'Are you sure you want to delete the "',l.keyword("name").call(null,a),'" field?')))},A=l.sort_by.call(null,l.keyword("created-at"),l._GT_,l.vals.call(null,b)),Q=l.map.call(null,function(w){const a=w,_=l.nth.call(null,a,0,null),i=l.nth.call(null,a,1,null);return l.assoc.call(null,i,l.keyword("type"),_)},r);return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex",l.keyword("onClick"),function(w){return l.truth_.call(null,(()=>{const a=w.target.closest("[data-no-select]");return l.truth_.call(null,a)?a:w.target.closest("[data-content-type-field-id]")})())?null:g.call(null,l.keyword("all-content-types-page/clear-selection"))}),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex-grow"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pr-[384px]"),l.vector(G.box,l.array_map(l.keyword("class"),"pb-4",l.keyword("data-no-select"),!0,l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center"),l.vector(l.keyword("div"),"Content Types")),l.keyword("content"),l.vector(G.content_item_counts,l.array_map(l.keyword("content-types"),A)))),function a(_){return new l.LazySeq(null,function(){let i=_;for(;;){const d=l.seq.call(null,i);if(l.truth_.call(null,d)){const k=d;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,k))){const t=l.chunk_first.call(null,k),o=l.count.call(null,t),h=l.chunk_buffer.call(null,o);return(()=>{let p=0;for(;;){if(p<o){const f=l._nth.call(null,t,p);l.chunk_append.call(null,h,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,f),l.keyword("data-no-select"),!0),l.vector(G.box,l.array_map(l.keyword("hover"),!0,l.keyword("on-click"),function(q){return l.truth_.call(null,q.target.closest("[data-content-type-field-id]"))?null:g.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),f))},l.keyword("on-drag-over"),function(q){return q.preventDefault()},l.keyword("on-drop"),function(q){return g.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),f))},l.keyword("selected"),(()=>{const q=l.not.call(null,l.keyword("content-type-field").call(null,s));return l.truth_.call(null,q)?l._EQ_.call(null,l.get_in.call(null,s,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,f)):q})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,f))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,f)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,f)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector(C,l.array_map(l.keyword("content-type"),f))):null)))),p=l.unchecked_inc.call(null,p);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,h),a.call(null,l.chunk_rest.call(null,k))):l.chunk_cons.call(null,l.chunk.call(null,h),null)}else{const t=l.first.call(null,k);return l.cons.call(null,l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"pb-4",l.keyword("key"),l.keyword("id").call(null,t),l.keyword("data-no-select"),!0),l.vector(G.box,l.array_map(l.keyword("hover"),!0,l.keyword("on-click"),function(o){return l.truth_.call(null,o.target.closest("[data-content-type-field-id]"))?null:g.call(null,l.keyword("all-content-types-page/select-content-type"),l.array_map(l.keyword("content-type"),t))},l.keyword("on-drag-over"),function(o){return o.preventDefault()},l.keyword("on-drop"),function(o){return g.call(null,l.keyword("all-content-types-page/drag-drop"),l.array_map(l.keyword("content-type"),t))},l.keyword("selected"),(()=>{const o=l.not.call(null,l.keyword("content-type-field").call(null,s));return l.truth_.call(null,o)?l._EQ_.call(null,l.get_in.call(null,s,l.vector(l.keyword("content-type"),l.keyword("id"))),l.keyword("id").call(null,t)):o})(),l.keyword("title"),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-center group"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl"),l.keyword("name").call(null,t))),l.keyword("content"),l.truth_.call(null,l.seq.call(null,l.keyword("fields").call(null,t)))?l.vector(l.keyword("div"),l.array_map(l.keyword("key"),l.keyword("id").call(null,t)),l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"flex items-start")),l.vector(C,l.array_map(l.keyword("content-type"),t))):null))),a.call(null,l.rest.call(null,k)))}}break}},null,null)}.call(null,A))),(()=>{const w=function(a){const _=a,i=l.__destructure_map.call(null,_),d=i,k=l.get.call(null,i,l.keyword("label")),t=l.get.call(null,i,l.keyword("description")),o=l.get.call(null,i,l.keyword("selected")),h=l.get.call(null,i,l.keyword("draggable"));return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),l.str.call(null,"border rounded-[6px] p-2 mb-4 bg-gray-50 ",l.truth_.call(null,h)?"cursor-move hover:shadow-md hover:bg-gray-100 border-gray-100":"cursor-pointer hover:border-blue-500"," ",l.truth_.call(null,o)?"ring-2 ring-blue-400 border-blue-500":"border-gray-100"),l.keyword("draggable"),h,l.keyword("onDragStart"),function(p){return g.call(null,l.keyword("all-content-types-page/drag-start"),d),l.println.call(null,l.keyword("onDragStart"),p)}),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"font-semibold"),k),l.vector(l.keyword("p"),l.array_map(l.keyword("class"),"text-sm text-gray-500"),t))};return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4 pl-2 w-[376px] fixed right-0 bottom-0 top-12",l.keyword("data-no-select"),!0),l.truth_.call(null,s)?l.truth_.call(null,l.keyword("content-type-field").call(null,s))?l.vector(G.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span.italic.text-blue-600"),"Field: "),l.get_in.call(null,s,l.vector(l.keyword("content-type-field"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div.mb-8"),l.vector(x.action_button,l.array_map(l.keyword("class"),"mt-2 mr-2"),"Rename Field"),l.vector(x.delete_button,l.array_map(l.keyword("class"),"mt-2",l.keyword("on-click"),function(a){return S.call(null,a,l.keyword("content-type-field").call(null,s))}),"Delete Field")),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Change Field Type"),l.vector(l.keyword("div"),function _(i){return new l.LazySeq(null,function(){let d=i;for(;;){const k=l.seq.call(null,d);if(l.truth_.call(null,k)){const t=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,t))){const o=l.chunk_first.call(null,t),h=l.count.call(null,o),p=l.chunk_buffer.call(null,h);return(()=>{let f=0;for(;;){if(f<h){const E=l._nth.call(null,o,f);l.chunk_append.call(null,p,w.call(null,l.merge.call(null,E,l.array_map(l.keyword("selected"),l._EQ_.call(null,l.get_in.call(null,s,l.vector(l.keyword("content-type-field"),l.keyword("type"))),l.keyword("type").call(null,E)))))),f=l.unchecked_inc.call(null,f);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,p),_.call(null,l.chunk_rest.call(null,t))):l.chunk_cons.call(null,l.chunk.call(null,p),null)}else{const o=l.first.call(null,t);return l.cons.call(null,w.call(null,l.merge.call(null,o,l.array_map(l.keyword("selected"),l._EQ_.call(null,l.get_in.call(null,s,l.vector(l.keyword("content-type-field"),l.keyword("type"))),l.keyword("type").call(null,o))))),_.call(null,l.rest.call(null,t)))}}break}},null,null)}.call(null,Q))))):l.truth_.call(null,l.keyword("content-type").call(null,s))?l.vector(G.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),l.vector(l.keyword("span.italic.text-blue-600"),"Content Type: "),l.get_in.call(null,s,l.vector(l.keyword("content-type"),l.keyword("name")))),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div.mb-8"),l.vector(x.action_button,l.array_map(l.keyword("class"),"mt-2 mr-2"),"Rename Content Type"),l.vector(x.delete_button,l.array_map(l.keyword("class"),"mt-2",l.keyword("on-click"),function(a){return S.call(null,a,l.keyword("content-type-field").call(null,s))}),"Delete Content Type")),l.vector(l.keyword("h4"),l.array_map(l.keyword("class"),"text-xl font-app-serif font-semibold mb-4"),"Add Field"),l.vector(l.keyword("div"),function _(i){return new l.LazySeq(null,function(){let d=i;for(;;){const k=l.seq.call(null,d);if(l.truth_.call(null,k)){const t=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,t))){const o=l.chunk_first.call(null,t),h=l.count.call(null,o),p=l.chunk_buffer.call(null,h);return(()=>{let f=0;for(;;){if(f<h){const E=l._nth.call(null,o,f);l.chunk_append.call(null,p,w.call(null,l.assoc.call(null,E,l.keyword("draggable"),!0))),f=l.unchecked_inc.call(null,f);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,p),_.call(null,l.chunk_rest.call(null,t))):l.chunk_cons.call(null,l.chunk.call(null,p),null)}else{const o=l.first.call(null,t);return l.cons.call(null,w.call(null,l.assoc.call(null,o,l.keyword("draggable"),!0)),_.call(null,l.rest.call(null,t)))}}break}},null,null)}.call(null,Q))))):null:l.vector(G.box,l.array_map(l.keyword("class"),"h-full",l.keyword("title"),l.vector(l.keyword("h3"),l.array_map(l.keyword("class"),"text-2xl font-app-serif font-semibold"),"Add Field"),l.keyword("content"),l.vector(l.keyword("div"),l.vector(l.keyword("div"),function _(i){return new l.LazySeq(null,function(){let d=i;for(;;){const k=l.seq.call(null,d);if(l.truth_.call(null,k)){const t=k;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,t))){const o=l.chunk_first.call(null,t),h=l.count.call(null,o),p=l.chunk_buffer.call(null,h);return(()=>{let f=0;for(;;){if(f<h){const E=l._nth.call(null,o,f);l.chunk_append.call(null,p,w.call(null,l.assoc.call(null,E,l.keyword("draggable"),!0))),f=l.unchecked_inc.call(null,f);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,p),_.call(null,l.chunk_rest.call(null,t))):l.chunk_cons.call(null,l.chunk.call(null,p),null)}else{const o=l.first.call(null,t);return l.cons.call(null,w.call(null,l.assoc.call(null,o,l.keyword("draggable"),!0)),_.call(null,l.rest.call(null,t)))}}break}},null,null)}.call(null,Q))))))})())};x.add_element.call(null,l.keyword("all-content-types-page"),G.wrap_component.call(null,O),l.array_map(l.keyword("format"),l.keyword("transit")));var R=l.vector("January","February","March","April","May","June","July","August","September","October","November","December"),I=function(n){const u=n.getMonth(),e=n.getDate(),c=n.getFullYear(),r=n.getHours(),y=n.getMinutes(),m=l.get.call(null,R,u),v=r<12?"AM":"PM",s=l.mod.call(null,r,12),b=s===0?12:s,g=y<10?l.str.call(null,"0",y):l.str.call(null,y);return l.str.call(null,m," ",e,", ",c," ",b,":",g," ",v)},N=function(n){return l.str.call(null,"/admin/content-types/",l.name.call(null,l.get_in.call(null,n,l.vector(l.keyword("content-type"),l.keyword("slug")))),"/content-items/",l.name.call(null,l.get_in.call(null,n,l.vector(l.keyword("fields"),"Slug"))))},U=l.vector(l.array_map(l.keyword("name"),"Title",l.keyword("value"),function(n){const u=n,e=l.__destructure_map.call(null,u),c=e,r=l.get.call(null,e,l.keyword("fields"));return l.vector(l.keyword("a.underline"),l.array_map(l.keyword("href"),N.call(null,c)),l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),l.get.call(null,r,"Title")))}),l.array_map(l.keyword("name"),"Author",l.keyword("value"),function(n){const u=n,e=l.__destructure_map.call(null,u),r=l.get.call(null,e,l.keyword("created-by")),y=l.__destructure_map.call(null,r),m=l.get.call(null,y,l.keyword("username"));return l.vector(l.keyword("span"),l.array_map(l.keyword("class"),"font-semibold"),m)}),l.array_map(l.keyword("name"),"Date",l.keyword("value"),function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("created-at")),r=l.get.call(null,e,l.keyword("updated-at")),y=(()=>{const v=r;return l.truth_.call(null,v)?v:c})(),m=y==null?null:new Date(y);return m==null?null:I.call(null,m)})),J=function(n){return l.str.call(null,"/admin/content-types/",l.name.call(null,l.keyword("slug").call(null,n)),"/content-items/new")},$=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("content-type")),r=l.get.call(null,e,l.keyword("content-items")),y=l.array_map(l.keyword("format"),l.keyword("transit")),m=l.map.call(null,function(b){return l.update.call(null,b,l.keyword("fields"),function(g){return l.update_keys.call(null,g,l.name)})},r),v=function(b,g){const M=l.array_map(l.keyword("content-item-id"),l.keyword("id").call(null,g)),T=function(A,Q){if(l.truth_.call(null,Q))return l.println.call(null,Q)},S=l.merge.call(null,y,l.array_map(l.keyword("body"),M,l.keyword("on-complete"),T));return P.post.call(null,"/api/delete-content-item",S)},s=l.map.call(null,function(b){return l.assoc.call(null,b,l.keyword("content-type"),c)},m);return l.vector(l.keyword("div"),l.array_map(l.keyword("class"),"p-4"),l.vector(G.table,l.array_map(l.keyword("title"),l.keyword("name").call(null,c),l.keyword("columns"),U,l.keyword("rows"),s,l.keyword("header-buttons"),l.vector(l.keyword("a"),l.array_map(l.keyword("href"),J.call(null,c)),l.vector(x.action_button,l.str.call(null,"New ",D.singular.call(null,l.keyword("name").call(null,c))))),l.keyword("delete-row"),v)))};x.add_element.call(null,l.keyword("single-content-type-page"),G.wrap_component.call(null,$),l.array_map(l.keyword("format"),l.keyword("transit")));var H=function(n){const u=n,e=l.__destructure_map.call(null,u),c=e,r=l.get.call(null,e,l.keyword("field")),y=l.get.call(null,e,l.keyword("editing")),m=l.get.call(null,e,l.keyword("creating")),v=l.get.call(null,e,l.keyword("value")),s=l.get.call(null,e,l.keyword("on-change"));return l.vector(x.input2,(()=>{const b=l.array_map(l.keyword("type"),l.keyword("text"),l.keyword("name"),l.str.call(null,l.keyword("key").call(null,r)),l.keyword("on-change"),s),g=l.truth_.call(null,y)?l.assoc.call(null,b,l.keyword("value"),v):b;return l.truth_.call(null,m)?l.assoc.call(null,g,l.keyword("placeholder"),L.call(null,r)):g})())};x.add_element.call(null,l.keyword("rpub-field-types-text"),z.reactify_component.call(null,H));var Y=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("field")),r=l.get.call(null,e,l.keyword("editing")),y=l.get.call(null,e,l.keyword("creating")),m=l.get.call(null,e,l.keyword("value"));return l.vector(x.textarea,(()=>{const v=l.array_map(l.keyword("name"),l.keyword("key").call(null,c),l.keyword("on-change"),l.prn),s=l.truth_.call(null,r)?l.assoc.call(null,v,l.keyword("value"),m):v;return l.truth_.call(null,y)?l.assoc.call(null,s,l.keyword("placeholder"),L.call(null,c)):s})())};x.add_element.call(null,l.keyword("rpub-field-types-text-lg"),z.reactify_component.call(null,Y));var j=function(n){return l.vector(l.keyword("select"))};x.add_element.call(null,l.keyword("rpub-field-types-choice"),z.reactify_component.call(null,j));var B=function(n){return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("datetime-local")))};x.add_element.call(null,l.keyword("rpub-field-types-datetime"),z.reactify_component.call(null,B));var V=function(n){return l.vector(l.keyword("input"),l.array_map(l.keyword("type"),l.keyword("number")))};x.add_element.call(null,l.keyword("rpub-field-types-number"),z.reactify_component.call(null,V));var F=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("content-item")),r=l.get.call(null,e,l.keyword("editing")),y=l.get.call(null,e,l.keyword("creating")),m=l.get.call(null,e,l.keyword("field-types")),v=c,s=l.__destructure_map.call(null,v),b=l.get.call(null,s,l.keyword("content-type")),g=l.sort_by.call(null,function(M){const T=M,S=l.nth.call(null,T,0,null),A=l.nth.call(null,T,1,null),Q=l.some.call(null,function(w){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,w),S)))return w},l.keyword("fields").call(null,b));return l.keyword("rank").call(null,Q)},l.keyword("document").call(null,c));return l.vector(l.keyword("div"),function T(S){return new l.LazySeq(null,function(){let A=S;for(;;){const Q=l.seq.call(null,A);if(l.truth_.call(null,Q)){const w=Q;if(l.truth_.call(null,l.chunked_seq_QMARK_.call(null,w))){const a=l.chunk_first.call(null,w),_=l.count.call(null,a),i=l.chunk_buffer.call(null,_);return(()=>{let d=0;for(;;){if(d<_){const k=l._nth.call(null,a,d),t=l.nth.call(null,k,0,null),o=l.nth.call(null,k,1,null),h=(()=>{const E=l.some.call(null,function(q){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,q),t)))return q},l.keyword("fields").call(null,b));return l.assoc.call(null,E,l.keyword("key"),l.str.call(null,l.keyword("id").call(null,E)))})(),p=l.truth_.call(null,l._EQ_.call(null,o,l.keyword("rpub.plugins.content-types/new-field")))?"":o;l.chunk_append.call(null,i,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,h)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,h)),l.keyword("name").call(null,h)),l.vector(l.keyword("div"),x.custom_element.call(null,l.vector(l.get_in.call(null,m,l.vector(l.keyword("type").call(null,h),l.keyword("input"))),l.array_map(l.keyword("field"),h,l.keyword("value"),p,l.keyword("on-change"),function(E){return l.prn.call(null,E.target.value)},l.keyword("editing"),r,l.keyword("creating"),y)))))),d=l.unchecked_inc.call(null,d);continue}else return!0;break}})()?l.chunk_cons.call(null,l.chunk.call(null,i),T.call(null,l.chunk_rest.call(null,w))):l.chunk_cons.call(null,l.chunk.call(null,i),null)}else{const a=l.first.call(null,w),_=l.nth.call(null,a,0,null),i=l.nth.call(null,a,1,null),d=(()=>{const t=l.some.call(null,function(o){if(l.truth_.call(null,l._EQ_.call(null,l.keyword("id").call(null,o),_)))return o},l.keyword("fields").call(null,b));return l.assoc.call(null,t,l.keyword("key"),l.str.call(null,l.keyword("id").call(null,t)))})(),k=l.truth_.call(null,l._EQ_.call(null,i,l.keyword("rpub.plugins.content-types/new-field")))?"":i;return l.cons.call(null,l.vector(l.keyword("div.max-w-xl.mb-4"),l.array_map(l.keyword("key"),l.keyword("id").call(null,d)),l.vector(l.keyword("label.font-semibold.mb-1.block"),l.array_map(l.keyword("for"),l.keyword("name").call(null,d)),l.keyword("name").call(null,d)),l.vector(l.keyword("div"),x.custom_element.call(null,l.vector(l.get_in.call(null,m,l.vector(l.keyword("type").call(null,d),l.keyword("input"))),l.array_map(l.keyword("field"),d,l.keyword("value"),k,l.keyword("on-change"),function(t){return l.prn.call(null,t.target.value)},l.keyword("editing"),r,l.keyword("creating"),y))))),T.call(null,l.rest.call(null,w)))}}break}},null,null)}.call(null,g))},W=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("content-type")),r=l.get.call(null,e,l.keyword("field-types")),y=l.array_map(l.keyword("content-type"),c,l.keyword("document"),l.into.call(null,l.array_map(),l.map.call(null,function(v){return l.vector(l.keyword("id").call(null,v),l.keyword("rpub.plugins.content-types/new-field"))},l.keyword("fields").call(null,c))));return l.vector(l.keyword("div.p-4"),l.vector(G.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.str.call(null,"New ",D.singular.call(null,l.get_in.call(null,y,l.vector(l.keyword("content-type"),l.keyword("name"))))))),l.vector(G.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(F,l.array_map(l.keyword("content-item"),y,l.keyword("field-types"),r,l.keyword("creating"),!0)),l.vector(x.submit_button,l.array_map(l.keyword("ready-label"),"Create",l.keyword("submit-label"),"Creating...",l.keyword("submitting"),!1))))))};x.add_element.call(null,l.keyword("new-content-item-page"),G.wrap_component.call(null,W),l.array_map(l.keyword("format"),l.keyword("transit")));var X=function(n){const u=n,e=l.__destructure_map.call(null,u),c=l.get.call(null,e,l.keyword("content-type")),r=l.get.call(null,e,l.keyword("content-item")),y=l.get.call(null,e,l.keyword("field-types"));return l.vector(l.keyword("div.p-4"),l.vector(G.box,l.array_map(l.keyword("class"),"mb-4",l.keyword("title"),l.vector(l.keyword("div"),l.vector(l.keyword("span.italic.text-blue-600"),l.str.call(null,D.singular.call(null,l.keyword("name").call(null,c)),": ")),l.get_in.call(null,r,l.vector(l.keyword("fields"),"Title"))))),l.vector(G.box,l.array_map(l.keyword("content"),l.vector(l.keyword("div"),l.vector(F,l.array_map(l.keyword("content-item"),r,l.keyword("field-types"),y,l.keyword("editing"),!0)),l.vector(x.submit_button,l.array_map(l.keyword("ready-label"),"Save",l.keyword("submit-label"),"Saving...",l.keyword("submitting"),!1))))))};x.add_element.call(null,l.keyword("edit-content-item-page"),G.wrap_component.call(null,X),l.array_map(l.keyword("format"),l.keyword("transit")));export{el as __GT_content_type,ll as __GT_field,O as all_content_types_page,U as columns,F as content_item_fields,C as content_type_fields_form,X as edit_content_item_page,N as edit_content_item_path,L as field_type_label,I as format_datetime,R as months,W as new_content_item_page,J as new_content_item_path,j as rpub_field_types_choice,B as rpub_field_types_datetime,V as rpub_field_types_number,H as rpub_field_types_text,Y as rpub_field_types_text_lg,$ as single_content_type_page};
